(window.webpackJsonp=window.webpackJsonp||[]).push([[33],{337:function(e,s,t){"use strict";t.r(s);var n=t(0),a=Object(n.a)({},(function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[t("h3",{attrs:{id:"_1-å‰è¨€"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-å‰è¨€"}},[e._v("#")]),e._v(" 1. å‰è¨€")]),e._v(" "),t("p",[e._v("â€‹\tç”Ÿäº§å®è·µä¸­ä¸€å®šä¼˜å…ˆä½¿ç”¨ Dockerfile çš„æ–¹å¼æ„å»ºé•œåƒã€‚ å› ä¸ºä½¿ç”¨ Dockerfile æ„å»ºé•œåƒå¯ä»¥å¸¦æ¥å¾ˆå¤šå¥½å¤„ï¼š")]),e._v(" "),t("ul",[t("li",[t("p",[e._v("æ˜“äºç‰ˆæœ¬åŒ–ç®¡ç†ï¼ŒDockerfile æœ¬èº«æ˜¯ä¸€ä¸ªæ–‡æœ¬æ–‡ä»¶ï¼Œæ–¹ä¾¿å­˜æ”¾åœ¨ä»£ç ä»“åº“åšç‰ˆæœ¬ç®¡ç†ï¼Œå¯ä»¥å¾ˆæ–¹ä¾¿åœ°æ‰¾åˆ°å„ä¸ªç‰ˆæœ¬ä¹‹é—´çš„å˜æ›´å†å²ï¼›")])]),e._v(" "),t("li",[t("p",[e._v("è¿‡ç¨‹å¯è¿½æº¯ï¼ŒDockerfile çš„æ¯ä¸€è¡ŒæŒ‡ä»¤ä»£è¡¨ä¸€ä¸ªé•œåƒå±‚ï¼Œæ ¹æ® Dockerfile çš„å†…å®¹å³å¯å¾ˆæ˜ç¡®åœ°æŸ¥çœ‹é•œåƒçš„å®Œæ•´æ„å»ºè¿‡ç¨‹ï¼›")])]),e._v(" "),t("li",[t("p",[e._v("å±è”½æ„å»ºç¯å¢ƒå¼‚æ„ï¼Œä½¿ç”¨ Dockerfile æ„å»ºé•œåƒæ— é¡»è€ƒè™‘æ„å»ºç¯å¢ƒï¼ŒåŸºäºç›¸åŒ Dockerfile æ— è®ºåœ¨å“ªé‡Œè¿è¡Œï¼Œæ„å»ºç»“æœéƒ½ä¸€è‡´ï¼›")])]),e._v(" "),t("li",[t("p",[e._v("è™½ç„¶æœ‰è¿™ä¹ˆå¤šå¥½å¤„ï¼Œä½†æ˜¯å¦‚æœä½  Dockerfile ä½¿ç”¨ä¸å½“ä¹Ÿä¼šå¼•å‘å¾ˆå¤šé—®é¢˜ã€‚æ¯”å¦‚é•œåƒæ„å»ºæ—¶é—´è¿‡é•¿ï¼Œç”šè‡³é•œåƒæ„å»ºå¤±è´¥ï¼›é•œåƒå±‚æ•°è¿‡å¤šï¼Œå¯¼è‡´é•œåƒæ–‡ä»¶è¿‡å¤§ã€‚æ‰€ä»¥ï¼Œè¿™ä¸€è¯¾æ—¶æˆ‘å°±æ•™ä½ å¦‚ä½•åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ç¼–å†™æœ€ä¼˜çš„ Dockerfileï¼›")])])]),e._v(" "),t("h3",{attrs:{id:"_2-dockerfileç¼–å†™éµå¾ªçš„åŸåˆ™"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-dockerfileç¼–å†™éµå¾ªçš„åŸåˆ™"}},[e._v("#")]),e._v(" 2. Dockerfileç¼–å†™éµå¾ªçš„åŸåˆ™")]),e._v(" "),t("p",[e._v("â€‹\téµå¾ªä»¥ä¸‹ Dockerfile ä¹¦å†™åŸåˆ™ï¼Œä¸ä»…å¯ä»¥ä½¿å¾—æˆ‘ä»¬çš„ Dockerfile ç®€æ´æ˜äº†ï¼Œè®©åä½œè€…æ¸…æ¥šåœ°äº†è§£é•œåƒçš„å®Œæ•´æ„å»ºæµç¨‹ï¼Œè¿˜å¯ä»¥å¸®åŠ©æˆ‘ä»¬å‡å°‘é•œåƒçš„ä½“ç§¯ï¼ŒåŠ å¿«é•œåƒæ„å»ºçš„é€Ÿåº¦å’Œåˆ†å‘é€Ÿåº¦ã€‚")]),e._v(" "),t("p",[t("strong",[e._v("ï¼ˆ1ï¼‰å•ä¸€èŒè´£")]),e._v("\nâ€‹\tç”±äºå®¹å™¨çš„æœ¬è´¨æ˜¯è¿›ç¨‹ï¼Œä¸€ä¸ªå®¹å™¨ä»£è¡¨ä¸€ä¸ªè¿›ç¨‹ï¼Œå› æ­¤ä¸åŒåŠŸèƒ½çš„åº”ç”¨åº”è¯¥å°½é‡æ‹†åˆ†ä¸ºä¸åŒçš„å®¹å™¨ï¼Œæ¯ä¸ªå®¹å™¨åªè´Ÿè´£å•ä¸€ä¸šåŠ¡è¿›ç¨‹ã€‚")]),e._v(" "),t("p",[t("strong",[e._v("ï¼ˆ2ï¼‰æä¾›æ³¨é‡Šä¿¡æ¯")]),e._v("\nâ€‹\tDockerfile ä¹Ÿæ˜¯ä¸€ç§ä»£ç ï¼Œæˆ‘ä»¬åº”è¯¥ä¿æŒè‰¯å¥½çš„ä»£ç ç¼–å†™ä¹ æƒ¯ï¼Œæ™¦æ¶©éš¾æ‡‚çš„ä»£ç å°½é‡æ·»åŠ æ³¨é‡Šï¼Œè®©åä½œè€…å¯ä»¥ä¸€ç›®äº†ç„¶åœ°çŸ¥é“æ¯ä¸€è¡Œä»£ç çš„ä½œç”¨ï¼Œå¹¶ä¸”æ–¹ä¾¿æ‰©å±•å’Œä½¿ç”¨ã€‚")]),e._v(" "),t("p",[t("strong",[e._v("ï¼ˆ3ï¼‰ä¿æŒå®¹å™¨æœ€å°åŒ–")]),e._v("\nâ€‹\tåº”è¯¥é¿å…å®‰è£…æ— ç”¨çš„è½¯ä»¶åŒ…ï¼Œæ¯”å¦‚åœ¨ä¸€ä¸ª nginx é•œåƒä¸­ï¼Œæˆ‘å¹¶ä¸éœ€è¦å®‰è£… vim ã€gcc ç­‰å¼€å‘ç¼–è¯‘å·¥å…·ã€‚è¿™æ ·ä¸ä»…å¯ä»¥åŠ å¿«å®¹å™¨æ„å»ºé€Ÿåº¦ï¼Œè€Œä¸”å¯ä»¥é¿å…é•œåƒä½“ç§¯è¿‡å¤§ã€‚")]),e._v(" "),t("p",[t("strong",[e._v("ï¼ˆ4ï¼‰åˆç†é€‰æ‹©åŸºç¡€é•œåƒ")]),e._v("\nâ€‹\tå®¹å™¨çš„æ ¸å¿ƒæ˜¯åº”ç”¨ï¼Œå› æ­¤åªè¦åŸºç¡€é•œåƒèƒ½å¤Ÿæ»¡è¶³åº”ç”¨çš„è¿è¡Œç¯å¢ƒå³å¯ã€‚ä¾‹å¦‚ä¸€ä¸ªJavaç±»å‹çš„åº”ç”¨è¿è¡Œæ—¶åªéœ€è¦JREï¼Œå¹¶ä¸éœ€è¦JDKï¼Œå› æ­¤æˆ‘ä»¬çš„åŸºç¡€é•œåƒåªéœ€è¦å®‰è£…JREç¯å¢ƒå³å¯ã€‚")]),e._v(" "),t("p",[t("strong",[e._v("ï¼ˆ5ï¼‰ä½¿ç”¨ .dockerignore æ–‡ä»¶")]),e._v("\nâ€‹\tåœ¨ä½¿ç”¨gitæ—¶ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨.gitignoreæ–‡ä»¶å¿½ç•¥ä¸€äº›ä¸éœ€è¦åšç‰ˆæœ¬ç®¡ç†çš„æ–‡ä»¶ã€‚åŒç†ï¼Œä½¿ç”¨.dockerignoreæ–‡ä»¶å…è®¸æˆ‘ä»¬åœ¨æ„å»ºæ—¶ï¼Œå¿½ç•¥ä¸€äº›ä¸éœ€è¦å‚ä¸æ„å»ºçš„æ–‡ä»¶ï¼Œä»è€Œæå‡æ„å»ºæ•ˆç‡ã€‚.dockerignoreçš„å®šä¹‰ç±»ä¼¼äº.gitignoreã€‚")]),e._v(" "),t("p",[e._v(".dockerignoreçš„æœ¬è´¨æ˜¯æ–‡æœ¬æ–‡ä»¶ï¼ŒDocker æ„å»ºæ—¶å¯ä»¥ä½¿ç”¨æ¢è¡Œç¬¦æ¥è§£ææ–‡ä»¶å®šä¹‰ï¼Œæ¯ä¸€è¡Œå¯ä»¥å¿½ç•¥ä¸€äº›æ–‡ä»¶æˆ–è€…æ–‡ä»¶å¤¹ã€‚å…·ä½“ä½¿ç”¨æ–¹å¼å¦‚ä¸‹ï¼š")]),e._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("è§„åˆ™\t\t\t   å«ä¹‰\n# å¼€å¤´çš„è¡¨ç¤ºæ³¨é‡Šï¼Œ# åé¢æ‰€æœ‰å†…å®¹å°†ä¼šè¢«å¿½ç•¥\n/tmp\t\t\tåŒ¹é…å½“å‰ç›®å½•ä¸‹ä»»ä½•ä»¥ tmp å¼€å¤´çš„æ–‡ä»¶æˆ–è€…æ–‡ä»¶å¤¹\n*.md\t\t\tåŒ¹é…ä»¥ .md ä¸ºåç¼€çš„ä»»æ„æ–‡ä»¶\ntem?\t\t\tåŒ¹é…ä»¥ tem å¼€å¤´å¹¶ä¸”ä»¥ä»»æ„å­—ç¬¦ç»“å°¾çš„æ–‡ä»¶ï¼Œï¼Ÿä»£è¡¨ä»»æ„ä¸€ä¸ªå­—ç¬¦\n!README.md  \t! è¡¨ç¤ºæ’é™¤å¿½ç•¥ã€‚\n")])]),e._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[e._v("1")]),t("br"),t("span",{staticClass:"line-number"},[e._v("2")]),t("br"),t("span",{staticClass:"line-number"},[e._v("3")]),t("br"),t("span",{staticClass:"line-number"},[e._v("4")]),t("br"),t("span",{staticClass:"line-number"},[e._v("5")]),t("br"),t("span",{staticClass:"line-number"},[e._v("6")]),t("br")])]),t("p",[t("strong",[e._v("ï¼ˆ6ï¼‰å°½é‡ä½¿ç”¨æ„å»ºç¼“å­˜")]),e._v("\nâ€‹\tDocker æ„å»ºè¿‡ç¨‹ä¸­ï¼Œæ¯ä¸€æ¡ Dockerfile æŒ‡ä»¤éƒ½ä¼šæäº¤ä¸ºä¸€ä¸ªé•œåƒå±‚ï¼Œä¸‹ä¸€æ¡æŒ‡ä»¤éƒ½æ˜¯åŸºäºä¸Šä¸€æ¡æŒ‡ä»¤æ„å»ºçš„ã€‚å¦‚æœæ„å»ºæ—¶å‘ç°è¦æ„å»ºçš„é•œåƒå±‚çš„çˆ¶é•œåƒå±‚å·²ç»å­˜åœ¨ï¼Œå¹¶ä¸”ä¸‹ä¸€æ¡å‘½ä»¤ä½¿ç”¨äº†ç›¸åŒçš„æŒ‡ä»¤ï¼Œå³å¯å‘½ä¸­æ„å»ºç¼“å­˜ã€‚")]),e._v(" "),t("p",[e._v("Docker æ„å»ºæ—¶åˆ¤æ–­æ˜¯å¦éœ€è¦ä½¿ç”¨ç¼“å­˜çš„è§„åˆ™å¦‚ä¸‹ï¼š")]),e._v(" "),t("ul",[t("li",[t("p",[e._v("ä»å½“å‰æ„å»ºå±‚å¼€å§‹ï¼Œæ¯”è¾ƒæ‰€æœ‰çš„å­é•œåƒï¼Œæ£€æŸ¥æ‰€æœ‰çš„æ„å»ºæŒ‡ä»¤æ˜¯å¦ä¸å½“å‰å®Œå…¨ä¸€è‡´ï¼Œå¦‚æœä¸ä¸€è‡´ï¼Œåˆ™ä¸ä½¿ç”¨ç¼“å­˜ï¼›")])]),e._v(" "),t("li",[t("p",[e._v("ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œåªéœ€è¦æ¯”è¾ƒæ„å»ºæŒ‡ä»¤å³å¯åˆ¤æ–­æ˜¯å¦éœ€è¦ä½¿ç”¨ç¼“å­˜ï¼Œä½†æ˜¯æœ‰äº›æŒ‡ä»¤é™¤å¤–ï¼ˆä¾‹å¦‚ADDå’ŒCOPYï¼‰ï¼›")])]),e._v(" "),t("li",[t("p",[e._v("å¯¹äºADDå’ŒCOPYæŒ‡ä»¤ä¸ä»…è¦æ ¡éªŒå‘½ä»¤æ˜¯å¦ä¸€è‡´ï¼Œè¿˜è¦ä¸ºå³å°†æ‹·è´åˆ°å®¹å™¨çš„æ–‡ä»¶è®¡ç®—æ ¡éªŒå’Œï¼ˆæ ¹æ®æ–‡ä»¶å†…å®¹è®¡ç®—å‡ºçš„ä¸€ä¸ªæ•°å€¼ï¼Œå¦‚æœä¸¤ä¸ªæ–‡ä»¶è®¡ç®—çš„æ•°å€¼ä¸€è‡´ï¼Œè¡¨ç¤ºä¸¤ä¸ªæ–‡ä»¶å†…å®¹ä¸€è‡´ ï¼‰ï¼Œå‘½ä»¤å’Œæ ¡éªŒå’Œå®Œå…¨ä¸€è‡´ï¼Œæ‰è®¤ä¸ºå‘½ä¸­ç¼“å­˜ã€‚")])]),e._v(" "),t("li",[t("p",[e._v("å› æ­¤ï¼ŒåŸºäº Docker æ„å»ºæ—¶çš„ç¼“å­˜ç‰¹æ€§ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠä¸è½»æ˜“æ”¹å˜çš„æŒ‡ä»¤æ”¾åˆ° Dockerfile å‰é¢ï¼ˆä¾‹å¦‚å®‰è£…è½¯ä»¶åŒ…ï¼‰ï¼Œè€Œå¯èƒ½ç»å¸¸å‘ç”Ÿæ”¹å˜çš„æŒ‡ä»¤æ”¾åœ¨ Dockerfile æœ«å°¾ï¼ˆä¾‹å¦‚ç¼–è¯‘åº”ç”¨ç¨‹åºï¼‰ã€‚")])]),e._v(" "),t("li",[t("p",[e._v("ä¾‹å¦‚ï¼Œæˆ‘ä»¬æƒ³è¦å®šä¹‰ä¸€äº›ç¯å¢ƒå˜é‡å¹¶ä¸”å®‰è£…ä¸€äº›è½¯ä»¶åŒ…ï¼Œå¯ä»¥æŒ‰ç…§å¦‚ä¸‹é¡ºåºç¼–å†™ Dockerfileï¼š")])])]),e._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("FROM centos:7\n# è®¾ç½®ç¯å¢ƒå˜é‡æŒ‡ä»¤æ”¾å‰é¢\nENV PATH /usr/local/bin:$PATH\n# å®‰è£…è½¯ä»¶æŒ‡ä»¤æ”¾å‰é¢\nRUN yum install -y make\n# æŠŠä¸šåŠ¡è½¯ä»¶çš„é…ç½®,ç‰ˆæœ¬ç­‰ç»å¸¸å˜åŠ¨çš„æ­¥éª¤æ”¾æœ€å\n")])]),e._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[e._v("1")]),t("br"),t("span",{staticClass:"line-number"},[e._v("2")]),t("br"),t("span",{staticClass:"line-number"},[e._v("3")]),t("br"),t("span",{staticClass:"line-number"},[e._v("4")]),t("br"),t("span",{staticClass:"line-number"},[e._v("5")]),t("br"),t("span",{staticClass:"line-number"},[e._v("6")]),t("br")])]),t("p",[e._v("æŒ‰ç…§ä¸Šé¢åŸåˆ™ç¼–å†™çš„ Dockerfile åœ¨æ„å»ºé•œåƒæ—¶ï¼Œå‰é¢æ­¥éª¤å‘½ä¸­ç¼“å­˜çš„æ¦‚ç‡ä¼šå¢åŠ ï¼Œå¯ä»¥å¤§å¤§ç¼©çŸ­é•œåƒæ„å»ºæ—¶é—´ã€‚")]),e._v(" "),t("p",[t("strong",[e._v("ï¼ˆ7ï¼‰æ­£ç¡®è®¾ç½®æ—¶åŒº")]),e._v("\nâ€‹\tæˆ‘ä»¬ä» Docker Hub æ‹‰å–çš„å®˜æ–¹æ“ä½œç³»ç»Ÿé•œåƒå¤§å¤šæ•°éƒ½æ˜¯ UTC æ—¶é—´ï¼ˆä¸–ç•Œæ ‡å‡†æ—¶é—´ï¼‰ã€‚å¦‚æœä½ æƒ³è¦åœ¨å®¹å™¨ä¸­ä½¿ç”¨ä¸­å›½åŒºæ ‡å‡†æ—¶é—´ï¼ˆä¸œå…«åŒºï¼‰ï¼Œè¯·æ ¹æ®ä½¿ç”¨çš„æ“ä½œç³»ç»Ÿä¿®æ”¹ç›¸åº”çš„æ—¶åŒºä¿¡æ¯ï¼Œä¸‹é¢æˆ‘ä»‹ç»å‡ ç§å¸¸ç”¨æ“ä½œç³»ç»Ÿçš„ä¿®æ”¹æ–¹å¼ï¼š")]),e._v(" "),t("p",[t("strong",[e._v("Ubuntu å’ŒDebian ç³»ç»Ÿ")])]),e._v(" "),t("p",[e._v("Ubuntu å’ŒDebian ç³»ç»Ÿå¯ä»¥å‘ Dockerfile ä¸­æ·»åŠ ä»¥ä¸‹æŒ‡ä»¤ï¼š")]),e._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v('RUN ln -sf /usr/share/zoneinfo/Asia/Shanghai /etc/localtime\nRUN echo "Asia/Shanghai" >> /etc/timezone\n')])]),e._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[e._v("1")]),t("br"),t("span",{staticClass:"line-number"},[e._v("2")]),t("br")])]),t("p",[t("strong",[e._v("CentOSç³»ç»Ÿ")])]),e._v(" "),t("p",[e._v("CentOS ç³»ç»Ÿåˆ™å‘ Dockerfile ä¸­æ·»åŠ ä»¥ä¸‹æŒ‡ä»¤ï¼š")]),e._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("RUN ln -sf /usr/share/zoneinfo/Asia/Shanghai /etc/localtime\n")])]),e._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[e._v("1")]),t("br")])]),t("p",[t("strong",[e._v("ï¼ˆ8ï¼‰ä½¿ç”¨å›½å†…è½¯ä»¶æºåŠ å¿«é•œåƒæ„å»ºé€Ÿåº¦")]),e._v("\nâ€‹\tç”±äºæˆ‘ä»¬å¸¸ç”¨çš„å®˜æ–¹æ“ä½œç³»ç»Ÿé•œåƒåŸºæœ¬éƒ½æ˜¯å›½å¤–çš„ï¼Œè½¯ä»¶æœåŠ¡å™¨å¤§éƒ¨åˆ†ä¹Ÿåœ¨å›½å¤–ï¼Œæ‰€ä»¥æˆ‘ä»¬æ„å»ºé•œåƒçš„æ—¶å€™æƒ³è¦å®‰è£…ä¸€äº›è½¯ä»¶åŒ…å¯èƒ½ä¼šéå¸¸æ…¢ã€‚")]),e._v(" "),t("p",[t("strong",[e._v("ï¼ˆ9ï¼‰æœ€å°åŒ–é•œåƒå±‚æ•°")]),e._v("\nåœ¨æ„å»ºé•œåƒæ—¶å°½å¯èƒ½åœ°å‡å°‘ Dockerfile æŒ‡ä»¤è¡Œæ•°ã€‚ä¾‹å¦‚æˆ‘ä»¬è¦åœ¨ CentOS ç³»ç»Ÿä¸­å®‰è£…makeå’Œnet-toolsä¸¤ä¸ªè½¯ä»¶åŒ…ï¼Œåº”è¯¥åœ¨ Dockerfile ä¸­ä½¿ç”¨ä»¥ä¸‹æŒ‡ä»¤ï¼š")]),e._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("RUN yum install -y make net-tools\n")])]),e._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[e._v("1")]),t("br")])]),t("p",[e._v("è€Œä¸åº”è¯¥å†™æˆè¿™æ ·ï¼š")]),e._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("RUN yum install -y make\nRUN yum install -y make\n")])]),e._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[e._v("1")]),t("br"),t("span",{staticClass:"line-number"},[e._v("2")]),t("br")])]),t("p",[e._v("äº†è§£å®Œ Dockerfile çš„ä¹¦å†™åŸåˆ™åï¼Œæˆ‘ä»¬å†æ¥å…·ä½“äº†è§£ä¸‹è¿™äº›åŸåˆ™è½å®åˆ°å…·ä½“çš„ Dockerfile æŒ‡ä»¤åº”è¯¥å¦‚ä½•ä¹¦å†™ã€‚")]),e._v(" "),t("h3",{attrs:{id:"_3-dockerfile-æŒ‡ä»¤ä¹¦å†™å»ºè®®"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-dockerfile-æŒ‡ä»¤ä¹¦å†™å»ºè®®"}},[e._v("#")]),e._v(" 3. Dockerfile æŒ‡ä»¤ä¹¦å†™å»ºè®®")]),e._v(" "),t("p",[e._v("ä¸‹é¢æ˜¯æˆ‘ä»¬å¸¸ç”¨çš„ä¸€äº›æŒ‡ä»¤:")]),e._v(" "),t("p",[t("strong",[e._v("ï¼ˆ1ï¼‰RUN")]),e._v("\nRUNæŒ‡ä»¤åœ¨æ„å»ºæ—¶"),t("strong",[e._v("å°†ä¼šç”Ÿæˆä¸€ä¸ªæ–°çš„é•œåƒå±‚")]),e._v("å¹¶ä¸”æ‰§è¡ŒRUNæŒ‡ä»¤åé¢çš„å†…å®¹ã€‚")]),e._v(" "),t("p",[e._v("ä½¿ç”¨RUNæŒ‡ä»¤æ—¶åº”è¯¥å°½é‡éµå¾ªä»¥ä¸‹åŸåˆ™ï¼š")]),e._v(" "),t("ul",[t("li",[t("p",[e._v("å½“RUNæŒ‡ä»¤åé¢è·Ÿçš„å†…å®¹æ¯”è¾ƒå¤æ‚æ—¶ï¼Œå»ºè®®ä½¿ç”¨åæ–œæ ï¼ˆ\\ï¼‰ ç»“å°¾å¹¶ä¸”æ¢è¡Œï¼›")])]),e._v(" "),t("li",[t("p",[e._v("RUNæŒ‡ä»¤åé¢çš„å†…å®¹å°½é‡æŒ‰ç…§å­—æ¯é¡ºåºæ’åºï¼Œæé«˜å¯è¯»æ€§ã€‚")])])]),e._v(" "),t("p",[e._v("ä¾‹å¦‚ï¼Œåœ¨å®˜æ–¹çš„ CentOS é•œåƒä¸‹å®‰è£…ä¸€äº›è½¯ä»¶ï¼Œä¸€ä¸ªå»ºè®®çš„ Dockerfile æŒ‡ä»¤å¦‚ä¸‹ï¼š")]),e._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("FROM centos:7\nRUN yum install -y automake \\\n                   curl \\\n                   python \\\n                   vim\n")])]),e._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[e._v("1")]),t("br"),t("span",{staticClass:"line-number"},[e._v("2")]),t("br"),t("span",{staticClass:"line-number"},[e._v("3")]),t("br"),t("span",{staticClass:"line-number"},[e._v("4")]),t("br"),t("span",{staticClass:"line-number"},[e._v("5")]),t("br")])]),t("p",[t("strong",[e._v("ï¼ˆ2ï¼‰CMD å’Œ ENTRYPOINT")])]),e._v(" "),t("p",[e._v("â€‹\t"),t("strong",[e._v("CMDå’ŒENTRYPOINTæŒ‡ä»¤éƒ½æ˜¯å®¹å™¨è¿è¡Œçš„å‘½ä»¤å…¥å£")]),e._v("ã€‚")]),e._v(" "),t("p",[e._v("è¿™ä¸¤ä¸ªæŒ‡ä»¤çš„ç›¸åŒä¹‹å¤„ï¼ŒCMDå’ŒENTRYPOINTçš„åŸºæœ¬ä½¿ç”¨æ ¼å¼åˆ†ä¸ºä¸¤ç§ã€‚")]),e._v(" "),t("ul",[t("li",[t("p",[e._v('ç¬¬ä¸€ç§ä¸ºCMD/ENTRYPOINT["command" , "param"]ã€‚è¿™ç§æ ¼å¼æ˜¯ä½¿ç”¨ '),t("strong",[e._v("Linux çš„exec")]),e._v("å®ç°çš„ï¼Œ ä¸€èˆ¬ç§°ä¸ºexecæ¨¡å¼ï¼Œè¿™ç§ä¹¦å†™æ ¼å¼ä¸ºCMD/ENTRYPOINTåé¢è·Ÿ json æ•°ç»„ï¼Œä¹Ÿæ˜¯Docker æ¨èçš„ä½¿ç”¨æ ¼å¼ã€‚")])]),e._v(" "),t("li",[t("p",[e._v("å¦å¤–ä¸€ç§æ ¼å¼ä¸ºCMD/ENTRYPOINTcommand param ï¼Œè¿™ç§æ ¼å¼æ˜¯"),t("strong",[e._v("åŸºäº shell å®ç°")]),e._v("çš„ï¼Œ é€šå¸¸ç§°ä¸ºshellæ¨¡å¼ã€‚å½“ä½¿ç”¨shellæ¨¡å¼æ—¶ï¼ŒDocker ä¼šä»¥ /bin/sh -c command çš„æ–¹å¼æ‰§è¡Œå‘½ä»¤ã€‚")])])]),e._v(" "),t("p",[e._v("åŒºåˆ«ï¼š")]),e._v(" "),t("ul",[t("li",[e._v("Dockerfile ä¸­å¦‚æœä½¿ç”¨äº†ENTRYPOINTæŒ‡ä»¤ï¼Œå¯åŠ¨ Docker å®¹å™¨æ—¶éœ€è¦ä½¿ç”¨ --entrypoint å‚æ•°æ‰èƒ½è¦†ç›– Dockerfile ä¸­çš„ENTRYPOINTæŒ‡ä»¤")]),e._v(" "),t("li",[e._v("ä½¿ç”¨CMDè®¾ç½®çš„å‘½ä»¤åˆ™å¯ä»¥è¢«docker runåé¢çš„å‚æ•°ç›´æ¥è¦†ç›–ã€‚")]),e._v(" "),t("li",[e._v("ENTRYPOINTæŒ‡ä»¤å¯ä»¥ç»“åˆCMDæŒ‡ä»¤ä½¿ç”¨ï¼Œä¹Ÿå¯ä»¥å•ç‹¬ä½¿ç”¨ï¼Œè€ŒCMDæŒ‡ä»¤åªèƒ½å•ç‹¬ä½¿ç”¨ã€‚")])]),e._v(" "),t("p",[e._v("ä¾‹å¦‚ï¼šdockerfilerå¦‚ä¸‹å®šä¹‰")]),e._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v('FROM python:3\n\nCMD ["python3", "hello.py"]\n')])]),e._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[e._v("1")]),t("br"),t("span",{staticClass:"line-number"},[e._v("2")]),t("br"),t("span",{staticClass:"line-number"},[e._v("3")]),t("br")])]),t("p",[e._v("æ‰§è¡Œå¯åŠ¨å‘½ä»¤ä¸ºï¼šdocker run python3 xxx.py -itd xxxxï¼Œè¡¨ç¤ºä¸‹æ‹‰python:3é•œåƒï¼Œå¹¶æ‰§è¡Œpython3 xxx.pyå‘½ä»¤ï¼Œå¦‚æœç”¨docker run -itd xxxxï¼Œè¡¨ç¤ºä¸‹æ‹‰python:3é•œåƒï¼Œå¹¶æ‰§è¡ŒDockerfileä¸­å®šä¹‰çš„python3 hello.pyå‘½ä»¤ã€‚")]),e._v(" "),t("h4",{attrs:{id:"ç–‘é—®ğŸ¤”ï¸"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#ç–‘é—®ğŸ¤”ï¸"}},[e._v("#")]),e._v(" "),t("strong",[e._v("ç–‘é—®ğŸ¤”ï¸ï¼š")])]),e._v(" "),t("p",[e._v("ä»€ä¹ˆæ—¶å€™åº”è¯¥ä½¿ç”¨ENTRYPOINT,ä»€ä¹ˆæ—¶å€™ä½¿ç”¨CMDå‘¢ï¼Ÿ")]),e._v(" "),t("p",[e._v("å¦‚æœä½ å¸Œæœ›ä½ çš„é•œåƒè¶³å¤Ÿçµæ´»ï¼Œæ¨èä½¿ç”¨CMDæŒ‡ä»¤ã€‚å¦‚æœä½ çš„é•œåƒåªæ‰§è¡Œå•ä¸€çš„å…·ä½“ç¨‹åºï¼Œå¹¶ä¸”ä¸å¸Œæœ›ç”¨æˆ·åœ¨æ‰§è¡Œdocker runæ—¶è¦†ç›–é»˜è®¤ç¨‹åºï¼Œå»ºè®®ä½¿ç”¨ENTRYPOINTã€‚")]),e._v(" "),t("p",[e._v("æœ€åå†å¼ºè°ƒä¸€ä¸‹ï¼Œæ— è®ºä½¿ç”¨CMDè¿˜æ˜¯ENTRYPOINTï¼Œéƒ½"),t("strong",[e._v("å°½é‡ä½¿ç”¨execæ¨¡å¼")]),e._v("ã€‚")]),e._v(" "),t("p",[e._v("å¦‚æœ"),t("strong",[e._v("åœ¨Dockerfileä¸­æœ‰å¤šæ¡CMDæŒ‡ä»¤ï¼Œé‚£ä¹ˆæ°¸è¿œåªä¼šæ‰§è¡Œæœ€åä¸€æ¡CMDæŒ‡ä»¤ï¼Œæœ€å¥½å°†æ‰§è¡Œçš„å‘½ä»¤é€šè¿‡&&è¿›è¡Œè¿æ¥ã€‚")])]),e._v(" "),t("p",[t("strong",[e._v("ï¼ˆ3ï¼‰ADD å’Œ COPY")]),e._v("\nâ€‹\tADDå’ŒCOPYæŒ‡ä»¤åŠŸèƒ½ç±»ä¼¼ï¼Œéƒ½æ˜¯ä»å¤–éƒ¨å¾€å®¹å™¨å†…æ·»åŠ æ–‡ä»¶ã€‚")]),e._v(" "),t("ul",[t("li",[e._v("COPYæŒ‡ä»¤åªæ”¯æŒ"),t("strong",[e._v("åŸºæœ¬çš„æ–‡ä»¶å’Œæ–‡ä»¶å¤¹")]),e._v("æ‹·è´åŠŸèƒ½")]),e._v(" "),t("li",[e._v("ADDåˆ™æ”¯æŒæ›´å¤š"),t("strong",[e._v("æ–‡ä»¶æ¥æºç±»å‹")]),e._v("ï¼Œæ¯”å¦‚è‡ªåŠ¨æå– tar åŒ…ï¼Œå¹¶ä¸”å¯ä»¥æ”¯æŒæºæ–‡ä»¶ä¸º URL æ ¼å¼ã€‚")])]),e._v(" "),t("p",[e._v("é‚£ä¹ˆåœ¨æ—¥å¸¸åº”ç”¨ä¸­ï¼Œæˆ‘ä»¬åº”è¯¥ä½¿ç”¨å“ªä¸ªå‘½ä»¤å‘å®¹å™¨é‡Œæ·»åŠ æ–‡ä»¶å‘¢ï¼Ÿæ—¢ç„¶ADDæŒ‡ä»¤æ”¯æŒçš„åŠŸèƒ½æ›´å¤šï¼Œå½“ç„¶åº”è¯¥ä½¿ç”¨ADDæŒ‡ä»¤äº†ã€‚ç„¶è€Œäº‹å®æ°æ°ç›¸åï¼Œå…¶å®æ›´æ¨èä½¿ç”¨COPYæŒ‡ä»¤ï¼Œå› ä¸ºCOPYæŒ‡ä»¤æ›´åŠ é€æ˜ï¼Œä»…æ”¯æŒæœ¬åœ°æ–‡ä»¶å‘å®¹å™¨æ‹·è´ï¼Œè€Œä¸”ä½¿ç”¨COPYæŒ‡ä»¤å¯ä»¥æ›´å¥½åœ°åˆ©ç”¨æ„å»ºç¼“å­˜ï¼Œæœ‰æ•ˆå‡å°é•œåƒä½“ç§¯ã€‚")]),e._v(" "),t("p",[e._v("å¦‚æœä½¿ç”¨ADDå‘å®¹å™¨ä¸­æ·»åŠ  URL æ–‡ä»¶æ—¶ï¼Œè¯·å°½é‡è€ƒè™‘ä½¿ç”¨å…¶ä»–æ–¹å¼æ›¿ä»£ã€‚ä¾‹å¦‚ä½ æƒ³è¦åœ¨å®¹å™¨ä¸­å®‰è£… memtesterï¼ˆä¸€ç§å†…å­˜å‹æµ‹å·¥å…·ï¼‰ï¼Œä½ åº”è¯¥é¿å…ä½¿ç”¨ä»¥ä¸‹æ ¼å¼ï¼š")]),e._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("ADD http://pyropus.ca/software/memtester/old-versions/memtester-4.3.0.tar.gz /tmp/\nRUN tar -xvf /tmp/memtester-4.3.0.tar.gz -C /tmp\nRUN make -C /tmp/memtester-4.3.0 && make -C /tmp/memtester-4.3.0 install\n")])]),e._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[e._v("1")]),t("br"),t("span",{staticClass:"line-number"},[e._v("2")]),t("br"),t("span",{staticClass:"line-number"},[e._v("3")]),t("br")])]),t("p",[e._v("ä¸‹é¢æ˜¯æ¨èå†™æ³•ï¼š")]),e._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("RUN wget -O /tmp/memtester-4.3.0.tar.gz http://pyropus.ca/software/memtester/old-versions/memtester-4.3.0.tar.gz \\\n&& tar -xvf /tmp/memtester-4.3.0.tar.gz -C /tmp \\\n&& make -C /tmp/memtester-4.3.0 && make -C /tmp/memtester-4.3.0 install\n")])]),e._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[e._v("1")]),t("br"),t("span",{staticClass:"line-number"},[e._v("2")]),t("br"),t("span",{staticClass:"line-number"},[e._v("3")]),t("br")])]),t("p",[t("strong",[e._v("ï¼ˆ4ï¼‰WORKDIR")]),e._v("\nâ€‹\tWORKDIRï¼š æŒ‡å®šå®¹å™¨çš„å·¥ä½œè·¯å¾„ï¼Œåº”è¯¥å°½é‡é¿å…ä½¿ç”¨ RUN cd /work/path && do some work è¿™æ ·çš„æŒ‡ä»¤ã€‚")])])}),[],!1,null,null,null);s.default=a.exports}}]);