(window.webpackJsonp=window.webpackJsonp||[]).push([[59],{366:function(s,l,t){"use strict";t.r(l);var a=t(0),i=Object(a.a)({},(function(){var s=this,l=s.$createElement,t=s._self._c||l;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("article",{staticClass:"baidu_pl"},[t("div",{staticClass:"article_content clearfix",attrs:{id:"article_content"}},[t("link",{attrs:{rel:"stylesheet",href:"https://csdnimg.cn/release/blogv2/dist/mdeditor/css/editerView/ck_htmledit_views-a405391f94.css"}}),s._v(" "),t("div",{staticClass:"htmledit_views",attrs:{id:"content_views"}},[t("p",[t("strong",[s._v("生活加油:摘一句子:")])]),s._v(" "),t("p",[t("strong",[s._v("“我希望自己能写这样的诗。我希望自己也是一颗星星。如果我会发光，就不必害怕黑暗。如果我自己是那么美好，那么一切恐惧就可以烟消云散。于是我开始存下了一点希望—如果我能做到，那么我就战胜了寂寞的命运。”")])]),s._v(" "),t("p",[s._v("                                                                                 -----------------------------王小波《我在荒岛上迎接黎明》")]),s._v(" "),t("h1",[t("a",{attrs:{name:"t0"}}),t("a",{attrs:{name:"t0"}}),s._v("初步嘗試一下：")]),s._v(" "),t("p",[t("strong",[s._v("新建项目,导入依赖")])]),s._v(" "),t("pre",{staticClass:"has",attrs:{name:"code"}},[t("code",{staticClass:"language-java hljs"},[t("ol",{staticClass:"hljs-ln"},[t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"1"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[t("span",{staticClass:"hljs-keyword"},[s._v("package")]),s._v(" com.liruilong;")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"2"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v(" ")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"3"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[t("span",{staticClass:"hljs-keyword"},[s._v("import")]),s._v(" org.springframework.web.bind.annotation.GetMapping;")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"4"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v(" ")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"5"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[t("span",{staticClass:"hljs-keyword"},[s._v("import")]),s._v(" org.springframework.web.bind.annotation.RestController;")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"6"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v(" ")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"7"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[t("span",{staticClass:"hljs-comment"},[t("span",{staticClass:"hljs-comment"},[s._v("/**")])])])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"8"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[t("span",{staticClass:"hljs-comment"},[s._v(" * "),t("span",{staticClass:"hljs-doctag"},[s._v("@Description")]),s._v(" : security学习")])])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"9"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[t("span",{staticClass:"hljs-comment"},[s._v(" * "),t("span",{staticClass:"hljs-doctag"},[s._v("@Author")]),s._v(": Liruilong")])])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"10"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[t("span",{staticClass:"hljs-comment"},[s._v(" * "),t("span",{staticClass:"hljs-doctag"},[s._v("@Date")]),s._v(": 2019/12/24 12:54")])])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"11"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[t("span",{staticClass:"hljs-comment"},[s._v(" */")])])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"12"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[t("span",{staticClass:"hljs-meta"},[s._v("@RestController")])])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"13"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[t("span",{staticClass:"hljs-keyword"},[s._v("public")]),s._v(" "),t("span",{staticClass:"hljs-class"},[t("span",{staticClass:"hljs-keyword"},[s._v("class")]),s._v(" "),t("span",{staticClass:"hljs-title"},[s._v("HollerController")]),s._v(" ")]),s._v("{")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"14"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("    "),t("span",{staticClass:"hljs-meta"},[s._v('@GetMapping("/hello")')])])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"15"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("    "),t("span",{staticClass:"hljs-function"},[t("span",{staticClass:"hljs-keyword"},[s._v("public")]),s._v(" String "),t("span",{staticClass:"hljs-title"},[s._v("hello")]),t("span",{staticClass:"hljs-params"},[s._v("()")])]),s._v("{")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"16"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("        "),t("span",{staticClass:"hljs-keyword"},[s._v("return")]),s._v(" "),t("span",{staticClass:"hljs-string"},[s._v('"hello Security"')]),s._v(";")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"17"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("    }")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"18"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("}")])])])])]),t("div",{staticClass:"hljs-button {2}",attrs:{"data-title":"复制","data-report-click":'{"spm":"1001.2101.3001.4259"}',onclick:"hljs.copyCode(event)"}})]),s._v(" "),t("p",[t("strong",[s._v("访问接口:请求都被保护起来,用户名默认user,密码为控制台打印的字符串.")])]),s._v(" "),t("p",[t("img",{staticClass:"has",attrs:{alt:"",height:"336",src:"https://img-blog.csdnimg.cn/2019122413045146.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3Nhbmhld3V5YW5n,size_16,color_FFFFFF,t_70",width:"801"}})]),s._v(" "),t("p",[t("img",{staticClass:"has",attrs:{alt:"",height:"279",src:"https://img-blog.csdnimg.cn/20191224130732495.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3Nhbmhld3V5YW5n,size_16,color_FFFFFF,t_70",width:"747"}})]),s._v(" "),t("p",[t("strong",[s._v(" 手工配置用户名和密码:")])]),s._v(" "),t("p",[s._v("一,配置类方式:")]),s._v(" "),t("pre",{staticClass:"has",attrs:{name:"code"}},[t("code",{staticClass:"language-java hljs"},[t("ol",{staticClass:"hljs-ln"},[t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"1"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[t("span",{staticClass:"hljs-keyword"},[s._v("package")]),s._v(" com.liruilong.securityl.demo;")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"2"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v(" ")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"3"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[t("span",{staticClass:"hljs-keyword"},[s._v("import")]),s._v(" org.springframework.context.annotation.Bean;")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"4"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[t("span",{staticClass:"hljs-keyword"},[s._v("import")]),s._v(" org.springframework.context.annotation.Configuration;")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"5"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[t("span",{staticClass:"hljs-keyword"},[s._v("import")]),s._v(" org.springframework.security.config.annotation.authentication.builders.AuthenticationManagerBuilder;")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"6"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[t("span",{staticClass:"hljs-keyword"},[s._v("import")]),s._v(" org.springframework.security.config.annotation.web.builders.HttpSecurity;")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"7"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[t("span",{staticClass:"hljs-keyword"},[s._v("import")]),s._v(" org.springframework.security.config.annotation.web.configuration.WebSecurityConfigurerAdapter;")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"8"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[t("span",{staticClass:"hljs-keyword"},[s._v("import")]),s._v(" org.springframework.security.crypto.password.NoOpPasswordEncoder;")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"9"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[t("span",{staticClass:"hljs-keyword"},[s._v("import")]),s._v(" org.springframework.security.crypto.password.PasswordEncoder;")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"10"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v(" ")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"11"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[t("span",{staticClass:"hljs-comment"},[t("span",{staticClass:"hljs-comment"},[s._v("/**")])])])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"12"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[t("span",{staticClass:"hljs-comment"},[s._v(" * "),t("span",{staticClass:"hljs-doctag"},[s._v("@Description")]),s._v(" : security配置")])])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"13"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[t("span",{staticClass:"hljs-comment"},[s._v(" * "),t("span",{staticClass:"hljs-doctag"},[s._v("@Author")]),s._v(": Liruilong")])])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"14"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[t("span",{staticClass:"hljs-comment"},[s._v(" * "),t("span",{staticClass:"hljs-doctag"},[s._v("@Date")]),s._v(": 2019/12/24 13:13")])])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"15"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[t("span",{staticClass:"hljs-comment"},[s._v(" */")])])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"16"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[t("span",{staticClass:"hljs-meta"},[s._v("@Configuration")])])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"17"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[t("span",{staticClass:"hljs-keyword"},[s._v("public")]),s._v(" "),t("span",{staticClass:"hljs-class"},[t("span",{staticClass:"hljs-keyword"},[s._v("class")]),s._v(" "),t("span",{staticClass:"hljs-title"},[s._v("config")]),s._v(" "),t("span",{staticClass:"hljs-keyword"},[s._v("extends")]),s._v(" "),t("span",{staticClass:"hljs-title"},[s._v("WebSecurityConfigurerAdapter")]),s._v(" ")]),s._v("{")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"18"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v(" ")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"19"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("    "),t("span",{staticClass:"hljs-comment"},[t("span",{staticClass:"hljs-comment"},[s._v("/**")])])])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"20"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[t("span",{staticClass:"hljs-comment"},[s._v("     * "),t("span",{staticClass:"hljs-doctag"},[s._v("@Author")]),s._v(" Liruilong ")])])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"21"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[t("span",{staticClass:"hljs-comment"},[s._v("     * "),t("span",{staticClass:"hljs-doctag"},[s._v("@Description")]),s._v(" 密码处理,告诉系统不加密访问")])])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"22"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[t("span",{staticClass:"hljs-comment"},[s._v("     * "),t("span",{staticClass:"hljs-doctag"},[s._v("@Date")]),s._v(" 13:20 2019/12/24")])])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"23"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[t("span",{staticClass:"hljs-comment"},[s._v("     * "),t("span",{staticClass:"hljs-doctag"},[s._v("@Param")]),s._v(" [] ")])])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"24"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[t("span",{staticClass:"hljs-comment"},[s._v("     * "),t("span",{staticClass:"hljs-doctag"},[s._v("@return")]),s._v(" org.springframework.security.crypto.password.PasswordEncoder ")])])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"25"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[t("span",{staticClass:"hljs-comment"},[s._v("     **/")])])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"26"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("    ")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"27"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("    "),t("span",{staticClass:"hljs-meta"},[s._v("@Bean")])])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"28"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("    "),t("span",{staticClass:"hljs-function"},[s._v("PasswordEncoder "),t("span",{staticClass:"hljs-title"},[s._v("passwordEncoder")]),t("span",{staticClass:"hljs-params"},[s._v("()")])]),s._v("{")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"29"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("        "),t("span",{staticClass:"hljs-keyword"},[s._v("return")]),s._v(" NoOpPasswordEncoder.getInstance();")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"30"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("    }")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"31"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("    ")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"32"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("    "),t("span",{staticClass:"hljs-comment"},[t("span",{staticClass:"hljs-comment"},[s._v("/**")])])])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"33"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[t("span",{staticClass:"hljs-comment"},[s._v("     * "),t("span",{staticClass:"hljs-doctag"},[s._v("@Author")]),s._v(" Liruilong ")])])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"34"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[t("span",{staticClass:"hljs-comment"},[s._v("     * "),t("span",{staticClass:"hljs-doctag"},[s._v("@Description")]),s._v(" 配置用户名密码.密码必须加密")])])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"35"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[t("span",{staticClass:"hljs-comment"},[s._v("     * "),t("span",{staticClass:"hljs-doctag"},[s._v("@Date")]),s._v(" 13:16 2019/12/24")])])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"36"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[t("span",{staticClass:"hljs-comment"},[s._v("     * "),t("span",{staticClass:"hljs-doctag"},[s._v("@Param")]),s._v(" [auth] ")])])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"37"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[t("span",{staticClass:"hljs-comment"},[s._v("     * "),t("span",{staticClass:"hljs-doctag"},[s._v("@return")]),s._v(" void ")])])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"38"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[t("span",{staticClass:"hljs-comment"},[s._v("     **/")])])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"39"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("    ")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"40"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("    "),t("span",{staticClass:"hljs-meta"},[s._v("@Override")])])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"41"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("    "),t("span",{staticClass:"hljs-function"},[t("span",{staticClass:"hljs-keyword"},[s._v("protected")]),s._v(" "),t("span",{staticClass:"hljs-keyword"},[s._v("void")]),s._v(" "),t("span",{staticClass:"hljs-title"},[s._v("configure")]),t("span",{staticClass:"hljs-params"},[s._v("(AuthenticationManagerBuilder auth)")]),s._v(" "),t("span",{staticClass:"hljs-keyword"},[s._v("throws")]),s._v(" Exception ")]),s._v("{")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"42"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("        auth.inMemoryAuthentication()")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"43"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("                .withUser("),t("span",{staticClass:"hljs-string"},[s._v('"liruilong"')]),s._v(").password("),t("span",{staticClass:"hljs-string"},[s._v('"123"')]),s._v(").roles("),t("span",{staticClass:"hljs-string"},[s._v('"admin"')]),s._v(")")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"44"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("                .and()")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"45"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("                .withUser("),t("span",{staticClass:"hljs-string"},[s._v('"liruilongs"')]),s._v(").password("),t("span",{staticClass:"hljs-string"},[s._v('"123"')]),s._v(").roles("),t("span",{staticClass:"hljs-string"},[s._v('"user"')]),s._v(");")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"46"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v(" ")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"47"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("    }")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"48"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v(" ")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"49"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("}")])])])])]),t("div",{staticClass:"hljs-button {2}",attrs:{"data-title":"复制","data-report-click":'{"spm":"1001.2101.3001.4259"}',onclick:"hljs.copyCode(event)"}})]),s._v(" "),t("p",[t("strong",[s._v("配置文件方式:")])]),s._v(" "),t("p",[t("img",{staticClass:"has",attrs:{alt:"",height:"169",src:"https://img-blog.csdnimg.cn/2019122413304389.png",width:"523"}})]),s._v(" "),t("p",[s._v(" ")]),s._v(" "),t("h2",[t("a",{attrs:{name:"t1"}}),t("a",{attrs:{name:"t1"}}),s._v("HttpScurity的简单配置:")]),s._v(" "),t("div",[t("strong",[t("span",{staticStyle:{color:"#434343"}},[s._v("基于内存的认证，")]),t("span",{staticStyle:{color:"#5b5b5b"}},[s._v("以自定义类继承自 w")]),t("span",{staticStyle:{color:"#434343"}},[s._v("ebSecurityConfigurerAdapter ")]),t("span",{staticStyle:{color:"#434343"}},[s._v("，进行自定义配置。")])])]),s._v(" "),t("pre",{staticClass:"has",attrs:{name:"code"}},[t("code",{staticClass:"language-java hljs"},[t("ol",{staticClass:"hljs-ln"},[t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"1"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[t("span",{staticClass:"hljs-keyword"},[s._v("package")]),s._v(" com.liruilong.securityl.demo;")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"2"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v(" ")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"3"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v(" ")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"4"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[t("span",{staticClass:"hljs-comment"},[t("span",{staticClass:"hljs-comment"},[s._v("/**")])])])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"5"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[t("span",{staticClass:"hljs-comment"},[s._v(" * "),t("span",{staticClass:"hljs-doctag"},[s._v("@Description")]),s._v(" : security配置")])])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"6"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[t("span",{staticClass:"hljs-comment"},[s._v(" * "),t("span",{staticClass:"hljs-doctag"},[s._v("@Author")]),s._v(": Liruilong")])])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"7"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[t("span",{staticClass:"hljs-comment"},[s._v(" * "),t("span",{staticClass:"hljs-doctag"},[s._v("@Date")]),s._v(": 2019/12/24 13:13")])])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"8"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[t("span",{staticClass:"hljs-comment"},[s._v(" */")])])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"9"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[t("span",{staticClass:"hljs-meta"},[s._v("@Configuration")])])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"10"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[t("span",{staticClass:"hljs-keyword"},[s._v("public")]),s._v(" "),t("span",{staticClass:"hljs-class"},[t("span",{staticClass:"hljs-keyword"},[s._v("class")]),s._v(" "),t("span",{staticClass:"hljs-title"},[s._v("config")]),s._v(" "),t("span",{staticClass:"hljs-keyword"},[s._v("extends")]),s._v(" "),t("span",{staticClass:"hljs-title"},[s._v("WebSecurityConfigurerAdapter")]),s._v(" ")]),s._v("{")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"11"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v(" ")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"12"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("    "),t("span",{staticClass:"hljs-comment"},[t("span",{staticClass:"hljs-comment"},[s._v("/**")])])])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"13"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[t("span",{staticClass:"hljs-comment"},[s._v("     * "),t("span",{staticClass:"hljs-doctag"},[s._v("@Author")]),s._v(" Liruilong ")])])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"14"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[t("span",{staticClass:"hljs-comment"},[s._v("     * "),t("span",{staticClass:"hljs-doctag"},[s._v("@Description")]),s._v(" 密码处理,告诉系统不加密访问")])])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"15"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[t("span",{staticClass:"hljs-comment"},[s._v("     * "),t("span",{staticClass:"hljs-doctag"},[s._v("@Date")]),s._v(" 13:20 2019/12/24")])])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"16"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[t("span",{staticClass:"hljs-comment"},[s._v("     * "),t("span",{staticClass:"hljs-doctag"},[s._v("@Param")]),s._v(" [] ")])])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"17"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[t("span",{staticClass:"hljs-comment"},[s._v("     * "),t("span",{staticClass:"hljs-doctag"},[s._v("@return")]),s._v(" org.springframework.security.crypto.password.PasswordEncoder ")])])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"18"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[t("span",{staticClass:"hljs-comment"},[s._v("     **/")])])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"19"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("    ")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"20"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("    "),t("span",{staticClass:"hljs-meta"},[s._v("@Bean")])])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"21"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("    "),t("span",{staticClass:"hljs-function"},[s._v("PasswordEncoder "),t("span",{staticClass:"hljs-title"},[s._v("passwordEncoder")]),t("span",{staticClass:"hljs-params"},[s._v("()")])]),s._v("{")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"22"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("        "),t("span",{staticClass:"hljs-keyword"},[s._v("return")]),s._v(" NoOpPasswordEncoder.getInstance();")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"23"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("    }")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"24"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("    ")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"25"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("    "),t("span",{staticClass:"hljs-comment"},[t("span",{staticClass:"hljs-comment"},[s._v("/**")])])])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"26"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[t("span",{staticClass:"hljs-comment"},[s._v("     * "),t("span",{staticClass:"hljs-doctag"},[s._v("@Author")]),s._v(" Liruilong ")])])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"27"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[t("span",{staticClass:"hljs-comment"},[s._v("     * "),t("span",{staticClass:"hljs-doctag"},[s._v("@Description")]),s._v(" 配置用户名密码.密码必须加密")])])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"28"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[t("span",{staticClass:"hljs-comment"},[s._v("     * "),t("span",{staticClass:"hljs-doctag"},[s._v("@Date")]),s._v(" 13:16 2019/12/24")])])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"29"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[t("span",{staticClass:"hljs-comment"},[s._v("     * "),t("span",{staticClass:"hljs-doctag"},[s._v("@Param")]),s._v(" [auth] ")])])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"30"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[t("span",{staticClass:"hljs-comment"},[s._v("     * "),t("span",{staticClass:"hljs-doctag"},[s._v("@return")]),s._v(" void ")])])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"31"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[t("span",{staticClass:"hljs-comment"},[s._v("     **/")])])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"32"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("    ")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"33"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("    "),t("span",{staticClass:"hljs-meta"},[s._v("@Override")])])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"34"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("    "),t("span",{staticClass:"hljs-function"},[t("span",{staticClass:"hljs-keyword"},[s._v("protected")]),s._v(" "),t("span",{staticClass:"hljs-keyword"},[s._v("void")]),s._v(" "),t("span",{staticClass:"hljs-title"},[s._v("configure")]),t("span",{staticClass:"hljs-params"},[s._v("(AuthenticationManagerBuilder auth)")]),s._v(" "),t("span",{staticClass:"hljs-keyword"},[s._v("throws")]),s._v(" Exception ")]),s._v("{")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"35"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("        auth.inMemoryAuthentication()")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"36"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("                .withUser("),t("span",{staticClass:"hljs-string"},[s._v('"liruilong"')]),s._v(").password("),t("span",{staticClass:"hljs-string"},[s._v('"123"')]),s._v(").roles("),t("span",{staticClass:"hljs-string"},[s._v('"admin"')]),s._v(")")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"37"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("                .and()")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"38"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("                .withUser("),t("span",{staticClass:"hljs-string"},[s._v('"liruilongs"')]),s._v(").password("),t("span",{staticClass:"hljs-string"},[s._v('"123"')]),s._v(").roles("),t("span",{staticClass:"hljs-string"},[s._v('"user"')]),s._v(");")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"39"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v(" ")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"40"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("    }")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"41"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v(" ")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"42"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("    "),t("span",{staticClass:"hljs-meta"},[s._v("@Override")])])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"43"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("    "),t("span",{staticClass:"hljs-function"},[t("span",{staticClass:"hljs-keyword"},[s._v("protected")]),s._v(" "),t("span",{staticClass:"hljs-keyword"},[s._v("void")]),s._v(" "),t("span",{staticClass:"hljs-title"},[s._v("configure")]),t("span",{staticClass:"hljs-params"},[s._v("(HttpSecurity http)")]),s._v(" "),t("span",{staticClass:"hljs-keyword"},[s._v("throws")]),s._v(" Exception ")]),s._v("{")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"44"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("        "),t("span",{staticClass:"hljs-comment"},[s._v("//开启配置，开启 HtψSecurity 的配直")])])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"45"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("        http.authorizeRequests()")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"46"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("                "),t("span",{staticClass:"hljs-comment"},[s._v("// 指定admin角色可以访问该路径")])])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"47"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("                .antMatchers("),t("span",{staticClass:"hljs-string"},[s._v('"/admin/**"')]),s._v(").hasRole("),t("span",{staticClass:"hljs-string"},[s._v('"admin"')]),s._v(")")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"48"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("                "),t("span",{staticClass:"hljs-comment"},[s._v("// 指定admin和user可以访问该路径")])])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"49"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("                .antMatchers("),t("span",{staticClass:"hljs-string"},[s._v('"/user/**"')]),s._v(").hasAnyRole("),t("span",{staticClass:"hljs-string"},[s._v('"admin"')]),s._v(", "),t("span",{staticClass:"hljs-string"},[s._v('"user"')]),s._v(")")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"50"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("                "),t("span",{staticClass:"hljs-comment"},[s._v("// 剩下的请求登录之后就可以访问")])])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"51"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("                .anyRequest().authenticated()")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"52"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("                .and()")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"53"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("                "),t("span",{staticClass:"hljs-comment"},[s._v("// 表单登录的url,请求地址")])])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"54"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("                .formLogin()")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"55"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("                .loginProcessingUrl("),t("span",{staticClass:"hljs-string"},[s._v('"/dolog"')]),s._v(")")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"56"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("                .permitAll()")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"57"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("                .and()")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"58"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("                "),t("span",{staticClass:"hljs-comment"},[s._v("// 关闭csrf")])])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"59"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("                .csrf().disable();")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"60"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v(" ")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"61"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("    }")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"62"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("}")])])])])]),t("div",{staticClass:"hljs-button {2}",attrs:{"data-title":"复制","data-report-click":'{"spm":"1001.2101.3001.4259"}',onclick:"hljs.copyCode(event)"}})]),s._v(" "),t("h3",[t("a",{attrs:{name:"t2"}}),t("a",{attrs:{name:"t2"}}),s._v("表单登录的详细配置:")]),s._v(" "),t("pre",{staticClass:"has",attrs:{name:"code"}},[t("code",{staticClass:"language-java hljs"},[t("ol",{staticClass:"hljs-ln",staticStyle:{width:"1652px"}},[t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"1"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v(" ")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"2"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v(" ")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"3"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("    "),t("span",{staticClass:"hljs-meta"},[s._v("@Override")])])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"4"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("    "),t("span",{staticClass:"hljs-function"},[t("span",{staticClass:"hljs-keyword"},[s._v("protected")]),s._v(" "),t("span",{staticClass:"hljs-keyword"},[s._v("void")]),s._v(" "),t("span",{staticClass:"hljs-title"},[s._v("configure")]),t("span",{staticClass:"hljs-params"},[s._v("(HttpSecurity http)")]),s._v(" "),t("span",{staticClass:"hljs-keyword"},[s._v("throws")]),s._v(" Exception ")]),s._v("{")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"5"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("        "),t("span",{staticClass:"hljs-comment"},[s._v("//开启配置")])])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"6"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("        http.authorizeRequests()")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"7"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("                "),t("span",{staticClass:"hljs-comment"},[s._v("// 指定admin角色可以访问该路径")])])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"8"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("                .antMatchers("),t("span",{staticClass:"hljs-string"},[s._v('"/admin/**"')]),s._v(").hasRole("),t("span",{staticClass:"hljs-string"},[s._v('"admin"')]),s._v(")")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"9"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("                "),t("span",{staticClass:"hljs-comment"},[s._v("// 指定admin和user可以访问该路径")])])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"10"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("                .antMatchers("),t("span",{staticClass:"hljs-string"},[s._v('"/user/**"')]),s._v(").hasAnyRole("),t("span",{staticClass:"hljs-string"},[s._v('"admin"')]),s._v(", "),t("span",{staticClass:"hljs-string"},[s._v('"user"')]),s._v(")")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"11"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("                "),t("span",{staticClass:"hljs-comment"},[s._v("// 剩下的请求登录之后就可以访问")])])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"12"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("                .anyRequest().authenticated()")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"13"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("                .and()")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"14"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("                "),t("span",{staticClass:"hljs-comment"},[s._v("// 表单登录的url,请求地址")])])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"15"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("                .formLogin()")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"16"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("                "),t("span",{staticClass:"hljs-comment"},[s._v("// url,请求地址")])])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"17"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("                .loginProcessingUrl("),t("span",{staticClass:"hljs-string"},[s._v('"/dolog"')]),s._v(")")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"18"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("                "),t("span",{staticClass:"hljs-comment"},[s._v("// 登录页面")])])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"19"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("                .loginPage("),t("span",{staticClass:"hljs-string"},[s._v('"login"')]),s._v(")")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"20"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("                "),t("span",{staticClass:"hljs-comment"},[s._v("// 修改默认的键,默认为username和password")])])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"21"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("                .usernameParameter("),t("span",{staticClass:"hljs-string"},[s._v('"uname"')]),s._v(")")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"22"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("                .passwordParameter("),t("span",{staticClass:"hljs-string"},[s._v('"passwd"')]),s._v(")")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"23"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("                "),t("span",{staticClass:"hljs-comment"},[s._v("// 前后端分离,登录成功的处理")])])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"24"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("                .successHandler("),t("span",{staticClass:"hljs-keyword"},[s._v("new")]),s._v(" AuthenticationSuccessHandler() {")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"25"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("                    "),t("span",{staticClass:"hljs-meta"},[s._v("@Override")])])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"26"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("                    "),t("span",{staticClass:"hljs-function"},[t("span",{staticClass:"hljs-keyword"},[s._v("public")]),s._v(" "),t("span",{staticClass:"hljs-keyword"},[s._v("void")]),s._v(" "),t("span",{staticClass:"hljs-title"},[s._v("onAuthenticationSuccess")]),t("span",{staticClass:"hljs-params"},[s._v("(HttpServletRequest httpServletRequest, HttpServletResponse httpServletResponse, Authentication authentication)")]),s._v(" "),t("span",{staticClass:"hljs-keyword"},[s._v("throws")]),s._v(" IOException, ServletException ")]),s._v("{")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"27"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("                        "),t("span",{staticClass:"hljs-comment"},[s._v("//authentication里保存了登录成功的用户信息")])])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"28"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("                        httpServletResponse.setContentType("),t("span",{staticClass:"hljs-string"},[s._v('"application/json;charset=utf-8"')]),s._v(");")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"29"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("                        PrintWriter out = httpServletResponse.getWriter();")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"30"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("                        Map<String, Object> map = "),t("span",{staticClass:"hljs-keyword"},[s._v("new")]),s._v(" HashMap<>();")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"31"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("                        map.put("),t("span",{staticClass:"hljs-string"},[s._v('"status"')]),s._v(", "),t("span",{staticClass:"hljs-number"},[s._v("200")]),s._v(");")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"32"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("                        "),t("span",{staticClass:"hljs-comment"},[s._v("// 登录成功的用户信息")])])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"33"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("                        map.put("),t("span",{staticClass:"hljs-string"},[s._v('"mes"')]),s._v(", authentication.getPrincipal());")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"34"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("                        "),t("span",{staticClass:"hljs-comment"},[s._v("// 返回一个json")])])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"35"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("                        out.write("),t("span",{staticClass:"hljs-keyword"},[s._v("new")]),s._v(" ObjectMapper().writeValueAsString(map));")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"36"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("                        out.flush();")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"37"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("                        out.close();")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"38"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("                    }")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"39"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("                })")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"40"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("                 "),t("span",{staticClass:"hljs-comment"},[s._v("//前后端不分,页面跳转")])])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"41"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("                .successForwardUrl("),t("span",{staticClass:"hljs-string"},[s._v('"成功跳转"')]),s._v(")")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"42"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("                "),t("span",{staticClass:"hljs-comment"},[s._v("//登录失败的处理")])])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"43"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("                .failureHandler("),t("span",{staticClass:"hljs-keyword"},[s._v("new")]),s._v(" AuthenticationFailureHandler() {")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"44"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("                    "),t("span",{staticClass:"hljs-meta"},[s._v("@Override")])])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"45"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("                    "),t("span",{staticClass:"hljs-function"},[t("span",{staticClass:"hljs-keyword"},[s._v("public")]),s._v(" "),t("span",{staticClass:"hljs-keyword"},[s._v("void")]),s._v(" "),t("span",{staticClass:"hljs-title"},[s._v("onAuthenticationFailure")]),t("span",{staticClass:"hljs-params"},[s._v("(HttpServletRequest httpServletRequest, HttpServletResponse httpServletResponse, AuthenticationException e)")]),s._v(" "),t("span",{staticClass:"hljs-keyword"},[s._v("throws")]),s._v(" IOException, ServletException ")]),s._v("{")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"46"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("                        httpServletResponse.setContentType("),t("span",{staticClass:"hljs-string"},[s._v('"application/json;charset=utf-8"')]),s._v(");")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"47"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("                        PrintWriter out = httpServletResponse.getWriter();")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"48"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("                        Map<String, Object> map = "),t("span",{staticClass:"hljs-keyword"},[s._v("new")]),s._v(" HashMap<>();")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"49"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("                        map.put("),t("span",{staticClass:"hljs-string"},[s._v('"status"')]),s._v(", "),t("span",{staticClass:"hljs-number"},[s._v("401")]),s._v(");")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"50"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("                        "),t("span",{staticClass:"hljs-keyword"},[s._v("if")]),s._v(" (e "),t("span",{staticClass:"hljs-keyword"},[s._v("instanceof")]),s._v(" LockedException){")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"51"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("                            map.put("),t("span",{staticClass:"hljs-string"},[s._v('"msg"')]),s._v(","),t("span",{staticClass:"hljs-string"},[s._v('"账户被锁定请联系管理员!"')]),s._v(");")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"52"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("                        }"),t("span",{staticClass:"hljs-keyword"},[s._v("else")]),s._v(" "),t("span",{staticClass:"hljs-keyword"},[s._v("if")]),s._v("(e "),t("span",{staticClass:"hljs-keyword"},[s._v("instanceof")]),s._v(" CredentialsExpiredException){")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"53"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("                            map.put("),t("span",{staticClass:"hljs-string"},[s._v('"msg"')]),s._v(","),t("span",{staticClass:"hljs-string"},[s._v('"密码过期请联系管理员!"')]),s._v(");")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"54"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("                        }"),t("span",{staticClass:"hljs-keyword"},[s._v("else")]),s._v(" "),t("span",{staticClass:"hljs-keyword"},[s._v("if")]),s._v(" (e "),t("span",{staticClass:"hljs-keyword"},[s._v("instanceof")]),s._v(" AccountExpiredException){")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"55"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("                            map.put("),t("span",{staticClass:"hljs-string"},[s._v('"msg"')]),s._v(","),t("span",{staticClass:"hljs-string"},[s._v('"账户过期请联系管理员!"')]),s._v(");")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"56"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("                        }"),t("span",{staticClass:"hljs-keyword"},[s._v("else")]),s._v(" "),t("span",{staticClass:"hljs-keyword"},[s._v("if")]),s._v("(e "),t("span",{staticClass:"hljs-keyword"},[s._v("instanceof")]),s._v(" DisabledException){")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"57"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("                            map.put("),t("span",{staticClass:"hljs-string"},[s._v('"msg"')]),s._v(","),t("span",{staticClass:"hljs-string"},[s._v('"账户被禁用请联系管理员!"')]),s._v(");")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"58"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("                        }"),t("span",{staticClass:"hljs-keyword"},[s._v("else")]),s._v(" "),t("span",{staticClass:"hljs-keyword"},[s._v("if")]),s._v(" (e "),t("span",{staticClass:"hljs-keyword"},[s._v("instanceof")]),s._v(" BadCredentialsException){")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"59"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("                            map.put("),t("span",{staticClass:"hljs-string"},[s._v('"msg"')]),s._v(","),t("span",{staticClass:"hljs-string"},[s._v('"用户名密码输入错误,请重新输入!"')]),s._v(");")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"60"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("                        }")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"61"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("                        out.write("),t("span",{staticClass:"hljs-keyword"},[s._v("new")]),s._v(" ObjectMapper().writeValueAsString(map));")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"62"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("                        out.flush();")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"63"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("                        out.close();")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"64"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("                    }")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"65"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("                })")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"66"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("                "),t("span",{staticClass:"hljs-comment"},[s._v("// 前后端不分跳转")])])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"67"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("                .failureForwardUrl("),t("span",{staticClass:"hljs-string"},[s._v('"失败跳转"')]),s._v(")")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"68"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("                .permitAll()")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"69"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("                .and()")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"70"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("                "),t("span",{staticClass:"hljs-comment"},[s._v("// 关闭csrf")])])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"71"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("                .csrf().disable();")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"72"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v(" ")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"73"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v(" ")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"74"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v(" ")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"75"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("    }")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"76"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("}")])])])])]),t("div",{staticClass:"hljs-button {2}",attrs:{"data-title":"复制","data-report-click":'{"spm":"1001.2101.3001.4259"}',onclick:"hljs.copyCode(event)"}})]),s._v(" "),t("p",[s._v(" "),t("strong",[s._v('登录接口为 "/login”，即可以直接调用“／login”接口，发起一个 POST 请求进行登录，登录参数中用户 名必须命名为 usemam巳，密码必须命名为 password，配置了 loginProcessingUrl 接口主要方便或者移动端调用登录接口 。最后还配置了 permitAll，表示和登录相关的接口都不需要认 证即可访问。 ')])]),s._v(" "),t("p",[t("strong",[s._v("anonymous() 允许匿名用户访问"),t("br"),s._v(" permitAll() 无条件允许访问")])]),s._v(" "),t("h3",[t("a",{attrs:{name:"t3"}}),t("a",{attrs:{name:"t3"}}),s._v("注销登录的配置:")]),s._v(" "),t("pre",{staticClass:"has",attrs:{name:"code"}},[t("code",{staticClass:"language-java hljs"},[t("ol",{staticClass:"hljs-ln",staticStyle:{width:"1652px"}},[t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"1"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[t("span",{staticClass:"hljs-meta"},[s._v("@Override")])])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"2"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("    "),t("span",{staticClass:"hljs-function"},[t("span",{staticClass:"hljs-keyword"},[s._v("protected")]),s._v(" "),t("span",{staticClass:"hljs-keyword"},[s._v("void")]),s._v(" "),t("span",{staticClass:"hljs-title"},[s._v("configure")]),t("span",{staticClass:"hljs-params"},[s._v("(HttpSecurity http)")]),s._v(" "),t("span",{staticClass:"hljs-keyword"},[s._v("throws")]),s._v(" Exception ")]),s._v("{")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"3"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("        "),t("span",{staticClass:"hljs-comment"},[s._v("//开启配置")])])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"4"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("        http.authorizeRequests()")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"5"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("                "),t("span",{staticClass:"hljs-comment"},[s._v("// 指定admin角色可以访问该路径")])])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"6"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("                .antMatchers("),t("span",{staticClass:"hljs-string"},[s._v('"/admin/**"')]),s._v(").hasRole("),t("span",{staticClass:"hljs-string"},[s._v('"admin"')]),s._v(")")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"7"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("                "),t("span",{staticClass:"hljs-comment"},[s._v("// 指定admin和user可以访问该路径")])])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"8"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("                .antMatchers("),t("span",{staticClass:"hljs-string"},[s._v('"/user/**"')]),s._v(").hasAnyRole("),t("span",{staticClass:"hljs-string"},[s._v('"admin"')]),s._v(", "),t("span",{staticClass:"hljs-string"},[s._v('"user"')]),s._v(")")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"9"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("                "),t("span",{staticClass:"hljs-comment"},[s._v("// 剩下的请求登录之后就可以访问")])])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"10"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("                .anyRequest().authenticated()")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"11"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("                .and()")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"12"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("                "),t("span",{staticClass:"hljs-comment"},[s._v("// 表单登录的url,请求地址")])])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"13"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("                .formLogin()")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"14"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("                "),t("span",{staticClass:"hljs-comment"},[s._v("// url,请求地址")])])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"15"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("                .loginProcessingUrl("),t("span",{staticClass:"hljs-string"},[s._v('"/dolog"')]),s._v(")")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"16"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("                "),t("span",{staticClass:"hljs-comment"},[s._v("// 登录页面")])])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"17"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("                .loginPage("),t("span",{staticClass:"hljs-string"},[s._v('"login"')]),s._v(")")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"18"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("                "),t("span",{staticClass:"hljs-comment"},[s._v("// 修改默认的键,默认为username和password")])])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"19"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("                .usernameParameter("),t("span",{staticClass:"hljs-string"},[s._v('"uname"')]),s._v(")")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"20"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("                .passwordParameter("),t("span",{staticClass:"hljs-string"},[s._v('"passwd"')]),s._v(")")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"21"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("                "),t("span",{staticClass:"hljs-comment"},[s._v("// 前后端分离,登录成功的处理")])])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"22"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("                .successHandler("),t("span",{staticClass:"hljs-keyword"},[s._v("new")]),s._v(" AuthenticationSuccessHandler() {")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"23"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("                    "),t("span",{staticClass:"hljs-meta"},[s._v("@Override")])])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"24"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("                    "),t("span",{staticClass:"hljs-function"},[t("span",{staticClass:"hljs-keyword"},[s._v("public")]),s._v(" "),t("span",{staticClass:"hljs-keyword"},[s._v("void")]),s._v(" "),t("span",{staticClass:"hljs-title"},[s._v("onAuthenticationSuccess")]),t("span",{staticClass:"hljs-params"},[s._v("(HttpServletRequest httpServletRequest, HttpServletResponse httpServletResponse, Authentication authentication)")]),s._v(" "),t("span",{staticClass:"hljs-keyword"},[s._v("throws")]),s._v(" IOException, ServletException ")]),s._v("{")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"25"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("                        "),t("span",{staticClass:"hljs-comment"},[s._v("//authentication里保存了登录成功的用户信息")])])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"26"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("                        httpServletResponse.setContentType("),t("span",{staticClass:"hljs-string"},[s._v('"application/json;charset=utf-8"')]),s._v(");")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"27"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("                        PrintWriter out = httpServletResponse.getWriter();")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"28"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("                        Map<String, Object> map = "),t("span",{staticClass:"hljs-keyword"},[s._v("new")]),s._v(" HashMap<>();")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"29"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("                        map.put("),t("span",{staticClass:"hljs-string"},[s._v('"status"')]),s._v(", "),t("span",{staticClass:"hljs-number"},[s._v("200")]),s._v(");")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"30"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("                        "),t("span",{staticClass:"hljs-comment"},[s._v("// 登录成功的用户信息")])])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"31"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("                        map.put("),t("span",{staticClass:"hljs-string"},[s._v('"mes"')]),s._v(", authentication.getPrincipal());")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"32"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("                        "),t("span",{staticClass:"hljs-comment"},[s._v("// 返回一个json")])])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"33"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("                        out.write("),t("span",{staticClass:"hljs-keyword"},[s._v("new")]),s._v(" ObjectMapper().writeValueAsString(map));")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"34"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("                        out.flush();")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"35"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("                        out.close();")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"36"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("                    }")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"37"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("                })")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"38"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("                 "),t("span",{staticClass:"hljs-comment"},[s._v("//前后端不分,页面跳转")])])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"39"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("                .successForwardUrl("),t("span",{staticClass:"hljs-string"},[s._v('"成功跳转"')]),s._v(")")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"40"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("                "),t("span",{staticClass:"hljs-comment"},[s._v("//登录失败的处理")])])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"41"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("                .failureHandler("),t("span",{staticClass:"hljs-keyword"},[s._v("new")]),s._v(" AuthenticationFailureHandler() {")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"42"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("                    "),t("span",{staticClass:"hljs-meta"},[s._v("@Override")])])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"43"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("                    "),t("span",{staticClass:"hljs-function"},[t("span",{staticClass:"hljs-keyword"},[s._v("public")]),s._v(" "),t("span",{staticClass:"hljs-keyword"},[s._v("void")]),s._v(" "),t("span",{staticClass:"hljs-title"},[s._v("onAuthenticationFailure")]),t("span",{staticClass:"hljs-params"},[s._v("(HttpServletRequest httpServletRequest, HttpServletResponse httpServletResponse, AuthenticationException e)")]),s._v(" "),t("span",{staticClass:"hljs-keyword"},[s._v("throws")]),s._v(" IOException, ServletException ")]),s._v("{")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"44"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("                        httpServletResponse.setContentType("),t("span",{staticClass:"hljs-string"},[s._v('"application/json;charset=utf-8"')]),s._v(");")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"45"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("                        PrintWriter out = httpServletResponse.getWriter();")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"46"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("                        Map<String, Object> map = "),t("span",{staticClass:"hljs-keyword"},[s._v("new")]),s._v(" HashMap<>();")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"47"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("                        map.put("),t("span",{staticClass:"hljs-string"},[s._v('"status"')]),s._v(", "),t("span",{staticClass:"hljs-number"},[s._v("401")]),s._v(");")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"48"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("                        "),t("span",{staticClass:"hljs-keyword"},[s._v("if")]),s._v(" (e "),t("span",{staticClass:"hljs-keyword"},[s._v("instanceof")]),s._v(" LockedException){")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"49"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("                            map.put("),t("span",{staticClass:"hljs-string"},[s._v('"msg"')]),s._v(","),t("span",{staticClass:"hljs-string"},[s._v('"账户被锁定请联系管理员!"')]),s._v(");")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"50"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("                        }"),t("span",{staticClass:"hljs-keyword"},[s._v("else")]),s._v(" "),t("span",{staticClass:"hljs-keyword"},[s._v("if")]),s._v("(e "),t("span",{staticClass:"hljs-keyword"},[s._v("instanceof")]),s._v(" CredentialsExpiredException){")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"51"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("                            map.put("),t("span",{staticClass:"hljs-string"},[s._v('"msg"')]),s._v(","),t("span",{staticClass:"hljs-string"},[s._v('"密码过期请联系管理员!"')]),s._v(");")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"52"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("                        }"),t("span",{staticClass:"hljs-keyword"},[s._v("else")]),s._v(" "),t("span",{staticClass:"hljs-keyword"},[s._v("if")]),s._v(" (e "),t("span",{staticClass:"hljs-keyword"},[s._v("instanceof")]),s._v(" AccountExpiredException){")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"53"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("                            map.put("),t("span",{staticClass:"hljs-string"},[s._v('"msg"')]),s._v(","),t("span",{staticClass:"hljs-string"},[s._v('"账户过期请联系管理员!"')]),s._v(");")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"54"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("                        }"),t("span",{staticClass:"hljs-keyword"},[s._v("else")]),s._v(" "),t("span",{staticClass:"hljs-keyword"},[s._v("if")]),s._v("(e "),t("span",{staticClass:"hljs-keyword"},[s._v("instanceof")]),s._v(" DisabledException){")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"55"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("                            map.put("),t("span",{staticClass:"hljs-string"},[s._v('"msg"')]),s._v(","),t("span",{staticClass:"hljs-string"},[s._v('"账户被禁用请联系管理员!"')]),s._v(");")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"56"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("                        }"),t("span",{staticClass:"hljs-keyword"},[s._v("else")]),s._v(" "),t("span",{staticClass:"hljs-keyword"},[s._v("if")]),s._v(" (e "),t("span",{staticClass:"hljs-keyword"},[s._v("instanceof")]),s._v(" BadCredentialsException){")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"57"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("                            map.put("),t("span",{staticClass:"hljs-string"},[s._v('"msg"')]),s._v(","),t("span",{staticClass:"hljs-string"},[s._v('"用户名密码输入错误,请重新输入!"')]),s._v(");")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"58"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("                        }")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"59"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("                        out.write("),t("span",{staticClass:"hljs-keyword"},[s._v("new")]),s._v(" ObjectMapper().writeValueAsString(map));")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"60"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("                        out.flush();")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"61"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("                        out.close();")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"62"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("                    }")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"63"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("                })")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"64"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("                .failureForwardUrl("),t("span",{staticClass:"hljs-string"},[s._v('"失败跳转"')]),s._v(")")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"65"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("                "),t("span",{staticClass:"hljs-comment"},[s._v("// 任何角色可以访问")])])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"66"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("                .permitAll()")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"67"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("                .and()")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"68"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("                .logout()")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"69"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("                "),t("span",{staticClass:"hljs-comment"},[s._v("// 注销请求路劲")])])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"70"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("                .logoutUrl("),t("span",{staticClass:"hljs-string"},[s._v('"/logout"')]),s._v(")")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"71"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("                "),t("span",{staticClass:"hljs-comment"},[s._v("// 注销成功的处理")])])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"72"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("                .logoutSuccessHandler("),t("span",{staticClass:"hljs-keyword"},[s._v("new")]),s._v(" LogoutSuccessHandler() {")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"73"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("                    "),t("span",{staticClass:"hljs-meta"},[s._v("@Override")])])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"74"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("                    "),t("span",{staticClass:"hljs-function"},[t("span",{staticClass:"hljs-keyword"},[s._v("public")]),s._v(" "),t("span",{staticClass:"hljs-keyword"},[s._v("void")]),s._v(" "),t("span",{staticClass:"hljs-title"},[s._v("onLogoutSuccess")]),t("span",{staticClass:"hljs-params"},[s._v("(HttpServletRequest httpServletRequest, HttpServletResponse httpServletResponse, Authentication authentication)")]),s._v(" "),t("span",{staticClass:"hljs-keyword"},[s._v("throws")]),s._v(" IOException, ServletException ")]),s._v("{")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"75"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("                        httpServletResponse.setContentType("),t("span",{staticClass:"hljs-string"},[s._v('"application/json;charset=utf-8"')]),s._v(");")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"76"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("                        PrintWriter out = httpServletResponse.getWriter();")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"77"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("                        out.write("),t("span",{staticClass:"hljs-keyword"},[s._v("new")]),s._v(" ObjectMapper().writeValueAsString("),t("span",{staticClass:"hljs-keyword"},[s._v("new")]),s._v(" ObjectMapper().writeValueAsString("),t("span",{staticClass:"hljs-string"},[s._v('"注销成功!"')]),s._v(")));")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"78"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("                        out.flush();")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"79"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("                        out.close();")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"80"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("                    }")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"81"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("                })")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"82"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("                .logoutSuccessUrl("),t("span",{staticClass:"hljs-string"},[s._v('"注销成功的跳转"')]),s._v(")")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"83"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("                .and()")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"84"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("                "),t("span",{staticClass:"hljs-comment"},[s._v("// 关闭csrf")])])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"85"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("                .csrf().disable();")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"86"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v(" ")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"87"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v(" ")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"88"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v(" ")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"89"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("    }")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"90"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("}")])])])])]),t("div",{staticClass:"hljs-button {2}",attrs:{"data-title":"复制","data-report-click":'{"spm":"1001.2101.3001.4259"}',onclick:"hljs.copyCode(event)"}})]),s._v(" "),t("h3",[t("a",{attrs:{name:"t4"}}),t("a",{attrs:{name:"t4"}}),s._v("多HttpSecurity配置： ")]),s._v(" "),t("p",[t("strong",[s._v("config 不需要继承 WebSecurityConfigurerAdapter, 在 MultiHttpSecurityConfig 中创建静态内部类继承 WebSecurityConfigurerAdapter 即可，静态 内部类上添加＠Configuration 注解和＠Order 注解，＠Order 注解表示该配直的优先级，数字 越小优先级越大，未加＠Order 注解的配直优先级最小。 ")])]),s._v(" "),t("pre",{staticClass:"has",attrs:{name:"code"}},[t("code",{staticClass:"language-java hljs"},[t("ol",{staticClass:"hljs-ln"},[t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"1"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v(" ")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"2"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[t("span",{staticClass:"hljs-comment"},[t("span",{staticClass:"hljs-comment"},[s._v("/**")])])])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"3"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[t("span",{staticClass:"hljs-comment"},[s._v(" * "),t("span",{staticClass:"hljs-doctag"},[s._v("@Description")]),s._v(" : 多HttpSecurity配置")])])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"4"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[t("span",{staticClass:"hljs-comment"},[s._v(" * "),t("span",{staticClass:"hljs-doctag"},[s._v("@Author")]),s._v(": Liruilong")])])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"5"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[t("span",{staticClass:"hljs-comment"},[s._v(" * "),t("span",{staticClass:"hljs-doctag"},[s._v("@Date")]),s._v(": 2019/12/24 17:01")])])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"6"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[t("span",{staticClass:"hljs-comment"},[s._v(" */")])])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"7"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v(" ")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"8"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[t("span",{staticClass:"hljs-meta"},[s._v("@Configuration")])])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"9"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[t("span",{staticClass:"hljs-keyword"},[s._v("public")]),s._v(" "),t("span",{staticClass:"hljs-class"},[t("span",{staticClass:"hljs-keyword"},[s._v("class")]),s._v(" "),t("span",{staticClass:"hljs-title"},[s._v("MultiHttpSecurity")]),s._v(" ")]),s._v("{")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"10"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("    "),t("span",{staticClass:"hljs-meta"},[s._v("@Bean")])])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"11"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("    "),t("span",{staticClass:"hljs-function"},[s._v("PasswordEncoder "),t("span",{staticClass:"hljs-title"},[s._v("passwordEncoder")]),t("span",{staticClass:"hljs-params"},[s._v("()")])]),s._v("{")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"12"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("        "),t("span",{staticClass:"hljs-keyword"},[s._v("return")]),s._v(" NoOpPasswordEncoder.getInstance();")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"13"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("    }")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"14"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("    "),t("span",{staticClass:"hljs-meta"},[s._v("@Autowired")])])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"15"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("    "),t("span",{staticClass:"hljs-function"},[t("span",{staticClass:"hljs-keyword"},[s._v("protected")]),s._v(" "),t("span",{staticClass:"hljs-keyword"},[s._v("void")]),s._v(" "),t("span",{staticClass:"hljs-title"},[s._v("configure")]),t("span",{staticClass:"hljs-params"},[s._v("(AuthenticationManagerBuilder auth)")]),s._v(" "),t("span",{staticClass:"hljs-keyword"},[s._v("throws")]),s._v(" Exception ")]),s._v("{")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"16"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("        auth.inMemoryAuthentication()")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"17"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("                .withUser("),t("span",{staticClass:"hljs-string"},[s._v('"liruilong"')]),s._v(").password("),t("span",{staticClass:"hljs-string"},[s._v('"123"')]),s._v(").roles("),t("span",{staticClass:"hljs-string"},[s._v('"admin"')]),s._v(")")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"18"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("                .and()")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"19"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("                .withUser("),t("span",{staticClass:"hljs-string"},[s._v('"liruilongs"')]),s._v(").password("),t("span",{staticClass:"hljs-string"},[s._v('"123"')]),s._v(").roles("),t("span",{staticClass:"hljs-string"},[s._v('"user"')]),s._v(");")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"20"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("    }")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"21"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("    "),t("span",{staticClass:"hljs-meta"},[s._v("@Configuration")])])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"22"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("    "),t("span",{staticClass:"hljs-meta"},[s._v("@Order(1)")])])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"23"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("    "),t("span",{staticClass:"hljs-keyword"},[s._v("public")]),s._v(" "),t("span",{staticClass:"hljs-keyword"},[s._v("static")]),s._v(" "),t("span",{staticClass:"hljs-class"},[t("span",{staticClass:"hljs-keyword"},[s._v("class")]),s._v(" "),t("span",{staticClass:"hljs-title"},[s._v("AdminSecurityConfig")]),s._v(" "),t("span",{staticClass:"hljs-keyword"},[s._v("extends")]),s._v(" "),t("span",{staticClass:"hljs-title"},[s._v("WebSecurityConfigurerAdapter")])]),s._v("{")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"24"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("        "),t("span",{staticClass:"hljs-meta"},[s._v("@Override")])])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"25"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("        "),t("span",{staticClass:"hljs-function"},[t("span",{staticClass:"hljs-keyword"},[s._v("protected")]),s._v(" "),t("span",{staticClass:"hljs-keyword"},[s._v("void")]),s._v(" "),t("span",{staticClass:"hljs-title"},[s._v("configure")]),t("span",{staticClass:"hljs-params"},[s._v("(HttpSecurity http)")]),s._v(" "),t("span",{staticClass:"hljs-keyword"},[s._v("throws")]),s._v(" Exception ")]),s._v("{")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"26"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("            "),t("span",{staticClass:"hljs-comment"},[s._v("//开启配置")])])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"27"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("            http.antMatcher("),t("span",{staticClass:"hljs-string"},[s._v('"/admin/**"')]),s._v(").authorizeRequests().anyRequest().hasAnyRole("),t("span",{staticClass:"hljs-string"},[s._v('"admin"')]),s._v(")")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"28"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("        }")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"29"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("    }")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"30"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("    "),t("span",{staticClass:"hljs-meta"},[s._v("@Configuration")])])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"31"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("    "),t("span",{staticClass:"hljs-keyword"},[s._v("public")]),s._v(" "),t("span",{staticClass:"hljs-keyword"},[s._v("static")]),s._v(" "),t("span",{staticClass:"hljs-class"},[t("span",{staticClass:"hljs-keyword"},[s._v("class")]),s._v(" "),t("span",{staticClass:"hljs-title"},[s._v("OtherSecurityConfig")]),s._v(" "),t("span",{staticClass:"hljs-keyword"},[s._v("extends")]),s._v(" "),t("span",{staticClass:"hljs-title"},[s._v("WebSecurityConfigurerAdapter")])]),s._v("{")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"32"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("        "),t("span",{staticClass:"hljs-meta"},[s._v("@Override")])])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"33"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("        "),t("span",{staticClass:"hljs-function"},[t("span",{staticClass:"hljs-keyword"},[s._v("protected")]),s._v(" "),t("span",{staticClass:"hljs-keyword"},[s._v("void")]),s._v(" "),t("span",{staticClass:"hljs-title"},[s._v("configure")]),t("span",{staticClass:"hljs-params"},[s._v("(HttpSecurity http)")]),s._v(" "),t("span",{staticClass:"hljs-keyword"},[s._v("throws")]),s._v(" Exception ")]),s._v("{")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"34"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("            "),t("span",{staticClass:"hljs-comment"},[s._v("//开启配置")])])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"35"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("            http.authorizeRequests().anyRequest().authenticated()")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"36"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("                    .and()")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"37"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("                    .formLogin()")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"38"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("                    .failureForwardUrl("),t("span",{staticClass:"hljs-string"},[s._v('"/dolog"')]),s._v(")")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"39"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("                    .permitAll()")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"40"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("                    .and()")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"41"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("                    .csrf().disable();")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"42"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("        }")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"43"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("    }")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"44"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("}")])])])])]),t("div",{staticClass:"hljs-button {2}",attrs:{"data-title":"复制","data-report-click":'{"spm":"1001.2101.3001.4259"}',onclick:"hljs.copyCode(event)"}})]),s._v(" "),t("h3",[t("a",{attrs:{name:"t5"}}),t("a",{attrs:{name:"t5"}}),s._v("密码加盐处理:")]),s._v(" "),t("p",[t("strong",[s._v("通过BCryptPasswordEncoder生成密码密文,")])]),s._v(" "),t("pre",{staticClass:"has",attrs:{name:"code"}},[t("code",{staticClass:"language-java hljs"},[t("ol",{staticClass:"hljs-ln"},[t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"1"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[t("span",{staticClass:"hljs-function"},[t("span",{staticClass:"hljs-keyword"},[s._v("void")]),s._v(" "),t("span",{staticClass:"hljs-title"},[s._v("contextLoads")]),t("span",{staticClass:"hljs-params"},[s._v("()")]),s._v(" ")]),s._v("{")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"2"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("        "),t("span",{staticClass:"hljs-keyword"},[s._v("for")]),s._v(" ("),t("span",{staticClass:"hljs-keyword"},[s._v("int")]),s._v(" i = "),t("span",{staticClass:"hljs-number"},[s._v("0")]),s._v("; i < "),t("span",{staticClass:"hljs-number"},[s._v("0")]),s._v("; i++){")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"3"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("            BCryptPasswordEncoder encoder = "),t("span",{staticClass:"hljs-keyword"},[s._v("new")]),s._v(" BCryptPasswordEncoder();")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"4"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("            System.out.println(encoder.encode("),t("span",{staticClass:"hljs-string"},[s._v('"123"')]),s._v("));")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"5"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("        }")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"6"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("    }")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"7"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v(" ")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"8"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v(" ")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"9"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v(" "),t("span",{staticClass:"hljs-meta"},[s._v("@Bean")])])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"10"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("    "),t("span",{staticClass:"hljs-function"},[s._v("PasswordEncoder "),t("span",{staticClass:"hljs-title"},[s._v("passwordEncoder")]),t("span",{staticClass:"hljs-params"},[s._v("()")])]),s._v("{")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"11"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("        "),t("span",{staticClass:"hljs-keyword"},[s._v("return")]),s._v(" NoOpPasswordEncoder.getInstance();")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"12"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("    }")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"13"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v(" ")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"14"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("替换为")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"15"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[t("span",{staticClass:"hljs-meta"},[s._v("@Bean")])])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"16"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("    "),t("span",{staticClass:"hljs-function"},[s._v("PasswordEncoder "),t("span",{staticClass:"hljs-title"},[s._v("passwordEncoder")]),t("span",{staticClass:"hljs-params"},[s._v("()")])]),s._v("{")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"17"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("        "),t("span",{staticClass:"hljs-keyword"},[s._v("return")]),s._v(" "),t("span",{staticClass:"hljs-keyword"},[s._v("new")]),s._v(" BCryptPasswordEncoder();")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"18"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("    }")])])])])]),t("div",{staticClass:"hljs-button {2}",attrs:{"data-title":"复制","data-report-click":'{"spm":"1001.2101.3001.4259"}',onclick:"hljs.copyCode(event)"}})]),s._v(" "),t("h3",[t("a",{attrs:{name:"t6"}}),t("a",{attrs:{name:"t6"}}),s._v("方法安全:")]),s._v(" "),t("p",[t("strong",[s._v("即该方法加一个权限,明确该方法是什么角色可以调用的.")])]),s._v(" "),t("p",[t("strong",[s._v("开发者也可以通过注解来灵活地配置方法安全，要 使用相关注解，首先要通过＠EnableGloba!MethodSecurity 注解开启基于注解的安全配置：")]),t("br"),s._v("  ")]),s._v(" "),t("pre",{staticClass:"has",attrs:{name:"code"}},[t("code",{staticClass:"language-java hljs"},[t("ol",{staticClass:"hljs-ln",staticStyle:{width:"1047px"}},[t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"1"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[t("span",{staticClass:"hljs-meta"},[s._v("@Configuration")])])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"2"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[t("span",{staticClass:"hljs-comment"},[s._v("//用于解锁注解。")])])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"3"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[t("span",{staticClass:"hljs-meta"},[s._v("@EnableGlobalMethodSecurity(prePostEnabled = true,securedEnabled = true)")])])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"4"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[t("span",{staticClass:"hljs-keyword"},[s._v("public")]),s._v(" "),t("span",{staticClass:"hljs-class"},[t("span",{staticClass:"hljs-keyword"},[s._v("class")]),s._v(" "),t("span",{staticClass:"hljs-title"},[s._v("MultiHttpSecurityConfig")]),s._v(" ")]),s._v("{")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"5"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v(" ")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"6"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("    "),t("span",{staticClass:"hljs-meta"},[s._v("@Bean")])])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"7"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("    "),t("span",{staticClass:"hljs-function"},[s._v("PasswordEncoder "),t("span",{staticClass:"hljs-title"},[s._v("passwordEncoder")]),t("span",{staticClass:"hljs-params"},[s._v("()")]),s._v(" ")]),s._v("{")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"8"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("        "),t("span",{staticClass:"hljs-keyword"},[s._v("return")]),s._v(" "),t("span",{staticClass:"hljs-keyword"},[s._v("new")]),s._v(" BCryptPasswordEncoder();")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"9"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("    }")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"10"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v(" ")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"11"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("    "),t("span",{staticClass:"hljs-meta"},[s._v("@Autowired")])])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"12"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("    "),t("span",{staticClass:"hljs-function"},[t("span",{staticClass:"hljs-keyword"},[s._v("protected")]),s._v(" "),t("span",{staticClass:"hljs-keyword"},[s._v("void")]),s._v(" "),t("span",{staticClass:"hljs-title"},[s._v("configure")]),t("span",{staticClass:"hljs-params"},[s._v("(AuthenticationManagerBuilder auth)")]),s._v(" "),t("span",{staticClass:"hljs-keyword"},[s._v("throws")]),s._v(" Exception ")]),s._v("{")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"13"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("        auth.inMemoryAuthentication()")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"14"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("                .withUser("),t("span",{staticClass:"hljs-string"},[s._v('"javaboy"')]),s._v(").password("),t("span",{staticClass:"hljs-string"},[s._v('"$2a$10$G3kVAJHvmRrr6sOj.j4xpO2Dsxl5EG8rHycPHFWyi9UMIhtdSH15u"')]),s._v(").roles("),t("span",{staticClass:"hljs-string"},[s._v('"admin"')]),s._v(")")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"15"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("                .and()")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"16"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("                .withUser("),t("span",{staticClass:"hljs-string"},[s._v('"江南一点雨"')]),s._v(").password("),t("span",{staticClass:"hljs-string"},[s._v('"$2a$10$kWjG2GxWhm/2tN2ZBpi7bexXjUneIKFxIAaMYJzY7WcziZLCD4PZS"')]),s._v(").roles("),t("span",{staticClass:"hljs-string"},[s._v('"user"')]),s._v(");")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"17"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("    }")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"18"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v(" ")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"19"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("    "),t("span",{staticClass:"hljs-meta"},[s._v("@Configuration")])])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"20"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("    "),t("span",{staticClass:"hljs-meta"},[s._v("@Order(1)")])])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"21"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("    "),t("span",{staticClass:"hljs-keyword"},[s._v("public")]),s._v(" "),t("span",{staticClass:"hljs-keyword"},[s._v("static")]),s._v(" "),t("span",{staticClass:"hljs-class"},[t("span",{staticClass:"hljs-keyword"},[s._v("class")]),s._v(" "),t("span",{staticClass:"hljs-title"},[s._v("AdminSecurityConfig")]),s._v(" "),t("span",{staticClass:"hljs-keyword"},[s._v("extends")]),s._v(" "),t("span",{staticClass:"hljs-title"},[s._v("WebSecurityConfigurerAdapter")])]),s._v("{")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"22"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("        "),t("span",{staticClass:"hljs-meta"},[s._v("@Override")])])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"23"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("        "),t("span",{staticClass:"hljs-function"},[t("span",{staticClass:"hljs-keyword"},[s._v("protected")]),s._v(" "),t("span",{staticClass:"hljs-keyword"},[s._v("void")]),s._v(" "),t("span",{staticClass:"hljs-title"},[s._v("configure")]),t("span",{staticClass:"hljs-params"},[s._v("(HttpSecurity http)")]),s._v(" "),t("span",{staticClass:"hljs-keyword"},[s._v("throws")]),s._v(" Exception ")]),s._v("{")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"24"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("            http.antMatcher("),t("span",{staticClass:"hljs-string"},[s._v('"/admin/**"')]),s._v(").authorizeRequests().anyRequest().hasAnyRole("),t("span",{staticClass:"hljs-string"},[s._v('"admin"')]),s._v(");")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"25"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("        }")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"26"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("    }")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"27"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v(" ")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"28"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("    "),t("span",{staticClass:"hljs-meta"},[s._v("@Configuration")])])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"29"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("    "),t("span",{staticClass:"hljs-keyword"},[s._v("public")]),s._v(" "),t("span",{staticClass:"hljs-keyword"},[s._v("static")]),s._v(" "),t("span",{staticClass:"hljs-class"},[t("span",{staticClass:"hljs-keyword"},[s._v("class")]),s._v(" "),t("span",{staticClass:"hljs-title"},[s._v("OtherSecurityConfig")]),s._v(" "),t("span",{staticClass:"hljs-keyword"},[s._v("extends")]),s._v(" "),t("span",{staticClass:"hljs-title"},[s._v("WebSecurityConfigurerAdapter")])]),s._v("{")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"30"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("        "),t("span",{staticClass:"hljs-meta"},[s._v("@Override")])])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"31"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("        "),t("span",{staticClass:"hljs-function"},[t("span",{staticClass:"hljs-keyword"},[s._v("protected")]),s._v(" "),t("span",{staticClass:"hljs-keyword"},[s._v("void")]),s._v(" "),t("span",{staticClass:"hljs-title"},[s._v("configure")]),t("span",{staticClass:"hljs-params"},[s._v("(HttpSecurity http)")]),s._v(" "),t("span",{staticClass:"hljs-keyword"},[s._v("throws")]),s._v(" Exception ")]),s._v("{")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"32"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("            http.authorizeRequests().anyRequest().authenticated()")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"33"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("                    .and()")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"34"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("                    .formLogin()")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"35"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("                    .loginProcessingUrl("),t("span",{staticClass:"hljs-string"},[s._v('"/doLogin"')]),s._v(")")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"36"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("                    .permitAll()")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"37"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("                    .and()")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"38"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("                    .csrf().disable();")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"39"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("        }")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"40"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("    }")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"41"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("}")])])])])]),t("div",{staticClass:"hljs-button {2}",attrs:{"data-title":"复制","data-report-click":'{"spm":"1001.2101.3001.4259"}',onclick:"hljs.copyCode(event)"}})]),s._v(" "),t("p",[s._v(" ")]),s._v(" "),t("pre",{staticClass:"has",attrs:{name:"code"}},[t("code",{staticClass:"language-java hljs"},[t("ol",{staticClass:"hljs-ln"},[t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"1"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[t("span",{staticClass:"hljs-keyword"},[s._v("package")]),s._v(" com.liruilong.securityl.demo.service;")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"2"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v(" ")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"3"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[t("span",{staticClass:"hljs-keyword"},[s._v("import")]),s._v(" org.springframework.security.access.annotation.Secured;")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"4"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[t("span",{staticClass:"hljs-keyword"},[s._v("import")]),s._v(" org.springframework.security.access.prepost.PreAuthorize;")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"5"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[t("span",{staticClass:"hljs-keyword"},[s._v("import")]),s._v(" org.springframework.stereotype.Service;")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"6"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v(" ")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"7"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[t("span",{staticClass:"hljs-comment"},[t("span",{staticClass:"hljs-comment"},[s._v("/**")])])])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"8"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[t("span",{staticClass:"hljs-comment"},[s._v(" * "),t("span",{staticClass:"hljs-doctag"},[s._v("@Description")]),s._v(" :")])])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"9"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[t("span",{staticClass:"hljs-comment"},[s._v(" * "),t("span",{staticClass:"hljs-doctag"},[s._v("@Author")]),s._v(": Liruilong")])])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"10"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[t("span",{staticClass:"hljs-comment"},[s._v(" * "),t("span",{staticClass:"hljs-doctag"},[s._v("@Date")]),s._v(": 2019/12/24 17:31")])])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"11"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[t("span",{staticClass:"hljs-comment"},[s._v(" */")])])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"12"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[t("span",{staticClass:"hljs-meta"},[s._v("@Service")])])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"13"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[t("span",{staticClass:"hljs-keyword"},[s._v("public")]),s._v(" "),t("span",{staticClass:"hljs-class"},[t("span",{staticClass:"hljs-keyword"},[s._v("class")]),s._v(" "),t("span",{staticClass:"hljs-title"},[s._v("userservlce")]),s._v(" ")]),s._v("{")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"14"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("    "),t("span",{staticClass:"hljs-comment"},[s._v("//")])])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"15"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("    "),t("span",{staticClass:"hljs-meta"},[s._v("@PreAuthorize(\"hasRole('admin')\")")])])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"16"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("    "),t("span",{staticClass:"hljs-function"},[t("span",{staticClass:"hljs-keyword"},[s._v("public")]),s._v(" String "),t("span",{staticClass:"hljs-title"},[s._v("admin")]),t("span",{staticClass:"hljs-params"},[s._v("()")])]),s._v("{")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"17"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("        "),t("span",{staticClass:"hljs-keyword"},[s._v("return")]),s._v(" "),t("span",{staticClass:"hljs-string"},[s._v('"hello admin"')]),s._v(";")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"18"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("    }")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"19"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("    "),t("span",{staticClass:"hljs-meta"},[s._v('@Secured("ROLB_user")')])])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"20"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("    "),t("span",{staticClass:"hljs-function"},[t("span",{staticClass:"hljs-keyword"},[s._v("public")]),s._v(" String "),t("span",{staticClass:"hljs-title"},[s._v("users")]),t("span",{staticClass:"hljs-params"},[s._v("()")])]),s._v("{")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"21"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("        "),t("span",{staticClass:"hljs-keyword"},[s._v("return")]),s._v(" "),t("span",{staticClass:"hljs-string"},[s._v('"hello user"')]),s._v(";")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"22"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("    }")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"23"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("    "),t("span",{staticClass:"hljs-meta"},[s._v("@PreAuthorize(\"hasAnyRole('admin','user')\")")])])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"24"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("    "),t("span",{staticClass:"hljs-function"},[t("span",{staticClass:"hljs-keyword"},[s._v("public")]),s._v(" String "),t("span",{staticClass:"hljs-title"},[s._v("hello")]),t("span",{staticClass:"hljs-params"},[s._v("()")])]),s._v("{")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"25"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("        "),t("span",{staticClass:"hljs-keyword"},[s._v("return")]),s._v(" "),t("span",{staticClass:"hljs-string"},[s._v('"hello hello"')]),s._v(";")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"26"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("    }")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"27"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("}")])])])])]),t("div",{staticClass:"hljs-button {2}",attrs:{"data-title":"复制","data-report-click":'{"spm":"1001.2101.3001.4259"}',onclick:"hljs.copyCode(event)"}})]),s._v(" "),t("p",[s._v("代码解释： •")]),s._v(" "),t("ul",[t("li",[t("strong",[s._v("@Secured(”ROLE_ AD MIN＂）注解表示访问该方法需要 ADMIN 角色，注意这里需要在角色前加一个前缀“ROLE ’")])]),t("li",[t("strong",[s._v("@PreAuthorize（”hasRole（’AD MIN’） and hasRole('DBA＇）”）注解表示访问该方法既需妥 ADMIN 角色又需要 DBA 角色。 •")])]),t("li",[t("strong",[s._v("@PreAuthorize(\"hasAnyRole（’ADMIN','DBA','USER’）”）表示访问该方法需要 ADMIN、 DBA 或 USER 角色。 ")])]),t("li",[t("strong",[s._v("•@PreAuthorize 和＠PostAuthorize 中都可以使用基于表达式的语法。")])])]),s._v(" "),t("h1",[t("a",{attrs:{name:"t7"}}),t("a",{attrs:{name:"t7"}}),s._v("基于数据库的认证")]),s._v(" "),t("h3",[t("a",{attrs:{name:"t8"}}),t("a",{attrs:{name:"t8"}}),s._v("动态配置权限")]),s._v(" "),t("ul",[t("li",[t("strong",[s._v("配置自定义权限拦截withObjectPostProcessor")]),s._v(" "),t("ul",[t("li",[t("img",{attrs:{alt:"",height:"319",src:"https://img-blog.csdnimg.cn/20200216114348376.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3Nhbmhld3V5YW5n,size_16,color_FFFFFF,t_70",width:"1200"}})])])]),t("li",[t("strong",[s._v("定义自定义拦截逻辑,获取有当前访问路径权限的所有角色,返回角色数组.")]),s._v(" "),t("ul",[t("li",[t("strong",[s._v("通过FilterlnvocationSecurityMetadataSource 接口中的 getAttributes 方法来确定一个请求需要哪些角色")])]),t("li",[t("img",{attrs:{alt:"",height:"765",src:"https://img-blog.csdnimg.cn/20200216114755243.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3Nhbmhld3V5YW5n,size_16,color_FFFFFF,t_70",width:"961"}})])])]),t("li",[t("strong",[s._v("自定义角色比对之后的逻辑.判断当前用户是否有访问角色.的权利,")]),s._v(" "),t("ul",[t("li",[t("strong",[t("span",{staticStyle:{color:"#f33b45"}},[s._v("自定义 AccessDecisionManager 并重写 decide 方法，decide有三个参数,当前登录用户的信息,请求对象,上一个getAttribute返回的角色数组.")])])]),t("li",[t("img",{attrs:{alt:"",height:"625",src:"https://img-blog.csdnimg.cn/20200216124415775.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3Nhbmhld3V5YW5n,size_16,color_FFFFFF,t_70",width:"979"}})])])])]),s._v(" "),t("h1",[t("a",{attrs:{name:"t9"}}),t("img",{staticClass:"has",attrs:{alt:"",height:"208",src:"https://img-blog.csdnimg.cn/20200213122344351.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3Nhbmhld3V5YW5n,size_16,color_FFFFFF,t_70",width:"705"}}),t("br"),t("img",{staticClass:"has",attrs:{alt:"",height:"518",src:"https://img-blog.csdnimg.cn/20200213121307187.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3Nhbmhld3V5YW5n,size_16,color_FFFFFF,t_70",width:"1200"}})]),s._v(" "),t("pre",{staticClass:"has",attrs:{name:"code"}},[t("code",{staticClass:"language-java hljs"},[t("ol",{staticClass:"hljs-ln hundred"},[t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"1"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[t("span",{staticClass:"hljs-keyword"},[s._v("package")]),s._v(" com.liruilong.hros.model;")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"2"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v(" ")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"3"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v(" ")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"4"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[t("span",{staticClass:"hljs-keyword"},[s._v("import")]),s._v(" com.fasterxml.jackson.annotation.JacksonInject;")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"5"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[t("span",{staticClass:"hljs-keyword"},[s._v("import")]),s._v(" com.fasterxml.jackson.annotation.JsonIgnore;")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"6"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[t("span",{staticClass:"hljs-keyword"},[s._v("import")]),s._v(" com.fasterxml.jackson.annotation.JsonIgnoreType;")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"7"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[t("span",{staticClass:"hljs-keyword"},[s._v("import")]),s._v(" org.springframework.security.core.GrantedAuthority;")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"8"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[t("span",{staticClass:"hljs-keyword"},[s._v("import")]),s._v(" org.springframework.security.core.authority.SimpleGrantedAuthority;")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"9"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[t("span",{staticClass:"hljs-keyword"},[s._v("import")]),s._v(" org.springframework.security.core.userdetails.UserDetails;")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"10"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v(" ")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"11"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[t("span",{staticClass:"hljs-keyword"},[s._v("import")]),s._v(" java.util.ArrayList;")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"12"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[t("span",{staticClass:"hljs-keyword"},[s._v("import")]),s._v(" java.util.Collection;")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"13"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[t("span",{staticClass:"hljs-keyword"},[s._v("import")]),s._v(" java.util.List;")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"14"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v(" ")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"15"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[t("span",{staticClass:"hljs-keyword"},[s._v("public")]),s._v(" "),t("span",{staticClass:"hljs-class"},[t("span",{staticClass:"hljs-keyword"},[s._v("class")]),s._v(" "),t("span",{staticClass:"hljs-title"},[s._v("Hr")]),s._v(" "),t("span",{staticClass:"hljs-keyword"},[s._v("implements")]),s._v(" "),t("span",{staticClass:"hljs-title"},[s._v("UserDetails")]),s._v(" ")]),s._v("{")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"16"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("    "),t("span",{staticClass:"hljs-keyword"},[s._v("private")]),s._v(" Integer id;")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"17"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v(" ")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"18"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("    "),t("span",{staticClass:"hljs-keyword"},[s._v("private")]),s._v(" String name;")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"19"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v(" ")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"20"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("    "),t("span",{staticClass:"hljs-keyword"},[s._v("private")]),s._v(" String phone;")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"21"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v(" ")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"22"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("    "),t("span",{staticClass:"hljs-keyword"},[s._v("private")]),s._v(" String telephone;")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"23"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v(" ")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"24"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("    "),t("span",{staticClass:"hljs-keyword"},[s._v("private")]),s._v(" String address;")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"25"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v(" ")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"26"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("    "),t("span",{staticClass:"hljs-keyword"},[s._v("private")]),s._v(" Boolean enabled;")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"27"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v(" ")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"28"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("    "),t("span",{staticClass:"hljs-keyword"},[s._v("private")]),s._v(" String username;")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"29"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v(" ")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"30"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("    "),t("span",{staticClass:"hljs-keyword"},[s._v("private")]),s._v(" String password;")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"31"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v(" ")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"32"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("    "),t("span",{staticClass:"hljs-keyword"},[s._v("private")]),s._v(" String userface;")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"33"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v(" ")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"34"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("    "),t("span",{staticClass:"hljs-keyword"},[s._v("private")]),s._v(" String remark;")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"35"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v(" ")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"36"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("    "),t("span",{staticClass:"hljs-keyword"},[s._v("private")]),s._v(" List<Role> roles;")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"37"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v(" ")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"38"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("    "),t("span",{staticClass:"hljs-function"},[t("span",{staticClass:"hljs-keyword"},[s._v("public")]),s._v(" Integer "),t("span",{staticClass:"hljs-title"},[s._v("getId")]),t("span",{staticClass:"hljs-params"},[s._v("()")]),s._v(" ")]),s._v("{")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"39"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("        "),t("span",{staticClass:"hljs-keyword"},[s._v("return")]),s._v(" id;")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"40"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("    }")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"41"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v(" ")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"42"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("    "),t("span",{staticClass:"hljs-function"},[t("span",{staticClass:"hljs-keyword"},[s._v("public")]),s._v(" "),t("span",{staticClass:"hljs-keyword"},[s._v("void")]),s._v(" "),t("span",{staticClass:"hljs-title"},[s._v("setId")]),t("span",{staticClass:"hljs-params"},[s._v("(Integer id)")]),s._v(" ")]),s._v("{")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"43"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("        "),t("span",{staticClass:"hljs-keyword"},[s._v("this")]),s._v(".id = id;")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"44"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("    }")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"45"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v(" ")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"46"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("    "),t("span",{staticClass:"hljs-function"},[t("span",{staticClass:"hljs-keyword"},[s._v("public")]),s._v(" String "),t("span",{staticClass:"hljs-title"},[s._v("getName")]),t("span",{staticClass:"hljs-params"},[s._v("()")]),s._v(" ")]),s._v("{")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"47"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("        "),t("span",{staticClass:"hljs-keyword"},[s._v("return")]),s._v(" name;")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"48"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("    }")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"49"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v(" ")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"50"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("    "),t("span",{staticClass:"hljs-function"},[t("span",{staticClass:"hljs-keyword"},[s._v("public")]),s._v(" "),t("span",{staticClass:"hljs-keyword"},[s._v("void")]),s._v(" "),t("span",{staticClass:"hljs-title"},[s._v("setName")]),t("span",{staticClass:"hljs-params"},[s._v("(String name)")]),s._v(" ")]),s._v("{")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"51"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("        "),t("span",{staticClass:"hljs-keyword"},[s._v("this")]),s._v(".name = name == "),t("span",{staticClass:"hljs-keyword"},[s._v("null")]),s._v(" ? "),t("span",{staticClass:"hljs-keyword"},[s._v("null")]),s._v(" : name.trim();")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"52"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("    }")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"53"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v(" ")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"54"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("    "),t("span",{staticClass:"hljs-function"},[t("span",{staticClass:"hljs-keyword"},[s._v("public")]),s._v(" String "),t("span",{staticClass:"hljs-title"},[s._v("getPhone")]),t("span",{staticClass:"hljs-params"},[s._v("()")]),s._v(" ")]),s._v("{")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"55"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("        "),t("span",{staticClass:"hljs-keyword"},[s._v("return")]),s._v(" phone;")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"56"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("    }")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"57"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v(" ")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"58"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("    "),t("span",{staticClass:"hljs-function"},[t("span",{staticClass:"hljs-keyword"},[s._v("public")]),s._v(" "),t("span",{staticClass:"hljs-keyword"},[s._v("void")]),s._v(" "),t("span",{staticClass:"hljs-title"},[s._v("setPhone")]),t("span",{staticClass:"hljs-params"},[s._v("(String phone)")]),s._v(" ")]),s._v("{")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"59"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("        "),t("span",{staticClass:"hljs-keyword"},[s._v("this")]),s._v(".phone = phone == "),t("span",{staticClass:"hljs-keyword"},[s._v("null")]),s._v(" ? "),t("span",{staticClass:"hljs-keyword"},[s._v("null")]),s._v(" : phone.trim();")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"60"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("    }")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"61"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v(" ")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"62"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("    "),t("span",{staticClass:"hljs-function"},[t("span",{staticClass:"hljs-keyword"},[s._v("public")]),s._v(" String "),t("span",{staticClass:"hljs-title"},[s._v("getTelephone")]),t("span",{staticClass:"hljs-params"},[s._v("()")]),s._v(" ")]),s._v("{")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"63"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("        "),t("span",{staticClass:"hljs-keyword"},[s._v("return")]),s._v(" telephone;")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"64"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("    }")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"65"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v(" ")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"66"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("    "),t("span",{staticClass:"hljs-function"},[t("span",{staticClass:"hljs-keyword"},[s._v("public")]),s._v(" "),t("span",{staticClass:"hljs-keyword"},[s._v("void")]),s._v(" "),t("span",{staticClass:"hljs-title"},[s._v("setTelephone")]),t("span",{staticClass:"hljs-params"},[s._v("(String telephone)")]),s._v(" ")]),s._v("{")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"67"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("        "),t("span",{staticClass:"hljs-keyword"},[s._v("this")]),s._v(".telephone = telephone == "),t("span",{staticClass:"hljs-keyword"},[s._v("null")]),s._v(" ? "),t("span",{staticClass:"hljs-keyword"},[s._v("null")]),s._v(" : telephone.trim();")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"68"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("    }")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"69"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v(" ")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"70"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("    "),t("span",{staticClass:"hljs-function"},[t("span",{staticClass:"hljs-keyword"},[s._v("public")]),s._v(" String "),t("span",{staticClass:"hljs-title"},[s._v("getAddress")]),t("span",{staticClass:"hljs-params"},[s._v("()")]),s._v(" ")]),s._v("{")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"71"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("        "),t("span",{staticClass:"hljs-keyword"},[s._v("return")]),s._v(" address;")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"72"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("    }")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"73"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v(" ")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"74"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("    "),t("span",{staticClass:"hljs-function"},[t("span",{staticClass:"hljs-keyword"},[s._v("public")]),s._v(" "),t("span",{staticClass:"hljs-keyword"},[s._v("void")]),s._v(" "),t("span",{staticClass:"hljs-title"},[s._v("setAddress")]),t("span",{staticClass:"hljs-params"},[s._v("(String address)")]),s._v(" ")]),s._v("{")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"75"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("        "),t("span",{staticClass:"hljs-keyword"},[s._v("this")]),s._v(".address = address == "),t("span",{staticClass:"hljs-keyword"},[s._v("null")]),s._v(" ? "),t("span",{staticClass:"hljs-keyword"},[s._v("null")]),s._v(" : address.trim();")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"76"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("    }")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"77"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v(" ")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"78"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v(" ")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"79"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v(" ")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"80"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("    "),t("span",{staticClass:"hljs-function"},[t("span",{staticClass:"hljs-keyword"},[s._v("public")]),s._v(" "),t("span",{staticClass:"hljs-keyword"},[s._v("void")]),s._v(" "),t("span",{staticClass:"hljs-title"},[s._v("setEnabled")]),t("span",{staticClass:"hljs-params"},[s._v("(Boolean enabled)")]),s._v(" ")]),s._v("{")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"81"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("        "),t("span",{staticClass:"hljs-keyword"},[s._v("this")]),s._v(".enabled = enabled;")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"82"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("    }")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"83"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v(" ")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"84"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("    "),t("span",{staticClass:"hljs-meta"},[s._v("@Override")])])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"85"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("    "),t("span",{staticClass:"hljs-function"},[t("span",{staticClass:"hljs-keyword"},[s._v("public")]),s._v(" String "),t("span",{staticClass:"hljs-title"},[s._v("getUsername")]),t("span",{staticClass:"hljs-params"},[s._v("()")]),s._v(" ")]),s._v("{")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"86"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("        "),t("span",{staticClass:"hljs-keyword"},[s._v("return")]),s._v(" username;")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"87"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("    }")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"88"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("    "),t("span",{staticClass:"hljs-function"},[t("span",{staticClass:"hljs-keyword"},[s._v("public")]),s._v(" "),t("span",{staticClass:"hljs-keyword"},[s._v("void")]),s._v(" "),t("span",{staticClass:"hljs-title"},[s._v("setUsername")]),t("span",{staticClass:"hljs-params"},[s._v("(String username)")]),s._v(" ")]),s._v("{")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"89"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("        "),t("span",{staticClass:"hljs-keyword"},[s._v("this")]),s._v(".username = username == "),t("span",{staticClass:"hljs-keyword"},[s._v("null")]),s._v(" ? "),t("span",{staticClass:"hljs-keyword"},[s._v("null")]),s._v(" : username.trim();")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"90"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("    }")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"91"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v(" ")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"92"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("    "),t("span",{staticClass:"hljs-meta"},[s._v("@Override")])])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"93"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("    "),t("span",{staticClass:"hljs-function"},[t("span",{staticClass:"hljs-keyword"},[s._v("public")]),s._v(" String "),t("span",{staticClass:"hljs-title"},[s._v("getPassword")]),t("span",{staticClass:"hljs-params"},[s._v("()")]),s._v(" ")]),s._v("{")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"94"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("        "),t("span",{staticClass:"hljs-keyword"},[s._v("return")]),s._v(" password;")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"95"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("    }")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"96"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v(" ")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"97"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("    "),t("span",{staticClass:"hljs-function"},[t("span",{staticClass:"hljs-keyword"},[s._v("public")]),s._v(" "),t("span",{staticClass:"hljs-keyword"},[s._v("void")]),s._v(" "),t("span",{staticClass:"hljs-title"},[s._v("setPassword")]),t("span",{staticClass:"hljs-params"},[s._v("(String password)")]),s._v(" ")]),s._v("{")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"98"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("        "),t("span",{staticClass:"hljs-keyword"},[s._v("this")]),s._v(".password = password == "),t("span",{staticClass:"hljs-keyword"},[s._v("null")]),s._v(" ? "),t("span",{staticClass:"hljs-keyword"},[s._v("null")]),s._v(" : password.trim();")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"99"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("    }")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"100"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v(" ")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"101"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("    "),t("span",{staticClass:"hljs-function"},[t("span",{staticClass:"hljs-keyword"},[s._v("public")]),s._v(" String "),t("span",{staticClass:"hljs-title"},[s._v("getUserface")]),t("span",{staticClass:"hljs-params"},[s._v("()")]),s._v(" ")]),s._v("{")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"102"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("        "),t("span",{staticClass:"hljs-keyword"},[s._v("return")]),s._v(" userface;")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"103"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("    }")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"104"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v(" ")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"105"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("    "),t("span",{staticClass:"hljs-function"},[t("span",{staticClass:"hljs-keyword"},[s._v("public")]),s._v(" "),t("span",{staticClass:"hljs-keyword"},[s._v("void")]),s._v(" "),t("span",{staticClass:"hljs-title"},[s._v("setUserface")]),t("span",{staticClass:"hljs-params"},[s._v("(String userface)")]),s._v(" ")]),s._v("{")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"106"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("        "),t("span",{staticClass:"hljs-keyword"},[s._v("this")]),s._v(".userface = userface == "),t("span",{staticClass:"hljs-keyword"},[s._v("null")]),s._v(" ? "),t("span",{staticClass:"hljs-keyword"},[s._v("null")]),s._v(" : userface.trim();")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"107"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("    }")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"108"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v(" ")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"109"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("    "),t("span",{staticClass:"hljs-function"},[t("span",{staticClass:"hljs-keyword"},[s._v("public")]),s._v(" String "),t("span",{staticClass:"hljs-title"},[s._v("getRemark")]),t("span",{staticClass:"hljs-params"},[s._v("()")]),s._v(" ")]),s._v("{")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"110"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("        "),t("span",{staticClass:"hljs-keyword"},[s._v("return")]),s._v(" remark;")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"111"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("    }")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"112"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v(" ")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"113"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("    "),t("span",{staticClass:"hljs-function"},[t("span",{staticClass:"hljs-keyword"},[s._v("public")]),s._v(" "),t("span",{staticClass:"hljs-keyword"},[s._v("void")]),s._v(" "),t("span",{staticClass:"hljs-title"},[s._v("setRemark")]),t("span",{staticClass:"hljs-params"},[s._v("(String remark)")]),s._v(" ")]),s._v("{")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"114"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("        "),t("span",{staticClass:"hljs-keyword"},[s._v("this")]),s._v(".remark = remark == "),t("span",{staticClass:"hljs-keyword"},[s._v("null")]),s._v(" ? "),t("span",{staticClass:"hljs-keyword"},[s._v("null")]),s._v(" : remark.trim();")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"115"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("    }")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"116"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v(" ")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"117"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("    "),t("span",{staticClass:"hljs-meta"},[s._v("@Override")])])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"118"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("    "),t("span",{staticClass:"hljs-function"},[t("span",{staticClass:"hljs-keyword"},[s._v("public")]),s._v(" "),t("span",{staticClass:"hljs-keyword"},[s._v("boolean")]),s._v(" "),t("span",{staticClass:"hljs-title"},[s._v("isAccountNonExpired")]),t("span",{staticClass:"hljs-params"},[s._v("()")]),s._v(" ")]),s._v("{")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"119"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("        "),t("span",{staticClass:"hljs-keyword"},[s._v("return")]),s._v(" "),t("span",{staticClass:"hljs-keyword"},[s._v("true")]),s._v(";")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"120"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("    }")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"121"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v(" ")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"122"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("    "),t("span",{staticClass:"hljs-meta"},[s._v("@Override")])])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"123"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("    "),t("span",{staticClass:"hljs-function"},[t("span",{staticClass:"hljs-keyword"},[s._v("public")]),s._v(" "),t("span",{staticClass:"hljs-keyword"},[s._v("boolean")]),s._v(" "),t("span",{staticClass:"hljs-title"},[s._v("isAccountNonLocked")]),t("span",{staticClass:"hljs-params"},[s._v("()")]),s._v(" ")]),s._v("{")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"124"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("        "),t("span",{staticClass:"hljs-keyword"},[s._v("return")]),s._v(" "),t("span",{staticClass:"hljs-keyword"},[s._v("true")]),s._v(";")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"125"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("    }")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"126"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v(" ")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"127"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("    "),t("span",{staticClass:"hljs-meta"},[s._v("@Override")])])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"128"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("    "),t("span",{staticClass:"hljs-function"},[t("span",{staticClass:"hljs-keyword"},[s._v("public")]),s._v(" "),t("span",{staticClass:"hljs-keyword"},[s._v("boolean")]),s._v(" "),t("span",{staticClass:"hljs-title"},[s._v("isCredentialsNonExpired")]),t("span",{staticClass:"hljs-params"},[s._v("()")]),s._v(" ")]),s._v("{")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"129"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("        "),t("span",{staticClass:"hljs-keyword"},[s._v("return")]),s._v(" "),t("span",{staticClass:"hljs-keyword"},[s._v("true")]),s._v(";")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"130"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("    }")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"131"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v(" ")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"132"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("    "),t("span",{staticClass:"hljs-meta"},[s._v("@Override")])])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"133"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("    "),t("span",{staticClass:"hljs-function"},[t("span",{staticClass:"hljs-keyword"},[s._v("public")]),s._v(" "),t("span",{staticClass:"hljs-keyword"},[s._v("boolean")]),s._v(" "),t("span",{staticClass:"hljs-title"},[s._v("isEnabled")]),t("span",{staticClass:"hljs-params"},[s._v("()")]),s._v(" ")]),s._v("{")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"134"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("        "),t("span",{staticClass:"hljs-keyword"},[s._v("return")]),s._v(" enabled;")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"135"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("    }")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"136"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v(" ")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"137"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v(" ")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"138"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("    "),t("span",{staticClass:"hljs-meta"},[s._v("@Override")])])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"139"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("    "),t("span",{staticClass:"hljs-meta"},[s._v("@JsonIgnore")])])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"140"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("    "),t("span",{staticClass:"hljs-keyword"},[s._v("public")]),s._v(" Collection<? extends GrantedAuthority> getAuthorities() {")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"141"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("      List<SimpleGrantedAuthority> authorities = "),t("span",{staticClass:"hljs-keyword"},[s._v("new")]),s._v(" ArrayList<>(roles.size());")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"142"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("      roles.stream().forEach( (role) ->authorities.add("),t("span",{staticClass:"hljs-keyword"},[s._v("new")]),s._v(" SimpleGrantedAuthority(role.getName())));")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"143"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("        "),t("span",{staticClass:"hljs-keyword"},[s._v("return")]),s._v(" authorities;")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"144"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("    }")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"145"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v(" ")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"146"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("    "),t("span",{staticClass:"hljs-function"},[t("span",{staticClass:"hljs-keyword"},[s._v("public")]),s._v(" List<Role> "),t("span",{staticClass:"hljs-title"},[s._v("getRoles")]),t("span",{staticClass:"hljs-params"},[s._v("()")]),s._v(" ")]),s._v("{")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"147"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("        "),t("span",{staticClass:"hljs-keyword"},[s._v("return")]),s._v(" roles;")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"148"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("    }")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"149"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v(" ")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"150"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("    "),t("span",{staticClass:"hljs-function"},[t("span",{staticClass:"hljs-keyword"},[s._v("public")]),s._v(" "),t("span",{staticClass:"hljs-keyword"},[s._v("void")]),s._v(" "),t("span",{staticClass:"hljs-title"},[s._v("setRoles")]),t("span",{staticClass:"hljs-params"},[s._v("(List<Role> roles)")]),s._v(" ")]),s._v("{")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"151"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("        "),t("span",{staticClass:"hljs-keyword"},[s._v("this")]),s._v(".roles = roles;")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"152"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("    }")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"153"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("}")])])])])]),t("div",{staticClass:"hljs-button {2}",attrs:{"data-title":"复制","data-report-click":'{"spm":"1001.2101.3001.4259"}',onclick:"hljs.copyCode(event)"}})]),s._v(" "),t("p",[t("img",{attrs:{alt:"",height:"269",src:"https://img-blog.csdnimg.cn/20200216112457918.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3Nhbmhld3V5YW5n,size_16,color_FFFFFF,t_70",width:"777"}})]),s._v(" "),t("p",[t("strong",[s._v("要实现动态配置权限，首先要自定义 FilterlnvocationSecurityMetadataSource,"),t("span",{staticStyle:{color:"#f33b45"}},[s._v("自定义权限拦截,获取当前请求的所有角色")])]),s._v(","),t("strong",[s._v(" Spring Security 中通过 FilterlnvocationSecurityMetadataSource 接口中的 getAttributes 方法来确定一个请求需要哪些 角色， FilterlnvocationSecurityMetadataSource 接口的默认实现类是 DefaultFilterlnvocationSecurityMetadataSource ，参考 DefaultFilterlnvocationSecurityMetadataSource 的实现，开发者可以定义自己的 FilterlnvocationSecurityMetadataSource，")])]),s._v(" "),t("p",[t("strong",[t("code",[s._v("SecurityMetadataSource")]),s._v("是"),t("code",[s._v("Spring Security")]),s._v('的一个概念模型接口。用于表示对受权限保护的"安全对象"的权限设置信息。一个该类对象可以被理解成一个映射表，映射表中的每一项包含如下信息 :')])]),s._v(" "),t("ul",[t("li",[t("strong",[s._v("安全对象")])]),t("li",[t("strong",[s._v("安全对象所需权限信息")])])]),s._v(" "),t("p",[t("strong",[s._v("围绕该映射表，")])]),s._v(" "),t("pre",{staticClass:"has",attrs:{name:"code"}},[t("code",{staticClass:"language-java hljs"},[t("ol",{staticClass:"hljs-ln"},[t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"1"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[t("span",{staticClass:"hljs-keyword"},[s._v("package")]),s._v(" com.liruilong.hros.config;")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"2"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v(" ")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"3"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[t("span",{staticClass:"hljs-keyword"},[s._v("import")]),s._v(" com.liruilong.hros.mapper.MenuMapper;")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"4"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[t("span",{staticClass:"hljs-keyword"},[s._v("import")]),s._v(" com.liruilong.hros.model.Menu;")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"5"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[t("span",{staticClass:"hljs-keyword"},[s._v("import")]),s._v(" com.liruilong.hros.model.Role;")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"6"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[t("span",{staticClass:"hljs-keyword"},[s._v("import")]),s._v(" com.liruilong.hros.service.MenuService;")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"7"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[t("span",{staticClass:"hljs-keyword"},[s._v("import")]),s._v(" org.springframework.beans.factory.annotation.Autowired;")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"8"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[t("span",{staticClass:"hljs-keyword"},[s._v("import")]),s._v(" org.springframework.security.access.ConfigAttribute;")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"9"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[t("span",{staticClass:"hljs-keyword"},[s._v("import")]),s._v(" org.springframework.security.access.SecurityConfig;")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"10"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[t("span",{staticClass:"hljs-keyword"},[s._v("import")]),s._v(" org.springframework.security.web.FilterInvocation;")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"11"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[t("span",{staticClass:"hljs-keyword"},[s._v("import")]),s._v(" org.springframework.security.web.access.intercept.FilterInvocationSecurityMetadataSource;")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"12"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[t("span",{staticClass:"hljs-keyword"},[s._v("import")]),s._v(" org.springframework.stereotype.Component;")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"13"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[t("span",{staticClass:"hljs-keyword"},[s._v("import")]),s._v(" org.springframework.util.AntPathMatcher;")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"14"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v(" ")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"15"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[t("span",{staticClass:"hljs-keyword"},[s._v("import")]),s._v(" java.util.Collection;")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"16"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[t("span",{staticClass:"hljs-keyword"},[s._v("import")]),s._v(" java.util.List;")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"17"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v(" ")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"18"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[t("span",{staticClass:"hljs-comment"},[t("span",{staticClass:"hljs-comment"},[s._v("/**")])])])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"19"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[t("span",{staticClass:"hljs-comment"},[s._v(" * "),t("span",{staticClass:"hljs-doctag"},[s._v("@Description")]),s._v(" : 权限处理,根据请求,分析需要的角色,该类的主要功能就是通过当前的请求地址，获取该地址需要的用户角色")])])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"20"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[t("span",{staticClass:"hljs-comment"},[s._v(" * "),t("span",{staticClass:"hljs-doctag"},[s._v("@Author")]),s._v(": Liruilong")])])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"21"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[t("span",{staticClass:"hljs-comment"},[s._v(" * "),t("span",{staticClass:"hljs-doctag"},[s._v("@Date")]),s._v(": 2019/12/24 12:17")])])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"22"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[t("span",{staticClass:"hljs-comment"},[s._v(" */")])])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"23"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[t("span",{staticClass:"hljs-meta"},[s._v("@Component")])])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"24"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[t("span",{staticClass:"hljs-keyword"},[s._v("public")]),s._v(" "),t("span",{staticClass:"hljs-class"},[t("span",{staticClass:"hljs-keyword"},[s._v("class")]),s._v(" "),t("span",{staticClass:"hljs-title"},[s._v("CustomFilterInvocationSecurityMetadataSource")]),s._v(" "),t("span",{staticClass:"hljs-keyword"},[s._v("implements")]),s._v(" "),t("span",{staticClass:"hljs-title"},[s._v("FilterInvocationSecurityMetadataSource")]),s._v(" ")]),s._v("{")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"25"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("    "),t("span",{staticClass:"hljs-meta"},[s._v("@Autowired")])])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"26"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("    MenuService menuService;")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"27"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("    "),t("span",{staticClass:"hljs-comment"},[s._v("//路径比较工具")])])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"28"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("    AntPathMatcher antPathMatcher = "),t("span",{staticClass:"hljs-keyword"},[s._v("new")]),s._v(" AntPathMatcher();")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"29"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("    "),t("span",{staticClass:"hljs-comment"},[t("span",{staticClass:"hljs-comment"},[s._v("/**")])])])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"30"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[t("span",{staticClass:"hljs-comment"},[s._v("     * "),t("span",{staticClass:"hljs-doctag"},[s._v("@return")]),s._v(" java.util.Collection<org.springframework.security.access.ConfigAttribute>")])])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"31"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[t("span",{staticClass:"hljs-comment"},[s._v("     * "),t("span",{staticClass:"hljs-doctag"},[s._v("@Author")]),s._v(" Liruilong")])])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"32"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[t("span",{staticClass:"hljs-comment"},[s._v("     * "),t("span",{staticClass:"hljs-doctag"},[s._v("@Description")]),s._v(" 当前请求需要的角色")])])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"33"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[t("span",{staticClass:"hljs-comment"},[s._v("     * "),t("span",{staticClass:"hljs-doctag"},[s._v("@Date")]),s._v(" 18:13 2019/12/24")])])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"34"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[t("span",{staticClass:"hljs-comment"},[s._v("     * "),t("span",{staticClass:"hljs-doctag"},[s._v("@Param")]),s._v(" [object]")])])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"35"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[t("span",{staticClass:"hljs-comment"},[s._v("     **/")])])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"36"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("    "),t("span",{staticClass:"hljs-meta"},[s._v("@Override")])])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"37"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("    "),t("span",{staticClass:"hljs-function"},[t("span",{staticClass:"hljs-keyword"},[s._v("public")]),s._v(" Collection<ConfigAttribute> "),t("span",{staticClass:"hljs-title"},[s._v("getAttributes")]),t("span",{staticClass:"hljs-params"},[s._v("(Object object)")]),s._v(" "),t("span",{staticClass:"hljs-keyword"},[s._v("throws")]),s._v(" IllegalArgumentException ")]),s._v("{")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"38"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("        "),t("span",{staticClass:"hljs-comment"},[s._v("//获取当前请求路径")])])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"39"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("        String requestUrl = ((FilterInvocation) object).getRequestUrl();")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"40"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("        "),t("span",{staticClass:"hljs-comment"},[s._v("//获取所有的菜单url路径")])])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"41"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("        List<Menu> menus = menuService.getAllMenusWithRole();")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"42"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("        "),t("span",{staticClass:"hljs-keyword"},[s._v("for")]),s._v(" (Menu menu : menus) {")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"43"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("            "),t("span",{staticClass:"hljs-keyword"},[s._v("if")]),s._v(" (antPathMatcher.match(menu.getUrl(), requestUrl)) {")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"44"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("                "),t("span",{staticClass:"hljs-comment"},[s._v("//拥有当前菜单权限的角色")])])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"45"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("                List<Role> roles = menu.getRoles();")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"46"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("                String[] strings = "),t("span",{staticClass:"hljs-keyword"},[s._v("new")]),s._v(" String[roles.size()];")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"47"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("                "),t("span",{staticClass:"hljs-keyword"},[s._v("for")]),s._v(" ("),t("span",{staticClass:"hljs-keyword"},[s._v("int")]),s._v(" i = "),t("span",{staticClass:"hljs-number"},[s._v("0")]),s._v("; i < roles.size(); i++) {")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"48"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("                    strings[i] = roles.get(i).getName();")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"49"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("                }")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"50"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("                "),t("span",{staticClass:"hljs-keyword"},[s._v("return")]),s._v(" SecurityConfig.createList(strings);")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"51"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("            }")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"52"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("        }")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"53"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("        "),t("span",{staticClass:"hljs-comment"},[s._v("// 没匹配上的资源都是登录")])])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"54"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("        "),t("span",{staticClass:"hljs-keyword"},[s._v("return")]),s._v(" SecurityConfig.createList("),t("span",{staticClass:"hljs-string"},[s._v('"ROLE_LOGIN"')]),s._v(");")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"55"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("    }")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"56"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("    "),t("span",{staticClass:"hljs-meta"},[s._v("@Override")])])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"57"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("    "),t("span",{staticClass:"hljs-function"},[t("span",{staticClass:"hljs-keyword"},[s._v("public")]),s._v(" Collection<ConfigAttribute> "),t("span",{staticClass:"hljs-title"},[s._v("getAllConfigAttributes")]),t("span",{staticClass:"hljs-params"},[s._v("()")]),s._v(" ")]),s._v("{")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"58"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("        "),t("span",{staticClass:"hljs-keyword"},[s._v("return")]),s._v(" "),t("span",{staticClass:"hljs-keyword"},[s._v("null")]),s._v(";")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"59"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("    }")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"60"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v(" ")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"61"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("    "),t("span",{staticClass:"hljs-meta"},[s._v("@Override")])])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"62"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("    "),t("span",{staticClass:"hljs-function"},[t("span",{staticClass:"hljs-keyword"},[s._v("public")]),s._v(" "),t("span",{staticClass:"hljs-keyword"},[s._v("boolean")]),s._v(" "),t("span",{staticClass:"hljs-title"},[s._v("supports")]),t("span",{staticClass:"hljs-params"},[s._v("(Class<?> clazz)")]),s._v(" ")]),s._v("{")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"63"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("        "),t("span",{staticClass:"hljs-keyword"},[s._v("return")]),s._v(" "),t("span",{staticClass:"hljs-keyword"},[s._v("true")]),s._v(";")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"64"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("    }")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"65"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("}")])])])])]),t("div",{staticClass:"hljs-button {2}",attrs:{"data-title":"复制","data-report-click":'{"spm":"1001.2101.3001.4259"}',onclick:"hljs.copyCode(event)"}})]),s._v(" "),t("h3",[t("a",{attrs:{name:"t10"}}),t("a",{attrs:{name:"t10"}}),t("strong",[s._v(" 开发者自定义 FilterlnvocationSecurityrMetadataSource")]),s._v(" :")]),s._v(" "),t("p",[t("span",{staticStyle:{color:"#f33b45"}},[t("strong",[s._v("主要实现该接口中的 getAttributes 方法， 该方法的参数是一个 FilterInvocation， 开发者可以从 Filterlnvocation 中提取出当前请求的 URL，返回值是 Collection<ConfigAttribute>，表示当前请求 URL 所需的角色")])]),s._v("。")]),s._v(" "),t("ul",[t("li",[s._v("创建一个 AntPathMatcher，主要用来实现 ant 风格的 URL 匹配。")]),t("li",[s._v("从参数中提取出当前请求的 URL。")]),t("li",[s._v("从数据库中获取所有的资源信息，即本案例中的 menu 表以及 menu 所对应的 role,")]),t("li",[s._v("追历资源信息，边历过程中获取当前请求的 URL 所需要的角色信息并返回。如 果当前请求的 URL 在资源表中不存在相应的模式，就假设该请求登录后即可访问，即直接返代码解释： ROLE LOGJN。")]),t("li",[s._v("getAllConfigAttributes 方法用来返回所有定义好的权限资源， Spring Security 在启动时会校验 相关配置是否正确，如果不需要校验，那么该方法直接返回 null 即可。 supports 方法返回类对象是否支持校验。 ")])]),s._v(" "),t("h3",[t("a",{attrs:{name:"t11"}}),t("a",{attrs:{name:"t11"}}),s._v(" 自定义 AccessDecisionManager")]),s._v(" "),t("p",[t("span",{staticStyle:{color:"#f33b45"}},[t("strong",[s._v("当一个请求走完 FilterlnvocationSecurityMetadataSource 中的 getAttributes 方法后，接下来就会 来到 AccessDecisionManager 类中进行角色信息的比对，自定义 AccessDecisionManager 如下：")])]),t("br"),s._v("  ")]),s._v(" "),t("pre",{staticClass:"has",attrs:{name:"code"}},[t("code",{staticClass:"language-java hljs"},[t("ol",{staticClass:"hljs-ln",staticStyle:{width:"1483px"}},[t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"1"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[t("span",{staticClass:"hljs-keyword"},[s._v("package")]),s._v(" com.liruilong.hros.config;")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"2"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v(" ")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"3"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[t("span",{staticClass:"hljs-keyword"},[s._v("import")]),s._v(" org.springframework.beans.factory.annotation.Autowired;")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"4"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[t("span",{staticClass:"hljs-keyword"},[s._v("import")]),s._v(" org.springframework.security.access.AccessDecisionManager;")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"5"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[t("span",{staticClass:"hljs-keyword"},[s._v("import")]),s._v(" org.springframework.security.access.AccessDeniedException;")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"6"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[t("span",{staticClass:"hljs-keyword"},[s._v("import")]),s._v(" org.springframework.security.access.ConfigAttribute;")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"7"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[t("span",{staticClass:"hljs-keyword"},[s._v("import")]),s._v(" org.springframework.security.authentication.AnonymousAuthenticationToken;")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"8"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[t("span",{staticClass:"hljs-keyword"},[s._v("import")]),s._v(" org.springframework.security.authentication.InsufficientAuthenticationException;")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"9"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[t("span",{staticClass:"hljs-keyword"},[s._v("import")]),s._v(" org.springframework.security.core.Authentication;")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"10"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[t("span",{staticClass:"hljs-keyword"},[s._v("import")]),s._v(" org.springframework.security.core.GrantedAuthority;")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"11"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[t("span",{staticClass:"hljs-keyword"},[s._v("import")]),s._v(" org.springframework.stereotype.Component;")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"12"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v(" ")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"13"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[t("span",{staticClass:"hljs-keyword"},[s._v("import")]),s._v(" java.util.Collection;")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"14"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v(" ")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"15"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[t("span",{staticClass:"hljs-comment"},[t("span",{staticClass:"hljs-comment"},[s._v("/**")])])])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"16"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[t("span",{staticClass:"hljs-comment"},[s._v(" * "),t("span",{staticClass:"hljs-doctag"},[s._v("@Description")]),s._v(" : 判断当前用户是否具备菜单访问，当一个请求走完 FilterlnvocationSecurityMetadataSource 中的 getAttributes 方法后，接下来就会 来到 AccessDecisionManager 类中进行角色信息的比对")])])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"17"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[t("span",{staticClass:"hljs-comment"},[s._v(" * "),t("span",{staticClass:"hljs-doctag"},[s._v("@Author")]),s._v(": Liruilong")])])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"18"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[t("span",{staticClass:"hljs-comment"},[s._v(" * "),t("span",{staticClass:"hljs-doctag"},[s._v("@Date")]),s._v(": 2019/12/24 19:12")])])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"19"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[t("span",{staticClass:"hljs-comment"},[s._v(" */")])])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"20"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[t("span",{staticClass:"hljs-meta"},[s._v("@Component")])])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"21"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[t("span",{staticClass:"hljs-keyword"},[s._v("public")]),s._v(" "),t("span",{staticClass:"hljs-class"},[t("span",{staticClass:"hljs-keyword"},[s._v("class")]),s._v(" "),t("span",{staticClass:"hljs-title"},[s._v("CustomUrlDecisionManager")]),s._v(" "),t("span",{staticClass:"hljs-keyword"},[s._v("implements")]),s._v(" "),t("span",{staticClass:"hljs-title"},[s._v("AccessDecisionManager")]),s._v(" ")]),s._v("{")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"22"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v(" ")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"23"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("    "),t("span",{staticClass:"hljs-comment"},[t("span",{staticClass:"hljs-comment"},[s._v("/**")])])])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"24"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[t("span",{staticClass:"hljs-comment"},[s._v("     * "),t("span",{staticClass:"hljs-doctag"},[s._v("@return")]),s._v(" void")])])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"25"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[t("span",{staticClass:"hljs-comment"},[s._v("     * "),t("span",{staticClass:"hljs-doctag"},[s._v("@Author")]),s._v(" Liruilong")])])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"26"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[t("span",{staticClass:"hljs-comment"},[s._v("     * "),t("span",{staticClass:"hljs-doctag"},[s._v("@Description")]),s._v(" decide 方法有三个参数， 第一个参数包含当前登录用户的信息；")])])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"27"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[t("span",{staticClass:"hljs-comment"},[s._v("     * 第二个参数则是一个 Filterlnvocation 对 象 ，可以 获 取当前请求对 象等；")])])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"28"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[t("span",{staticClass:"hljs-comment"},[s._v("     * 第 三个参 数就是 FilterlnvocationSecurityMetadataSource 中的 getAttributes 方法的返回值， 即当前请求 URL 所 需要的角色。")])])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"29"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[t("span",{staticClass:"hljs-comment"},[s._v("     * "),t("span",{staticClass:"hljs-doctag"},[s._v("@Date")]),s._v(" 18:28 2020/2/13")])])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"30"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[t("span",{staticClass:"hljs-comment"},[s._v("     * "),t("span",{staticClass:"hljs-doctag"},[s._v("@Param")]),s._v(" [authentication, object, configAttributes]")])])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"31"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[t("span",{staticClass:"hljs-comment"},[s._v("     **/")])])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"32"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v(" ")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"33"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("    "),t("span",{staticClass:"hljs-meta"},[s._v("@Override")])])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"34"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("    "),t("span",{staticClass:"hljs-function"},[t("span",{staticClass:"hljs-keyword"},[s._v("public")]),s._v(" "),t("span",{staticClass:"hljs-keyword"},[s._v("void")]),s._v(" "),t("span",{staticClass:"hljs-title"},[s._v("decide")]),t("span",{staticClass:"hljs-params"},[s._v("(Authentication authentication, Object object, Collection<ConfigAttribute> configAttributes)")])])])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"35"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("            "),t("span",{staticClass:"hljs-keyword"},[s._v("throws")]),s._v(" AccessDeniedException, InsufficientAuthenticationException {")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"36"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("        "),t("span",{staticClass:"hljs-keyword"},[s._v("for")]),s._v(" (ConfigAttribute configAttribute : configAttributes) {")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"37"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("            String needRole = configAttribute.getAttribute();")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"38"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("            "),t("span",{staticClass:"hljs-keyword"},[s._v("if")]),s._v(" ("),t("span",{staticClass:"hljs-string"},[s._v('"ROLE_LOGIN"')]),s._v(".equals(needRole)) {")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"39"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("                "),t("span",{staticClass:"hljs-comment"},[s._v("//判断用户是否登录")])])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"40"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("                "),t("span",{staticClass:"hljs-keyword"},[s._v("if")]),s._v(" (authentication "),t("span",{staticClass:"hljs-keyword"},[s._v("instanceof")]),s._v(" AnonymousAuthenticationToken) {")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"41"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("                    "),t("span",{staticClass:"hljs-keyword"},[s._v("throw")]),s._v(" "),t("span",{staticClass:"hljs-keyword"},[s._v("new")]),s._v(" AccessDeniedException("),t("span",{staticClass:"hljs-string"},[s._v('"尚未登录，请登录!"')]),s._v(");")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"42"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("                } "),t("span",{staticClass:"hljs-keyword"},[s._v("else")]),s._v(" {")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"43"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("                    "),t("span",{staticClass:"hljs-keyword"},[s._v("return")]),s._v(";")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"44"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("                }")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"45"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("            }")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"46"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("            Collection<? extends GrantedAuthority> authorities = authentication.getAuthorities();")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"47"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("            "),t("span",{staticClass:"hljs-keyword"},[s._v("for")]),s._v(" (GrantedAuthority authority : authorities) {")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"48"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("                "),t("span",{staticClass:"hljs-keyword"},[s._v("if")]),s._v(" (authority.getAuthority().equals(needRole)) {")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"49"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("                    "),t("span",{staticClass:"hljs-keyword"},[s._v("return")]),s._v(";")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"50"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("                }")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"51"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("            }")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"52"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("        }")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"53"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("        "),t("span",{staticClass:"hljs-keyword"},[s._v("throw")]),s._v(" "),t("span",{staticClass:"hljs-keyword"},[s._v("new")]),s._v(" AccessDeniedException("),t("span",{staticClass:"hljs-string"},[s._v('"权限不足，请联系管理员!"')]),s._v(");")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"54"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("    }")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"55"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v(" ")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"56"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("    "),t("span",{staticClass:"hljs-meta"},[s._v("@Override")])])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"57"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("    "),t("span",{staticClass:"hljs-function"},[t("span",{staticClass:"hljs-keyword"},[s._v("public")]),s._v(" "),t("span",{staticClass:"hljs-keyword"},[s._v("boolean")]),s._v(" "),t("span",{staticClass:"hljs-title"},[s._v("supports")]),t("span",{staticClass:"hljs-params"},[s._v("(ConfigAttribute attribute)")]),s._v(" ")]),s._v("{")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"58"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("        "),t("span",{staticClass:"hljs-keyword"},[s._v("return")]),s._v(" "),t("span",{staticClass:"hljs-keyword"},[s._v("true")]),s._v(";")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"59"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("    }")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"60"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v(" ")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"61"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("    "),t("span",{staticClass:"hljs-meta"},[s._v("@Override")])])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"62"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("    "),t("span",{staticClass:"hljs-function"},[t("span",{staticClass:"hljs-keyword"},[s._v("public")]),s._v(" "),t("span",{staticClass:"hljs-keyword"},[s._v("boolean")]),s._v(" "),t("span",{staticClass:"hljs-title"},[s._v("supports")]),t("span",{staticClass:"hljs-params"},[s._v("(Class<?> clazz)")]),s._v(" ")]),s._v("{")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"63"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("        "),t("span",{staticClass:"hljs-keyword"},[s._v("return")]),s._v(" "),t("span",{staticClass:"hljs-keyword"},[s._v("true")]),s._v(";")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"64"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("    }")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"65"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("}")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"66"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[t("span",{staticClass:"hljs-comment"},[s._v("// authorities.stream().anyMatch((authority) ->authority.getAuthority().equals(attribute));")])])])])])]),t("div",{staticClass:"hljs-button {2}",attrs:{"data-title":"复制","data-report-click":'{"spm":"1001.2101.3001.4259"}',onclick:"hljs.copyCode(event)"}})]),s._v(" "),t("p",[t("strong",[t("span",{staticStyle:{color:"#f33b45"}},[s._v("自定义 AccessDecisionManager 并重写 decide 方法，")])])]),s._v(" "),t("p",[t("strong",[s._v("在该方法中判断当前登录的用户是否具 备当前请求 URL 所需要的角色信息，如果不具备，就抛出 AccessDeniedException 异常，否 则不做任何事即可。 ")])]),s._v(" "),t("p",[t("span",{staticStyle:{color:"#f33b45"}},[t("strong",[s._v("decide 方法有三个参数，")])])]),s._v(" "),t("p",[t("span",{staticStyle:{color:"#f33b45"}},[t("strong",[s._v("第一个参数包含当前登录用户的信息；")])])]),s._v(" "),t("p",[t("span",{staticStyle:{color:"#f33b45"}},[t("strong",[s._v("第二个参数则是一个 Filterlnvocation 对 象 ，可以 获 取当前请求对 象等；")])])]),s._v(" "),t("p",[t("span",{staticStyle:{color:"#f33b45"}},[t("strong",[s._v("第 三个参 数就是 FilterlnvocationSecurityMetadataSource 中的 getAttributes 方法的返回值， 即当前请求 URL 所 需要的角色。")])])]),s._v(" "),t("p",[t("strong",[s._v("进行角色信息对比，如果需要的角色是 ROLE_LOG，说明当前请求的 URL 用 户登录后即可访问，如果 auth 是 UsemamePasswordAuthenticationToken 的实例，那么说明当前用户已登录，该方法到此结束，否则进入正常的判断流程，如果当前用户具备当前请求需 要的角色，那么方法结束。")])]),s._v(" "),t("p",[t("strong",[s._v("springSecurity配置流程分析:")])]),s._v(" "),t("p",[t("img",{attrs:{alt:"",height:"819",src:"https://img-blog.csdnimg.cn/20200216171913215.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3Nhbmhld3V5YW5n,size_16,color_FFFFFF,t_70",width:"1009"}})]),s._v(" "),t("p",[t("img",{attrs:{alt:"",height:"589",src:"https://img-blog.csdnimg.cn/20200216171937340.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3Nhbmhld3V5YW5n,size_16,color_FFFFFF,t_70",width:"671"}})]),s._v(" "),t("pre",[t("code",{staticClass:"language-java hljs"},[t("ol",{staticClass:"hljs-ln hundred",staticStyle:{width:"1658px"}},[t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"1"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[t("span",{staticClass:"hljs-keyword"},[s._v("package")]),s._v(" com.liruilong.hros.config;")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"2"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v(" ")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"3"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[t("span",{staticClass:"hljs-keyword"},[s._v("import")]),s._v(" com.fasterxml.jackson.databind.ObjectMapper;")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"4"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[t("span",{staticClass:"hljs-keyword"},[s._v("import")]),s._v(" com.liruilong.hros.filter.VerifyCodeFilter;")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"5"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[t("span",{staticClass:"hljs-keyword"},[s._v("import")]),s._v(" com.liruilong.hros.model.Hr;")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"6"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[t("span",{staticClass:"hljs-keyword"},[s._v("import")]),s._v(" com.liruilong.hros.model.RespBean;")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"7"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[t("span",{staticClass:"hljs-keyword"},[s._v("import")]),s._v(" com.liruilong.hros.service.HrService;")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"8"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[t("span",{staticClass:"hljs-keyword"},[s._v("import")]),s._v(" org.springframework.beans.factory.annotation.Autowired;")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"9"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[t("span",{staticClass:"hljs-keyword"},[s._v("import")]),s._v(" org.springframework.context.annotation.Bean;")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"10"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[t("span",{staticClass:"hljs-keyword"},[s._v("import")]),s._v(" org.springframework.context.annotation.Configuration;")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"11"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[t("span",{staticClass:"hljs-keyword"},[s._v("import")]),s._v(" org.springframework.security.authentication.*;")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"12"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[t("span",{staticClass:"hljs-keyword"},[s._v("import")]),s._v(" org.springframework.security.config.annotation.ObjectPostProcessor;")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"13"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[t("span",{staticClass:"hljs-keyword"},[s._v("import")]),s._v(" org.springframework.security.config.annotation.authentication.builders.AuthenticationManagerBuilder;")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"14"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[t("span",{staticClass:"hljs-keyword"},[s._v("import")]),s._v(" org.springframework.security.config.annotation.web.builders.HttpSecurity;")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"15"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[t("span",{staticClass:"hljs-keyword"},[s._v("import")]),s._v(" org.springframework.security.config.annotation.web.builders.WebSecurity;")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"16"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[t("span",{staticClass:"hljs-keyword"},[s._v("import")]),s._v(" org.springframework.security.config.annotation.web.configuration.WebSecurityConfigurerAdapter;")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"17"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[t("span",{staticClass:"hljs-keyword"},[s._v("import")]),s._v(" org.springframework.security.core.Authentication;")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"18"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[t("span",{staticClass:"hljs-keyword"},[s._v("import")]),s._v(" org.springframework.security.core.AuthenticationException;")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"19"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[t("span",{staticClass:"hljs-keyword"},[s._v("import")]),s._v(" org.springframework.security.crypto.bcrypt.BCryptPasswordEncoder;")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"20"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[t("span",{staticClass:"hljs-keyword"},[s._v("import")]),s._v(" org.springframework.security.crypto.password.PasswordEncoder;")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"21"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[t("span",{staticClass:"hljs-keyword"},[s._v("import")]),s._v(" org.springframework.security.web.AuthenticationEntryPoint;")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"22"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[t("span",{staticClass:"hljs-keyword"},[s._v("import")]),s._v(" org.springframework.security.web.access.intercept.FilterSecurityInterceptor;")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"23"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[t("span",{staticClass:"hljs-keyword"},[s._v("import")]),s._v(" org.springframework.security.web.authentication.AuthenticationSuccessHandler;")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"24"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[t("span",{staticClass:"hljs-keyword"},[s._v("import")]),s._v(" org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter;")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"25"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[t("span",{staticClass:"hljs-keyword"},[s._v("import")]),s._v(" org.springframework.security.web.authentication.logout.LogoutSuccessHandler;")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"26"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v(" ")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"27"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[t("span",{staticClass:"hljs-keyword"},[s._v("import")]),s._v(" javax.servlet.ServletException;")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"28"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[t("span",{staticClass:"hljs-keyword"},[s._v("import")]),s._v(" javax.servlet.http.HttpServletRequest;")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"29"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[t("span",{staticClass:"hljs-keyword"},[s._v("import")]),s._v(" javax.servlet.http.HttpServletResponse;")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"30"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[t("span",{staticClass:"hljs-keyword"},[s._v("import")]),s._v(" java.io.IOException;")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"31"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[t("span",{staticClass:"hljs-keyword"},[s._v("import")]),s._v(" java.io.PrintWriter;")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"32"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v(" ")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"33"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[t("span",{staticClass:"hljs-comment"},[t("span",{staticClass:"hljs-comment"},[s._v("/**")])])])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"34"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[t("span",{staticClass:"hljs-comment"},[s._v(" * "),t("span",{staticClass:"hljs-doctag"},[s._v("@Description")]),s._v(" :")])])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"35"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[t("span",{staticClass:"hljs-comment"},[s._v(" * "),t("span",{staticClass:"hljs-doctag"},[s._v("@Author")]),s._v(": Liruilong")])])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"36"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[t("span",{staticClass:"hljs-comment"},[s._v(" * "),t("span",{staticClass:"hljs-doctag"},[s._v("@Date")]),s._v(": 2019/12/18 19:11")])])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"37"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[t("span",{staticClass:"hljs-comment"},[s._v(" */")])])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"38"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v(" ")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"39"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[t("span",{staticClass:"hljs-meta"},[s._v("@Configuration")])])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"40"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[t("span",{staticClass:"hljs-keyword"},[s._v("public")]),s._v(" "),t("span",{staticClass:"hljs-class"},[t("span",{staticClass:"hljs-keyword"},[s._v("class")]),s._v(" "),t("span",{staticClass:"hljs-title"},[s._v("SecurityConfig")]),s._v(" "),t("span",{staticClass:"hljs-keyword"},[s._v("extends")]),s._v(" "),t("span",{staticClass:"hljs-title"},[s._v("WebSecurityConfigurerAdapter")]),s._v(" ")]),s._v("{")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"41"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("    "),t("span",{staticClass:"hljs-meta"},[s._v("@Autowired")])])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"42"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("    HrService hrService;")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"43"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("    "),t("span",{staticClass:"hljs-meta"},[s._v("@Autowired")])])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"44"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("    CustomFilterInvocationSecurityMetadataSource customFilterInvocationSecurityMetadataSource;")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"45"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("    "),t("span",{staticClass:"hljs-meta"},[s._v("@Autowired")])])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"46"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("    CustomUrlDecisionManager customUrlDecisionManager;")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"47"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("     "),t("span",{staticClass:"hljs-meta"},[s._v("@Autowired")])])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"48"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("    VerifyCodeFilter verifyCodeFilter ;")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"49"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("    "),t("span",{staticClass:"hljs-meta"},[s._v("@Autowired")])])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"50"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("    MyAuthenticationFailureHandler myAuthenticationFailureHandler;")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"51"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v(" ")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"52"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("    "),t("span",{staticClass:"hljs-meta"},[s._v("@Override")])])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"53"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("    "),t("span",{staticClass:"hljs-function"},[t("span",{staticClass:"hljs-keyword"},[s._v("protected")]),s._v(" "),t("span",{staticClass:"hljs-keyword"},[s._v("void")]),s._v(" "),t("span",{staticClass:"hljs-title"},[s._v("configure")]),t("span",{staticClass:"hljs-params"},[s._v("(HttpSecurity http)")]),s._v(" "),t("span",{staticClass:"hljs-keyword"},[s._v("throws")]),s._v(" Exception ")]),s._v("{")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"54"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("        http.addFilterBefore(verifyCodeFilter, UsernamePasswordAuthenticationFilter.class)")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"55"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("                .authorizeRequests()")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"56"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("                //.anyRequest().authenticated()")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"57"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("                //所有请求的都会经过这进行鉴权处理。返回当前请求需要的角色。")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"58"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("                .withObjectPostProcessor("),t("span",{staticClass:"hljs-keyword"},[s._v("new")]),s._v(" ObjectPostProcessor<FilterSecurityInterceptor>() {")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"59"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("                    "),t("span",{staticClass:"hljs-meta"},[s._v("@Override")])])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"60"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("                    "),t("span",{staticClass:"hljs-keyword"},[s._v("public")]),s._v(" <O extends FilterSecurityInterceptor> "),t("span",{staticClass:"hljs-function"},[s._v("O "),t("span",{staticClass:"hljs-title"},[s._v("postProcess")]),t("span",{staticClass:"hljs-params"},[s._v("(O object)")]),s._v(" ")]),s._v("{")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"61"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("                        object.setSecurityMetadataSource(customFilterInvocationSecurityMetadataSource);")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"62"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("                        object.setAccessDecisionManager(customUrlDecisionManager);")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"63"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("                        "),t("span",{staticClass:"hljs-keyword"},[s._v("return")]),s._v(" object;")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"64"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("                    }")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"65"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("                })")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"66"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("                .and().formLogin().usernameParameter("),t("span",{staticClass:"hljs-string"},[s._v('"username"')]),s._v(").passwordParameter("),t("span",{staticClass:"hljs-string"},[s._v('"password"')]),s._v(")")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"67"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("                "),t("span",{staticClass:"hljs-comment"},[s._v("//设置登录请求的url路径")])])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"68"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("                .loginProcessingUrl("),t("span",{staticClass:"hljs-string"},[s._v('"/doLogin"')]),s._v(")")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"69"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("                "),t("span",{staticClass:"hljs-comment"},[t("span",{staticClass:"hljs-comment"},[s._v("/*需要身份验证时，将浏览器重定向到/ login")])])])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"70"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[t("span",{staticClass:"hljs-comment"},[s._v("                我们负责在请求/ login时呈现登录页面")])])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"71"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[t("span",{staticClass:"hljs-comment"},[s._v("                当身份验证尝试失败时，将浏览器重定向到/ login？error（因为我们没有另外指定）")])])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"72"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[t("span",{staticClass:"hljs-comment"},[s._v("                当请求/ login？error时，我们负责呈现失败页面")])])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"73"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[t("span",{staticClass:"hljs-comment"},[s._v("                成功注销后，将浏览器重定向到/ login？logout（因为我们没有另外指定）")])])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"74"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[t("span",{staticClass:"hljs-comment"},[s._v("                我们负责在请求/ login？logout时呈现注销确认页面*/")])])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"75"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("                .loginPage("),t("span",{staticClass:"hljs-string"},[s._v('"/login"')]),s._v(")")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"76"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("                "),t("span",{staticClass:"hljs-comment"},[s._v("//登录成功回调")])])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"77"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("                .successHandler("),t("span",{staticClass:"hljs-keyword"},[s._v("new")]),s._v(" AuthenticationSuccessHandler() {")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"78"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("                    "),t("span",{staticClass:"hljs-meta"},[s._v("@Override")])])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"79"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("                    "),t("span",{staticClass:"hljs-function"},[t("span",{staticClass:"hljs-keyword"},[s._v("public")]),s._v(" "),t("span",{staticClass:"hljs-keyword"},[s._v("void")]),s._v(" "),t("span",{staticClass:"hljs-title"},[s._v("onAuthenticationSuccess")]),t("span",{staticClass:"hljs-params"},[s._v("(HttpServletRequest httpServletRequest, HttpServletResponse httpServletResponse, Authentication authentication)")]),s._v(" "),t("span",{staticClass:"hljs-keyword"},[s._v("throws")]),s._v(" IOException, ServletException ")]),s._v("{")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"80"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("                        httpServletResponse.setContentType("),t("span",{staticClass:"hljs-string"},[s._v('"application/json;charset=utf-8"')]),s._v(");")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"81"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("                        PrintWriter out = httpServletResponse.getWriter();")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"82"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("                        Hr hr = (Hr) authentication.getPrincipal();")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"83"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("                        "),t("span",{staticClass:"hljs-comment"},[s._v("//密码不回传")])])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"84"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("                        hr.setPassword("),t("span",{staticClass:"hljs-keyword"},[s._v("null")]),s._v(");")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"85"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("                        RespBean ok = RespBean.ok("),t("span",{staticClass:"hljs-string"},[s._v('"登录成功！"')]),s._v(", hr);")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"86"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("                        "),t("span",{staticClass:"hljs-comment"},[s._v("//将hr转化为Sting")])])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"87"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("                        String s = "),t("span",{staticClass:"hljs-keyword"},[s._v("new")]),s._v(" ObjectMapper().writeValueAsString(ok);")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"88"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("                        out.write(s);")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"89"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("                        out.flush();")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"90"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("                        out.close();")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"91"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("                    }")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"92"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("                })")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"93"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("                "),t("span",{staticClass:"hljs-comment"},[s._v("//登失败回调")])])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"94"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("                .failureHandler(myAuthenticationFailureHandler)")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"95"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("                "),t("span",{staticClass:"hljs-comment"},[s._v("//相关的接口直接返回")])])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"96"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("                .permitAll().and().logout()")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"97"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("                "),t("span",{staticClass:"hljs-comment"},[s._v("//注销登录")])])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"98"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("                .logoutSuccessHandler("),t("span",{staticClass:"hljs-keyword"},[s._v("new")]),s._v(" LogoutSuccessHandler() {")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"99"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("                    "),t("span",{staticClass:"hljs-meta"},[s._v("@Override")])])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"100"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("                    "),t("span",{staticClass:"hljs-function"},[t("span",{staticClass:"hljs-keyword"},[s._v("public")]),s._v(" "),t("span",{staticClass:"hljs-keyword"},[s._v("void")]),s._v(" "),t("span",{staticClass:"hljs-title"},[s._v("onLogoutSuccess")]),t("span",{staticClass:"hljs-params"},[t("span",{staticClass:"hljs-params"},[s._v("(HttpServletRequest httpServletRequest,")])])])])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"101"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[t("span",{staticClass:"hljs-params"},[s._v("                                                HttpServletResponse httpServletResponse,")])])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"102"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[t("span",{staticClass:"hljs-params"},[s._v("                                                Authentication authentication)")]),s._v(" "),t("span",{staticClass:"hljs-keyword"},[s._v("throws")]),s._v(" IOException, ServletException {")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"103"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("                        httpServletResponse.setContentType("),t("span",{staticClass:"hljs-string"},[s._v('"application/json;charset=utf-8"')]),s._v(");")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"104"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("                        PrintWriter out = httpServletResponse.getWriter();")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"105"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("                        out.write("),t("span",{staticClass:"hljs-keyword"},[s._v("new")]),s._v(" ObjectMapper().writeValueAsString(RespBean.ok("),t("span",{staticClass:"hljs-string"},[s._v('"注销成功!"')]),s._v(")));")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"106"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("                        out.flush();")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"107"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("                        out.close();")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"108"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("                    }")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"109"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("                })")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"110"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("                .permitAll().and().csrf().disable().exceptionHandling()")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"111"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("                "),t("span",{staticClass:"hljs-comment"},[s._v("//没有认证时，在这里处理结果，不要重定向")])])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"112"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("                .authenticationEntryPoint(")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"113"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("                        "),t("span",{staticClass:"hljs-comment"},[s._v("//myAuthenticationEntryPoint;")])])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"114"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("                        "),t("span",{staticClass:"hljs-keyword"},[s._v("new")]),s._v(" AuthenticationEntryPoint() {")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"115"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("                    "),t("span",{staticClass:"hljs-meta"},[s._v("@Override")])])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"116"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("                    "),t("span",{staticClass:"hljs-function"},[t("span",{staticClass:"hljs-keyword"},[s._v("public")]),s._v(" "),t("span",{staticClass:"hljs-keyword"},[s._v("void")]),s._v(" "),t("span",{staticClass:"hljs-title"},[s._v("commence")]),t("span",{staticClass:"hljs-params"},[s._v("(HttpServletRequest req, HttpServletResponse resp, AuthenticationException authException)")]),s._v(" "),t("span",{staticClass:"hljs-keyword"},[s._v("throws")]),s._v(" IOException, ServletException ")]),s._v("{")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"117"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("                        resp.setContentType("),t("span",{staticClass:"hljs-string"},[s._v('"application/json;charset=utf-8"')]),s._v(");")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"118"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("                        resp.setStatus("),t("span",{staticClass:"hljs-number"},[s._v("401")]),s._v(");")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"119"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("                        PrintWriter out = resp.getWriter();")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"120"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("                        RespBean respBean = RespBean.error("),t("span",{staticClass:"hljs-string"},[s._v('"访问失败!"')]),s._v(");")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"121"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("                        "),t("span",{staticClass:"hljs-keyword"},[s._v("if")]),s._v(" (authException "),t("span",{staticClass:"hljs-keyword"},[s._v("instanceof")]),s._v(" InsufficientAuthenticationException) {")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"122"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("                            respBean.setMsg("),t("span",{staticClass:"hljs-string"},[s._v('"请求失败，请联系管理员!"')]),s._v(");")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"123"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("                        }")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"124"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("                        out.write("),t("span",{staticClass:"hljs-keyword"},[s._v("new")]),s._v(" ObjectMapper().writeValueAsString(respBean));")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"125"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("                        out.flush();")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"126"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("                        out.close();")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"127"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("                    }")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"128"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("                });")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"129"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("    }")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"130"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("    "),t("span",{staticClass:"hljs-meta"},[s._v("@Bean")])])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"131"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("    "),t("span",{staticClass:"hljs-function"},[s._v("PasswordEncoder "),t("span",{staticClass:"hljs-title"},[s._v("passwordEncoder")]),t("span",{staticClass:"hljs-params"},[s._v("()")]),s._v(" ")]),s._v("{")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"132"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("        "),t("span",{staticClass:"hljs-keyword"},[s._v("return")]),s._v(" "),t("span",{staticClass:"hljs-keyword"},[s._v("new")]),s._v(" BCryptPasswordEncoder();")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"133"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("    }")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"134"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("    "),t("span",{staticClass:"hljs-meta"},[s._v("@Override")])])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"135"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("    "),t("span",{staticClass:"hljs-function"},[t("span",{staticClass:"hljs-keyword"},[s._v("protected")]),s._v(" "),t("span",{staticClass:"hljs-keyword"},[s._v("void")]),s._v(" "),t("span",{staticClass:"hljs-title"},[s._v("configure")]),t("span",{staticClass:"hljs-params"},[s._v("(AuthenticationManagerBuilder auth)")]),s._v(" "),t("span",{staticClass:"hljs-keyword"},[s._v("throws")]),s._v(" Exception ")]),s._v("{")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"136"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("        auth.userDetailsService(hrService);")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"137"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("    }")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"138"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("    "),t("span",{staticClass:"hljs-comment"},[t("span",{staticClass:"hljs-comment"},[s._v("/**")])])])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"139"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[t("span",{staticClass:"hljs-comment"},[s._v("     * "),t("span",{staticClass:"hljs-doctag"},[s._v("@Author")]),s._v(" Liruilong")])])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"140"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[t("span",{staticClass:"hljs-comment"},[s._v("     * "),t("span",{staticClass:"hljs-doctag"},[s._v("@Description")]),s._v("  放行的请求路径")])])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"141"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[t("span",{staticClass:"hljs-comment"},[s._v("     * "),t("span",{staticClass:"hljs-doctag"},[s._v("@Date")]),s._v(" 19:25 2020/2/7")])])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"142"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[t("span",{staticClass:"hljs-comment"},[s._v("     * "),t("span",{staticClass:"hljs-doctag"},[s._v("@Param")]),s._v(" [web]")])])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"143"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[t("span",{staticClass:"hljs-comment"},[s._v("     * "),t("span",{staticClass:"hljs-doctag"},[s._v("@return")]),s._v(" void")])])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"144"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[t("span",{staticClass:"hljs-comment"},[s._v("     **/")])])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"145"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("    "),t("span",{staticClass:"hljs-meta"},[s._v("@Override")])])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"146"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("    "),t("span",{staticClass:"hljs-function"},[t("span",{staticClass:"hljs-keyword"},[s._v("public")]),s._v(" "),t("span",{staticClass:"hljs-keyword"},[s._v("void")]),s._v(" "),t("span",{staticClass:"hljs-title"},[s._v("configure")]),t("span",{staticClass:"hljs-params"},[s._v("(WebSecurity web)")]),s._v(" "),t("span",{staticClass:"hljs-keyword"},[s._v("throws")]),s._v(" Exception ")]),s._v("{")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"147"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("        web.ignoring().antMatchers("),t("span",{staticClass:"hljs-string"},[s._v('"/auth/code"')]),s._v(","),t("span",{staticClass:"hljs-string"},[s._v('"/login"')]),s._v(","),t("span",{staticClass:"hljs-string"},[s._v('"/css/**"')]),s._v(","),t("span",{staticClass:"hljs-string"},[s._v('"/js/**"')]),s._v(", "),t("span",{staticClass:"hljs-string"},[s._v('"/index.html"')]),s._v(", "),t("span",{staticClass:"hljs-string"},[s._v('"/img/**"')]),s._v(", "),t("span",{staticClass:"hljs-string"},[s._v('"/fonts/**"')]),s._v(","),t("span",{staticClass:"hljs-string"},[s._v('"/favicon.ico"')]),s._v(");")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"148"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("    }")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"149"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v("}")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"150"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v(" ")])])]),t("li",[t("div",{staticClass:"hljs-ln-numbers"},[t("div",{staticClass:"hljs-ln-line hljs-ln-n",attrs:{"data-line-number":"151"}})]),t("div",{staticClass:"hljs-ln-code"},[t("div",{staticClass:"hljs-ln-line"},[s._v(" ")])])])])]),t("div",{staticClass:"hljs-button {2}",attrs:{"data-title":"复制","data-report-click":'{"spm":"1001.2101.3001.4259"}',onclick:"hljs.copyCode(event)"}})]),s._v(" "),t("p",[s._v("SpringSecurity执行流程分析:")]),s._v(" "),t("p",[t("img",{attrs:{alt:"",src:"https://img-blog.csdn.net/20180318211512445?watermark/2/text/Ly9ibG9nLmNzZG4ubmV0L3UwMTM0MzU4OTM=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70"}})]),s._v(" "),t("p",[s._v("UsernamePasswordAuthenticationFilter就是拦截我们通过表单提交接口提交的用户名和密码，如果是Basic提交的话，就会被BasicAuthenticationFilter拦截，最后的橙色FilterSecurityInterceptor是首先判断我们当前请求的url是否需要认证，如果需要认证，那么就看当前请求是否已经认证，是的话就放行到我们要访问的接口，否则重定向到认证页面。"),t("br"),s._v("  ")]),s._v(" "),t("p",[s._v("UsernamePasswordAuthenticationFilter首先会拦截请求，而UsernamePasswordAuthenticationFilter是继承于AbstractAuthenticationProcessingFilter的，在这个抽象类中已经定义好了doFilter的方法，而里面有一个attemptAuthentication方法是由子类实现的。所以当提交表单时spring security会发现这个一个表单提交，然后就调用了UsernamePasswordAuthenticationFilter的doFilter方法")]),s._v(" "),t("p",[s._v("springSecurity其实就是一组过滤器，请求和响应都会经过这些过滤器，在系统启动的时候，spring boot会自动配上")]),s._v(" "),t("p",[s._v("黄色：已经存储的认证信息")]),s._v(" "),t("p",[s._v("绿色：处理用户身份认证")]),s._v(" "),t("p",[s._v("橙色：捕获黄色抛出的异常")]),s._v(" "),t("p",[s._v("蓝色：决定当前请求是否通过之前某个过滤器的身份认证，不能通过就抛出异常，通过了会帮我们直接跳转")]),s._v(" "),t("p",[t("img",{attrs:{alt:"",src:"https://img-blog.csdnimg.cn/20191205165135360.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3NoYW5kZWFpNTIw,size_16,color_FFFFFF,t_70"}})]),s._v(" "),t("p",[s._v(" ")]),s._v(" "),t("p",[s._v("它的身份认证其实是始于访问资源开始。如果一个用户已登录，那么访问受保护的资源，则会校验该用户是否有权限访问。如果没有权限，则会调用权限拒绝的处理器进行处理。如果有权限，则能顺利访问该资源；")]),s._v(" "),t("p",[s._v("一个用户未登录情况下，也即匿名用户，访问受保护的资源时，spring security会首先检查该资源是否需要权限，如果需要权限，然后再检查，该资源是否是白名单里面。如果是白名单，也能正常访问。如果是受保护的资源，则会提示该用户需要登录。"),t("br"),s._v("  ")]),s._v(" "),t("p",[s._v(" ")]),s._v(" "),t("p",[s._v("感觉学的不大好.....")])]),t("div",{attrs:{"data-report-view":'{"mod":"1585297308_001","dest":"https://blog.csdn.net/sanhewuyang/article/details/103681432","extend1":"pc","ab":"new"}'}},[t("div")])])])])}),[],!1,null,null,null);l.default=i.exports}}]);