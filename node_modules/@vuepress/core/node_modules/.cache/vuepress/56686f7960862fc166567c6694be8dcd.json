{"remainingRequest":"/Users/luna/vue-blog/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/luna/vue-blog/node_modules/@vuepress-reco/vuepress-plugin-bgm-player/bin/BgMusic.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/luna/vue-blog/node_modules/@vuepress-reco/vuepress-plugin-bgm-player/bin/BgMusic.vue","mtime":1622518567891},{"path":"/Users/luna/vue-blog/node_modules/cache-loader/dist/cjs.js","mtime":1622518572085},{"path":"/Users/luna/vue-blog/node_modules/vue-loader/lib/index.js","mtime":1622518574150}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmxldCBJbnRlclZhbAovLyDmrYzmm7LlsIHpnaLnmoTml4vovazop5LluqYKbGV0IHJvdGF0ZVZhbCA9IDAKLy8g5q2M5puy5bCB6Z2i55qE5peL6L2sCmZ1bmN0aW9uIHJvdGF0ZSAoKSB7CiAgSW50ZXJWYWwgPSBzZXRJbnRlcnZhbChmdW5jdGlvbiAoKSB7CiAgICBjb25zdCBjb3ZlciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5yZWNvLWJnbS1jb3ZlcicpCiAgICBjb25zdCBidG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubWluaS1vcGVyYXRpb24nKQogICAgY29uc3QgZm0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZmFsdXQtbWVzc2FnZScpCiAgICByb3RhdGVWYWwgKz0gMQogICAgLy8g6K6+572u5peL6L2s5bGe5oCnKOmhuuaXtumSiCkKICAgIGNvdmVyLnN0eWxlLnRyYW5zZm9ybSA9ICdyb3RhdGUoJyArIHJvdGF0ZVZhbCArICdkZWcpJwogICAgLy8g6K6+572u5peL6L2s5pe255qE5Yqo55S7ICDljIDpgJ8wLjFzCiAgICBjb3Zlci5zdHlsZS50cmFuc2l0aW9uID0gJzAuMXMgbGluZWFyJwogICAgLy8g6K6+572u5peL6L2s5bGe5oCnKOmAhuaXtumSiCkKICAgIGJ0bi5zdHlsZS50cmFuc2Zvcm0gPSAncm90YXRlKC0nICsgcm90YXRlVmFsICsgJ2RlZyknCiAgICAvLyDorr7nva7ml4vovazml7bnmoTliqjnlLsgIOWMgOmAnzAuMXMKICAgIGJ0bi5zdHlsZS50cmFuc2l0aW9uID0gJzAuMXMgbGluZWFyJwogICAgLy8g6K6+572u5peL6L2s5bGe5oCnKOmAhuaXtumSiCkKICAgIGZtLnN0eWxlLnRyYW5zZm9ybSA9ICdyb3RhdGUoLScgKyByb3RhdGVWYWwgKyAnZGVnKScKICAgIC8vIOiuvue9ruaXi+i9rOaXtueahOWKqOeUuyAg5YyA6YCfMC4xcwogICAgZm0uc3R5bGUudHJhbnNpdGlvbiA9ICcwLjFzIGxpbmVhcicKICB9LCAxMDApCn0KaW1wb3J0IHZvbHVtZSBmcm9tICcuL21peGlucy92b2x1bWUuanMnCmltcG9ydCBNb2R1bGVUcmFuc2l0aW9uIGZyb20gJy4vTW9kdWxlVHJhbnNpdGlvbicKZXhwb3J0IGRlZmF1bHQgewogIG1peGluczogW3ZvbHVtZV0sCiAgY29tcG9uZW50czogewogICAgTW9kdWxlVHJhbnNpdGlvbgogIH0sCiAgbW91bnRlZCAoKSB7CiAgICBpZiAodGhpcy5mbG9hdFBvc2l0aW9uID09PSAnbGVmdCcpIHsKICAgICAgdGhpcy5mbG9hdFN0eWxlID0gewogICAgICAgIC4uLnRoaXMuZmxvYXRTdHlsZSwKICAgICAgICAnbGVmdCc6ICcwJywKICAgICAgICAnYm9yZGVyLXRvcC1yaWdodC1yYWRpdXMnOiAnMjBweCcsCiAgICAgICAgJ2JvcmRlci1ib3R0b20tcmlnaHQtcmFkaXVzJzogJzIwcHgnCiAgICAgIH0KICAgIH0gZWxzZSB7CiAgICAgIHRoaXMuZmxvYXRTdHlsZSA9IHsKICAgICAgICAuLi50aGlzLmZsb2F0U3R5bGUsCiAgICAgICAgJ3JpZ2h0JzogJzAnLAogICAgICAgICdib3JkZXItdG9wLWxlZnQtcmFkaXVzJzogJzIwcHgnLAogICAgICAgICdib3JkZXItYm90dG9tLWxlZnQtcmFkaXVzJzogJzIwcHgnCiAgICAgIH0KICAgIH0KICAgIC8vIGF1dG9TaHJpbmvml7bpmpDol4/mrYzmm7Lkv6Hmga8KICAgIGlmICh0aGlzLmF1dG9TaHJpbmspIHRoaXMuY2hhbmdlQmdtSW5mbyh0cnVlKQogIH0sCiAgZGF0YSAoKSB7CiAgICByZXR1cm4gewogICAgICBwYW5lbFBvc2l0aW9uOiBQT1NJVElPTiwKICAgICAgY3VySW5kZXg6IDAsCiAgICAgIGN1clBsYXlTdGF0dXM6ICdwYXVzZWQnLAogICAgICBhdWRpbzogQVVESU9TLAogICAgICBhdXRvcGxheTogQVVUT1BMQVksCiAgICAgIGlzRmxvYXQ6IGZhbHNlLAogICAgICBpc01pbmk6IGZhbHNlLAogICAgICBmaXJzdExvYWQ6IHRydWUsCiAgICAgIGlzTXV0ZTogZmFsc2UsCiAgICAgIGlzRmF1bHQ6IGZhbHNlLAogICAgICBmbG9hdFBvc2l0aW9uOiBGTE9BVF9QT1NJVElPTiwKICAgICAgZmxvYXRTdHlsZTogRkxPQVRfU1RZTEUsCiAgICAgIGF1dG9TaHJpbms6IEFVVE9fU0hSSU5LLAogICAgICBzaHJpbmtNb2RlOiBTSFJJTktfTU9ERQogICAgfQogIH0sCiAgd2F0Y2g6IHsKICAgICdjdXJQbGF5U3RhdHVzJzogZnVuY3Rpb24gKG5ld1ZhbCkgewogICAgICBpZiAobmV3VmFsID09PSAncGxheWluZycpIHsKICAgICAgICByb3RhdGUoKQogICAgICB9IGVsc2UgewogICAgICAgIGNsZWFySW50ZXJ2YWwoSW50ZXJWYWwpCiAgICAgIH0KICAgIH0KICB9LAogIG1ldGhvZHM6IHsKICAgIC8vIOaYvuekuuaIlumakOiXj+atjOabsuS/oeaBrwogICAgY2hhbmdlQmdtSW5mbyAoYm9vbCkgewogICAgICBjb25zdCBpc01vYmlsZSA9ICEhL0FuZHJvaWR8d2ViT1N8aVBob25lfGlQYWR8aVBvZHxCbGFja0JlcnJ5fElFTW9iaWxlfE9wZXJhIE1pbmkvaS50ZXN0KAogICAgICAgIG5hdmlnYXRvci51c2VyQWdlbnQKICAgICAgKQogICAgICBpZiAoaXNNb2JpbGUgfHwgdGhpcy5zaHJpbmtNb2RlID09PSAnZmxvYXQnKSB7CiAgICAgICAgdGhpcy5pc0Zsb2F0ID0gYm9vbAogICAgICB9IGVsc2UgaWYgKCFpc01vYmlsZSAmJiB0aGlzLnNocmlua01vZGUgPT09ICdtaW5pJykgewogICAgICAgIHRoaXMuaXNNaW5pID0gYm9vbAogICAgICB9CiAgICB9LAogICAgLy8gYXVkaW8gY2FucGxheeWbnuiwg+S6i+S7tgogICAgcGxheVJlYWR5ICgpIHsKICAgICAgLy8g56ys5LiA5qyh5Yqg6L295pe25Yid5aeL5YyW6Z+z6YeP5p2h5bm25aSE55CG6Ieq5Yqo5pKt5pS+5LqL5Lu2CiAgICAgIGlmICh0aGlzLmZpcnN0TG9hZCkgewogICAgICAgIGlmICh0aGlzLmdldFZvbHVtZSgpKSB7CiAgICAgICAgICBjb25zdCBwZXJjZW50ID0gdGhpcy5nZXRWb2x1bWUoKQogICAgICAgICAgdGhpcy4kcmVmcy52YmFyLnN0eWxlLndpZHRoID0gcGVyY2VudCAqIDEwMCArICclJwogICAgICAgICAgdGhpcy4kcmVmcy5iZ20udm9sdW1lID0gcGVyY2VudAogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBjb25zdCB2YmFyX3dpZHRoID0gdGhpcy4kcmVmcy5iZ20udm9sdW1lICogMTAwICsgJyUnCiAgICAgICAgICB0aGlzLiRyZWZzLnZiYXIuc3R5bGUud2lkdGggPSB2YmFyX3dpZHRoCiAgICAgICAgfQogICAgICAgIHRoaXMuZmlyc3RMb2FkID0gZmFsc2UKICAgICAgICAvKiDoh6rliqjmkq3mlL7nmoTlpITnkIYKICAgICAgICBpZiAodGhpcy5hdXRvcGxheSkgewogICAgICAgICAgbGV0IHBsYXlQcm9taXNlID0gdGhpcy4kcmVmcy5iZ20ucGxheSgpCiAgICAgICAgICBpZiAocGxheVByb21pc2UgIT09IHVuZGVmaW5lZCkgewogICAgICAgICAgICBwbGF5UHJvbWlzZS50aGVuKHJlcyA9PiB7CiAgICAgICAgICAgIH0pLmNhdGNoKGVyciA9PiB7CiAgICAgICAgICAgICAgY29uc29sZS5sb2coJ+iHquWKqOaSreaUvuWksei0pScpCiAgICAgICAgICAgIH0pCiAgICAgICAgICB9CiAgICAgICAgfSAqLwogICAgICB9CiAgICAgIC8vIOaSreaUvueKtuaAgeS4i+atjOabsuWHhuWkh+WujOaIkOeri+WNs+aSreaUvgogICAgICBpZiAodGhpcy5jdXJQbGF5U3RhdHVzID09PSAncGxheWluZycpIHsKICAgICAgICB0aGlzLnBsYXlCZ20oKQogICAgICB9CiAgICB9LAogICAgLy8g5pqC5YGcCiAgICBwYXVzZUJnbSAoKSB7CiAgICAgIHRoaXMuJHJlZnMuYmdtLnBhdXNlKCkKICAgICAgdGhpcy5jdXJQbGF5U3RhdHVzID0gJ3BhdXNlZCcKICAgIH0sCiAgICAvLyDmkq3mlL4KICAgIHBsYXlCZ20gKCkgewogICAgICBjb25zdCBwbGF5UHJvbWlzZSA9IHRoaXMuJHJlZnMuYmdtLnBsYXkoKQogICAgICBpZiAocGxheVByb21pc2UgIT09IHVuZGVmaW5lZCkgewogICAgICAgIHBsYXlQcm9taXNlLnRoZW4ocmVzID0+IHsKICAgICAgICAgIGlmICh0aGlzLmlzRmF1bHQpIHsKICAgICAgICAgICAgdGhpcy5pc0ZhdWx0ID0gZmFsc2UKICAgICAgICAgIH0KICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgaGFuZGxlLWNhbGxiYWNrLWVycgogICAgICAgIH0pLmNhdGNoKGVyciA9PiB7CiAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpCiAgICAgICAgICAvLyDmkq3mlL7lvILluLjml7bmmL7npLrmkq3mlL7lpLHotKXlubbmmoLlgZzmkq3mlL4KICAgICAgICAgIHRoaXMuaXNGYXVsdCA9IHRydWUKICAgICAgICAgIHRoaXMucGF1c2VCZ20oKQogICAgICAgIH0pCiAgICAgIH0KICAgICAgLy8gdGhpcy4kcmVmcy5iZ20ucGxheSgpCiAgICAgIHRoaXMuY3VyUGxheVN0YXR1cyA9ICdwbGF5aW5nJwogICAgfSwKICAgIC8vIOaSreaUvuS4i+S4gOmmlgogICAgcGxheU5leHQgKCkgewogICAgICB0aGlzLiRyZWZzLnBiYXIuc3R5bGUud2lkdGggPSAwCiAgICAgIHRoaXMuaXNGYXVsdCA9IGZhbHNlCiAgICAgIGlmICh0aGlzLmN1ckluZGV4ID49IHRoaXMuYXVkaW8ubGVuZ3RoIC0gMSkgewogICAgICAgIHRoaXMuY3VySW5kZXggPSAwCiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5jdXJJbmRleCsrCiAgICAgIH0KICAgIH0sCiAgICAvLyDmkq3mlL7kuIrkuIDpppYKICAgIHBsYXlMYXN0ICgpIHsKICAgICAgdGhpcy4kcmVmcy5wYmFyLnN0eWxlLndpZHRoID0gMAogICAgICB0aGlzLmlzRmF1bHQgPSBmYWxzZQogICAgICBpZiAodGhpcy5jdXJJbmRleCA8PSAwKSB7CiAgICAgICAgdGhpcy5jdXJJbmRleCA9IHRoaXMuYXVkaW8ubGVuZ3RoIC0gMQogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuY3VySW5kZXgtLQogICAgICB9CiAgICB9LAogICAgLy8gYmdt57uT5p2f5pe26Ieq5Yqo5LiL5LiA6aaWCiAgICBiZ21FbmRlZCAoKSB7CiAgICAgIHRoaXMuJHJlZnMucGJhci5zdHlsZS53aWR0aCA9IDAKICAgICAgdGhpcy5wbGF5TmV4dCgpCiAgICB9LAogICAgLy8g5pu05paw5q2M5puy6L+b5bqm5p2hCiAgICB0aW1lVXBkYXRlICgpIHsKICAgICAgY29uc3QgdG90YWxfdGltZSA9IHRoaXMuJHJlZnMuYmdtLmR1cmF0aW9uCiAgICAgIGNvbnN0IGN1cl90aW1lID0gdGhpcy4kcmVmcy5iZ20uY3VycmVudFRpbWUKICAgICAgY29uc3QgYmFyX3dpZHRoID0gY3VyX3RpbWUgLyB0b3RhbF90aW1lICogMTAwICsgJyUnCiAgICAgIHRoaXMuJHJlZnMucGJhci5zdHlsZS53aWR0aCA9IGJhcl93aWR0aAogICAgfSwKICAgIC8vIOeCueWHu+i/m+W6puadoei3s+aSrQogICAgcHJvZ3Jlc3NKdW1wIChlKSB7CiAgICAgIGNvbnN0IHRvdGFsX3RpbWUgPSB0aGlzLiRyZWZzLmJnbS5kdXJhdGlvbgogICAgICBjb25zdCBwZXJjZW50ID0gZS5vZmZzZXRYIC8gMTUwCiAgICAgIC8vIOatjOabsuacquWKoOi9veWujOaIkOaXtueCueWHu+i/m+W6puadoeeahOmUmeivr+WkhOeQhgogICAgICBpZiAoaXNOYU4odG90YWxfdGltZSkpIHJldHVybgogICAgICB0aGlzLiRyZWZzLmJnbS5jdXJyZW50VGltZSA9IHBlcmNlbnQgKiB0b3RhbF90aW1lCiAgICB9LAogICAgLy8g54K55Ye76Z+z6YeP5p2h5L+u5pS56Z+z6YePCiAgICB2b2x1bWVKdW1wIChlKSB7CiAgICAgIGNvbnN0IHBlcmNlbnQgPSBlLm9mZnNldFggLyA1NwogICAgICBpZiAocGVyY2VudCA+PSAwICYmIHBlcmNlbnQgPD0gMSkgewogICAgICAgIHRoaXMuaXNNdXRlID0gIShwZXJjZW50ID4gMCkKICAgICAgICB0aGlzLiRyZWZzLnZiYXIuc3R5bGUud2lkdGggPSBwZXJjZW50ICogMTAwICsgJyUnCiAgICAgICAgdGhpcy4kcmVmcy5iZ20udm9sdW1lID0gcGVyY2VudAogICAgICAgIHRoaXMuc2V0Vm9sdW1lKHRoaXMuJHJlZnMuYmdtLnZvbHVtZSkKICAgICAgfQogICAgfSwKICAgIC8vIOmdmemfswogICAgbXV0ZUJnbSAoKSB7CiAgICAgIHRoaXMuaXNNdXRlID0gdHJ1ZQogICAgICB0aGlzLnNldFZvbHVtZSh0aGlzLiRyZWZzLmJnbS52b2x1bWUpCiAgICAgIHRoaXMuJHJlZnMudmJhci5zdHlsZS53aWR0aCA9IDAKICAgICAgdGhpcy4kcmVmcy5iZ20udm9sdW1lID0gMAogICAgfSwKICAgIC8vIOWPlua2iOmdmemfswogICAgdW5NdXRlQmdtICgpIHsKICAgICAgdGhpcy5pc011dGUgPSBmYWxzZQogICAgICBpZiAodGhpcy5nZXRWb2x1bWUoKSkgewogICAgICAgIGNvbnN0IHBlcmNlbnQgPSB0aGlzLmdldFZvbHVtZSgpCiAgICAgICAgdGhpcy4kcmVmcy52YmFyLnN0eWxlLndpZHRoID0gcGVyY2VudCAqIDEwMCArICclJwogICAgICAgIHRoaXMuJHJlZnMuYmdtLnZvbHVtZSA9IHBlcmNlbnQKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLiRyZWZzLnZiYXIuc3R5bGUud2lkdGggPSAnMTAwJScKICAgICAgICB0aGlzLiRyZWZzLmJnbS52b2x1bWUgPSAxCiAgICAgIH0KICAgIH0KICB9Cn0K"},{"version":3,"sources":["BgMusic.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"BgMusic.vue","sourceRoot":"node_modules/@vuepress-reco/vuepress-plugin-bgm-player/bin","sourcesContent":["<template>\n  <div class=\"reco-bgm-panel\">\n    <!-- 播放器 -->\n    <audio id=\"bgm\" :src=\"audio[curIndex].url\" ref=\"bgm\" @ended=\"bgmEnded\" @canplay=\"playReady\" @timeupdate=\"timeUpdate\"></audio>\n    <module-transition :position=\"floatPosition\">\n      <div v-show=\"isFloat\" @click=\"changeBgmInfo(false)\" class=\"reco-float-box\" :style=\"floatStyle\">\n        <img :src=\"audio[curIndex].cover\">\n      </div>\n    </module-transition>\n    <module-transition>\n      <div class=\"reco-bgm-box\" v-show=\"!isFloat\" :style=\"panelPosition\">\n        <!-- 封面 -->\n        <div class=\"reco-bgm-cover\" @click=\"changeBgmInfo(false)\" :style=\"`background-image:url(${audio[curIndex].cover})`\">\n          <!-- mini操作栏 -->\n          <div v-show=\"isMini\" class=\"mini-operation\">\n            <i v-show=\"this.curPlayStatus === 'playing' && isMini\" @click.stop=\"pauseBgm\" class=\"reco-bgm reco-bgm-pause\"></i>\n            <i v-show=\"this.curPlayStatus === 'paused' && isMini\" @click.stop=\"playBgm\" class=\"reco-bgm reco-bgm-play\"></i>\n          </div>\n          <!-- 错误信息显示 -->\n          <div v-show=\"isFault\" class=\"falut-message\">\n            播放失败\n          </div>\n        </div>\n        <module-transition duration=\".15\">\n          <!-- 歌曲信息栏 -->\n          <div v-show=\"!isMini\" class=\"reco-bgm-info\">\n            <!-- 歌曲名 -->\n            <div class=\"info-box\"><i class=\"reco-bgm reco-bgm-music music\"></i>{{ audio[curIndex].name }}</div>\n            <!-- 艺术家名 -->\n            <div class=\"info-box\"><i class=\"reco-bgm reco-bgm-artist\"></i>{{ audio[curIndex].artist }}</div>\n            <!-- 歌曲进度条 -->\n            <div class=\"reco-bgm-progress\">\n              <div class=\"progress-bar\" @click=\"progressJump\">\n                <div class=\"bar\" ref=\"pbar\"></div>\n              </div>\n            </div>\n            <!-- 歌曲操作栏 -->\n            <div class=\"reco-bgm-operation\">\n              <i class=\"reco-bgm reco-bgm-last last\" @click=\"playLast\"></i>\n              <i v-show=\"curPlayStatus === 'playing'\" @click=\"pauseBgm\" class=\"reco-bgm reco-bgm-pause pause\"></i>\n              <i v-show=\"curPlayStatus === 'paused'\" ref=\"play\" @click=\"playBgm\" class=\"reco-bgm reco-bgm-play play\"></i>\n              <i class=\"reco-bgm reco-bgm-next next\" @click=\"playNext\"></i>\n              <i v-show=\"!isMute\" @click=\"muteBgm\" class=\"reco-bgm reco-bgm-volume1 volume\"></i>\n              <i v-show=\"isMute\" @click=\"unMuteBgm\" class=\"reco-bgm reco-bgm-mute mute\"></i>\n              <div class=\"volume-bar\" @click=\"volumeJump\">\n                <div class=\"bar\" ref=\"vbar\"></div>\n              </div>\n            </div>\n          </div>\n        </module-transition>\n        <!-- 缩放按钮 -->\n        <module-transition duration=\".15\">\n          <div v-show=\"!isMini\" @click=\"changeBgmInfo(true)\" class=\"reco-bgm-left-box\">\n            <i class=\"reco-bgm reco-bgm-left\" ></i>\n          </div>\n        </module-transition>\n      </div>\n    </module-transition>\n  </div>\n</template>\n\n<script>\nlet InterVal\n// 歌曲封面的旋转角度\nlet rotateVal = 0\n// 歌曲封面的旋转\nfunction rotate () {\n  InterVal = setInterval(function () {\n    const cover = document.querySelector('.reco-bgm-cover')\n    const btn = document.querySelector('.mini-operation')\n    const fm = document.querySelector('.falut-message')\n    rotateVal += 1\n    // 设置旋转属性(顺时针)\n    cover.style.transform = 'rotate(' + rotateVal + 'deg)'\n    // 设置旋转时的动画  匀速0.1s\n    cover.style.transition = '0.1s linear'\n    // 设置旋转属性(逆时针)\n    btn.style.transform = 'rotate(-' + rotateVal + 'deg)'\n    // 设置旋转时的动画  匀速0.1s\n    btn.style.transition = '0.1s linear'\n    // 设置旋转属性(逆时针)\n    fm.style.transform = 'rotate(-' + rotateVal + 'deg)'\n    // 设置旋转时的动画  匀速0.1s\n    fm.style.transition = '0.1s linear'\n  }, 100)\n}\nimport volume from './mixins/volume.js'\nimport ModuleTransition from './ModuleTransition'\nexport default {\n  mixins: [volume],\n  components: {\n    ModuleTransition\n  },\n  mounted () {\n    if (this.floatPosition === 'left') {\n      this.floatStyle = {\n        ...this.floatStyle,\n        'left': '0',\n        'border-top-right-radius': '20px',\n        'border-bottom-right-radius': '20px'\n      }\n    } else {\n      this.floatStyle = {\n        ...this.floatStyle,\n        'right': '0',\n        'border-top-left-radius': '20px',\n        'border-bottom-left-radius': '20px'\n      }\n    }\n    // autoShrink时隐藏歌曲信息\n    if (this.autoShrink) this.changeBgmInfo(true)\n  },\n  data () {\n    return {\n      panelPosition: POSITION,\n      curIndex: 0,\n      curPlayStatus: 'paused',\n      audio: AUDIOS,\n      autoplay: AUTOPLAY,\n      isFloat: false,\n      isMini: false,\n      firstLoad: true,\n      isMute: false,\n      isFault: false,\n      floatPosition: FLOAT_POSITION,\n      floatStyle: FLOAT_STYLE,\n      autoShrink: AUTO_SHRINK,\n      shrinkMode: SHRINK_MODE\n    }\n  },\n  watch: {\n    'curPlayStatus': function (newVal) {\n      if (newVal === 'playing') {\n        rotate()\n      } else {\n        clearInterval(InterVal)\n      }\n    }\n  },\n  methods: {\n    // 显示或隐藏歌曲信息\n    changeBgmInfo (bool) {\n      const isMobile = !!/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(\n        navigator.userAgent\n      )\n      if (isMobile || this.shrinkMode === 'float') {\n        this.isFloat = bool\n      } else if (!isMobile && this.shrinkMode === 'mini') {\n        this.isMini = bool\n      }\n    },\n    // audio canplay回调事件\n    playReady () {\n      // 第一次加载时初始化音量条并处理自动播放事件\n      if (this.firstLoad) {\n        if (this.getVolume()) {\n          const percent = this.getVolume()\n          this.$refs.vbar.style.width = percent * 100 + '%'\n          this.$refs.bgm.volume = percent\n        } else {\n          const vbar_width = this.$refs.bgm.volume * 100 + '%'\n          this.$refs.vbar.style.width = vbar_width\n        }\n        this.firstLoad = false\n        /* 自动播放的处理\n        if (this.autoplay) {\n          let playPromise = this.$refs.bgm.play()\n          if (playPromise !== undefined) {\n            playPromise.then(res => {\n            }).catch(err => {\n              console.log('自动播放失败')\n            })\n          }\n        } */\n      }\n      // 播放状态下歌曲准备完成立即播放\n      if (this.curPlayStatus === 'playing') {\n        this.playBgm()\n      }\n    },\n    // 暂停\n    pauseBgm () {\n      this.$refs.bgm.pause()\n      this.curPlayStatus = 'paused'\n    },\n    // 播放\n    playBgm () {\n      const playPromise = this.$refs.bgm.play()\n      if (playPromise !== undefined) {\n        playPromise.then(res => {\n          if (this.isFault) {\n            this.isFault = false\n          }\n        // eslint-disable-next-line handle-callback-err\n        }).catch(err => {\n          console.log(err)\n          // 播放异常时显示播放失败并暂停播放\n          this.isFault = true\n          this.pauseBgm()\n        })\n      }\n      // this.$refs.bgm.play()\n      this.curPlayStatus = 'playing'\n    },\n    // 播放下一首\n    playNext () {\n      this.$refs.pbar.style.width = 0\n      this.isFault = false\n      if (this.curIndex >= this.audio.length - 1) {\n        this.curIndex = 0\n      } else {\n        this.curIndex++\n      }\n    },\n    // 播放上一首\n    playLast () {\n      this.$refs.pbar.style.width = 0\n      this.isFault = false\n      if (this.curIndex <= 0) {\n        this.curIndex = this.audio.length - 1\n      } else {\n        this.curIndex--\n      }\n    },\n    // bgm结束时自动下一首\n    bgmEnded () {\n      this.$refs.pbar.style.width = 0\n      this.playNext()\n    },\n    // 更新歌曲进度条\n    timeUpdate () {\n      const total_time = this.$refs.bgm.duration\n      const cur_time = this.$refs.bgm.currentTime\n      const bar_width = cur_time / total_time * 100 + '%'\n      this.$refs.pbar.style.width = bar_width\n    },\n    // 点击进度条跳播\n    progressJump (e) {\n      const total_time = this.$refs.bgm.duration\n      const percent = e.offsetX / 150\n      // 歌曲未加载完成时点击进度条的错误处理\n      if (isNaN(total_time)) return\n      this.$refs.bgm.currentTime = percent * total_time\n    },\n    // 点击音量条修改音量\n    volumeJump (e) {\n      const percent = e.offsetX / 57\n      if (percent >= 0 && percent <= 1) {\n        this.isMute = !(percent > 0)\n        this.$refs.vbar.style.width = percent * 100 + '%'\n        this.$refs.bgm.volume = percent\n        this.setVolume(this.$refs.bgm.volume)\n      }\n    },\n    // 静音\n    muteBgm () {\n      this.isMute = true\n      this.setVolume(this.$refs.bgm.volume)\n      this.$refs.vbar.style.width = 0\n      this.$refs.bgm.volume = 0\n    },\n    // 取消静音\n    unMuteBgm () {\n      this.isMute = false\n      if (this.getVolume()) {\n        const percent = this.getVolume()\n        this.$refs.vbar.style.width = percent * 100 + '%'\n        this.$refs.bgm.volume = percent\n      } else {\n        this.$refs.vbar.style.width = '100%'\n        this.$refs.bgm.volume = 1\n      }\n    }\n  }\n}\n</script>\n\n<style lang=\"stylus\" scoped>\n@require './assets/iconfont/iconfont.css'\n@import './styles/index.styl'\n</style>\n"]}]}